var OI=Object.defineProperty;var YA=n=>{throw TypeError(n)};var FI=(n,e,t)=>e in n?OI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>FI(n,typeof e!="symbol"?e+"":e,t),sw=(n,e,t)=>e.has(n)||YA("Cannot "+t);var l=(n,e,t)=>(sw(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?YA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),y=(n,e,t,r)=>(sw(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),C=(n,e,t)=>(sw(n,e,"access private method"),t);var ot=(n,e,t,r)=>({set _(s){y(n,e,s,t)},get _(){return l(n,e,r)}});function jI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Q1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var W_={exports:{}},c0={},K_={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Symbol.for("react.element"),BI=Symbol.for("react.portal"),UI=Symbol.for("react.fragment"),$I=Symbol.for("react.strict_mode"),zI=Symbol.for("react.profiler"),HI=Symbol.for("react.provider"),VI=Symbol.for("react.context"),GI=Symbol.for("react.forward_ref"),WI=Symbol.for("react.suspense"),KI=Symbol.for("react.memo"),XI=Symbol.for("react.lazy"),QA=Symbol.iterator;function qI(n){return n===null||typeof n!="object"?null:(n=QA&&n[QA]||n["@@iterator"],typeof n=="function"?n:null)}var X_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q_=Object.assign,Y_={};function Rh(n,e,t){this.props=n,this.context=e,this.refs=Y_,this.updater=t||X_}Rh.prototype.isReactComponent={};Rh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Rh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Q_(){}Q_.prototype=Rh.prototype;function J1(n,e,t){this.props=n,this.context=e,this.refs=Y_,this.updater=t||X_}var Z1=J1.prototype=new Q_;Z1.constructor=J1;q_(Z1,Rh.prototype);Z1.isPureReactComponent=!0;var JA=Array.isArray,J_=Object.prototype.hasOwnProperty,eS={current:null},Z_={key:!0,ref:!0,__self:!0,__source:!0};function eT(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)J_.call(e,r)&&!Z_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xm,type:n,key:i,ref:o,props:s,_owner:eS.current}}function YI(n,e){return{$$typeof:Xm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function tS(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xm}function QI(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ZA=/\/+/g;function iw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?QI(""+n.key):e.toString(36)}function ey(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Xm:case BI:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+iw(o,0):r,JA(s)?(t="",n!=null&&(t=n.replace(ZA,"$&/")+"/"),ey(s,e,t,"",function(u){return u})):s!=null&&(tS(s)&&(s=YI(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ZA,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",JA(n))for(var a=0;a<n.length;a++){i=n[a];var c=r+iw(i,a);o+=ey(i,e,t,c,s)}else if(c=qI(n),typeof c=="function")for(n=c.call(n),a=0;!(i=n.next()).done;)i=i.value,c=r+iw(i,a++),o+=ey(i,e,t,c,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pg(n,e,t){if(n==null)return n;var r=[],s=0;return ey(n,r,"","",function(i){return e.call(t,i,s++)}),r}function JI(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Tn={current:null},ty={transition:null},ZI={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:ty,ReactCurrentOwner:eS};function tT(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:pg,forEach:function(n,e,t){pg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return pg(n,function(){e++}),e},toArray:function(n){return pg(n,function(e){return e})||[]},only:function(n){if(!tS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ye.Component=Rh;ye.Fragment=UI;ye.Profiler=zI;ye.PureComponent=J1;ye.StrictMode=$I;ye.Suspense=WI;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI;ye.act=tT;ye.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=q_({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=eS.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)J_.call(e,c)&&!Z_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Xm,type:n.type,key:s,ref:i,props:r,_owner:o}};ye.createContext=function(n){return n={$$typeof:VI,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:HI,_context:n},n.Consumer=n};ye.createElement=eT;ye.createFactory=function(n){var e=eT.bind(null,n);return e.type=n,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(n){return{$$typeof:GI,render:n}};ye.isValidElement=tS;ye.lazy=function(n){return{$$typeof:XI,_payload:{_status:-1,_result:n},_init:JI}};ye.memo=function(n,e){return{$$typeof:KI,type:n,compare:e===void 0?null:e}};ye.startTransition=function(n){var e=ty.transition;ty.transition={};try{n()}finally{ty.transition=e}};ye.unstable_act=tT;ye.useCallback=function(n,e){return Tn.current.useCallback(n,e)};ye.useContext=function(n){return Tn.current.useContext(n)};ye.useDebugValue=function(){};ye.useDeferredValue=function(n){return Tn.current.useDeferredValue(n)};ye.useEffect=function(n,e){return Tn.current.useEffect(n,e)};ye.useId=function(){return Tn.current.useId()};ye.useImperativeHandle=function(n,e,t){return Tn.current.useImperativeHandle(n,e,t)};ye.useInsertionEffect=function(n,e){return Tn.current.useInsertionEffect(n,e)};ye.useLayoutEffect=function(n,e){return Tn.current.useLayoutEffect(n,e)};ye.useMemo=function(n,e){return Tn.current.useMemo(n,e)};ye.useReducer=function(n,e,t){return Tn.current.useReducer(n,e,t)};ye.useRef=function(n){return Tn.current.useRef(n)};ye.useState=function(n){return Tn.current.useState(n)};ye.useSyncExternalStore=function(n,e,t){return Tn.current.useSyncExternalStore(n,e,t)};ye.useTransition=function(){return Tn.current.useTransition()};ye.version="18.3.1";K_.exports=ye;var T=K_.exports;const So=Q1(T),nT=jI({__proto__:null,default:So},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eL=T,tL=Symbol.for("react.element"),nL=Symbol.for("react.fragment"),rL=Object.prototype.hasOwnProperty,sL=eL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iL={key:!0,ref:!0,__self:!0,__source:!0};function rT(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rL.call(e,r)&&!iL.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tL,type:n,key:i,ref:o,props:s,_owner:sL.current}}c0.Fragment=nL;c0.jsx=rT;c0.jsxs=rT;W_.exports=c0;var S=W_.exports,sT={exports:{}},xr={},iT={exports:{}},oT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,R){var I=N.length;N.push(R);e:for(;0<I;){var L=I-1>>>1,F=N[L];if(0<s(F,R))N[L]=R,N[I]=F,I=L;else break e}}function t(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var R=N[0],I=N.pop();if(I!==R){N[0]=I;e:for(var L=0,F=N.length,z=F>>>1;L<z;){var K=2*(L+1)-1,re=N[K],se=K+1,Y=N[se];if(0>s(re,I))se<F&&0>s(Y,re)?(N[L]=Y,N[se]=I,L=se):(N[L]=re,N[K]=I,L=K);else if(se<F&&0>s(Y,I))N[L]=Y,N[se]=I,L=se;else break e}}return R}function s(N,R){var I=N.sortIndex-R.sortIndex;return I!==0?I:N.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,v=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var R=t(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=N)r(u),R.sortIndex=R.expirationTime,e(c,R);else break;R=t(u)}}function E(N){if(m=!1,b(N),!v)if(t(c)!==null)v=!0,H(_);else{var R=t(u);R!==null&&B(E,R.startTime-N)}}function _(N,R){v=!1,m&&(m=!1,g(M),M=-1),p=!0;var I=f;try{for(b(R),h=t(c);h!==null&&(!(h.expirationTime>R)||N&&!j());){var L=h.callback;if(typeof L=="function"){h.callback=null,f=h.priorityLevel;var F=L(h.expirationTime<=R);R=n.unstable_now(),typeof F=="function"?h.callback=F:h===t(c)&&r(c),b(R)}else r(c);h=t(c)}if(h!==null)var z=!0;else{var K=t(u);K!==null&&B(E,K.startTime-R),z=!1}return z}finally{h=null,f=I,p=!1}}var k=!1,P=null,M=-1,D=5,O=-1;function j(){return!(n.unstable_now()-O<D)}function U(){if(P!==null){var N=n.unstable_now();O=N;var R=!0;try{R=P(!0,N)}finally{R?V():(k=!1,P=null)}}else k=!1}var V;if(typeof w=="function")V=function(){w(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=U,V=function(){X.postMessage(null)}}else V=function(){x(U,0)};function H(N){P=N,k||(k=!0,V())}function B(N,R){M=x(function(){N(n.unstable_now())},R)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,H(_))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var I=f;f=R;try{return N()}finally{f=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,R){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var I=f;f=N;try{return R()}finally{f=I}},n.unstable_scheduleCallback=function(N,R,I){var L=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?L+I:L):I=L,N){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=I+F,N={id:d++,callback:R,priorityLevel:N,startTime:I,expirationTime:F,sortIndex:-1},I>L?(N.sortIndex=I,e(u,N),t(c)===null&&N===t(u)&&(m?(g(M),M=-1):m=!0,B(E,I-L))):(N.sortIndex=F,e(c,N),v||p||(v=!0,H(_))),N},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(N){var R=f;return function(){var I=f;f=R;try{return N.apply(this,arguments)}finally{f=I}}}})(oT);iT.exports=oT;var oL=iT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aL=T,br=oL;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aT=new Set,Of={};function Uc(n,e){gh(n,e),gh(n+"Capture",e)}function gh(n,e){for(Of[n]=e,n=0;n<e.length;n++)aT.add(e[n])}var lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cb=Object.prototype.hasOwnProperty,lL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eE={},tE={};function cL(n){return cb.call(tE,n)?!0:cb.call(eE,n)?!1:lL.test(n)?tE[n]=!0:(eE[n]=!0,!1)}function uL(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function dL(n,e,t,r){if(e===null||typeof e>"u"||uL(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Jt[n]=new kn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Jt[e]=new kn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Jt[n]=new kn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Jt[n]=new kn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Jt[n]=new kn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Jt[n]=new kn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Jt[n]=new kn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Jt[n]=new kn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Jt[n]=new kn(n,5,!1,n.toLowerCase(),null,!1,!1)});var nS=/[\-:]([a-z])/g;function rS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(nS,rS);Jt[e]=new kn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(nS,rS);Jt[e]=new kn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(nS,rS);Jt[e]=new kn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Jt[n]=new kn(n,1,!1,n.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Jt[n]=new kn(n,1,!1,n.toLowerCase(),null,!0,!0)});function sS(n,e,t,r){var s=Jt.hasOwnProperty(e)?Jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dL(e,t,s,r)&&(t=null),r||s===null?cL(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var yo=aL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mg=Symbol.for("react.element"),cu=Symbol.for("react.portal"),uu=Symbol.for("react.fragment"),iS=Symbol.for("react.strict_mode"),ub=Symbol.for("react.profiler"),lT=Symbol.for("react.provider"),cT=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),db=Symbol.for("react.suspense"),hb=Symbol.for("react.suspense_list"),aS=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),uT=Symbol.for("react.offscreen"),nE=Symbol.iterator;function Fh(n){return n===null||typeof n!="object"?null:(n=nE&&n[nE]||n["@@iterator"],typeof n=="function"?n:null)}var nt=Object.assign,ow;function Qh(n){if(ow===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ow=e&&e[1]||""}return`
`+ow+n}var aw=!1;function lw(n,e){if(!n||aw)return"";aw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{aw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Qh(n):""}function hL(n){switch(n.tag){case 5:return Qh(n.type);case 16:return Qh("Lazy");case 13:return Qh("Suspense");case 19:return Qh("SuspenseList");case 0:case 2:case 15:return n=lw(n.type,!1),n;case 11:return n=lw(n.type.render,!1),n;case 1:return n=lw(n.type,!0),n;default:return""}}function fb(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case uu:return"Fragment";case cu:return"Portal";case ub:return"Profiler";case iS:return"StrictMode";case db:return"Suspense";case hb:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case cT:return(n.displayName||"Context")+".Consumer";case lT:return(n._context.displayName||"Context")+".Provider";case oS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case aS:return e=n.displayName||null,e!==null?e:fb(n.type)||"Memo";case _o:e=n._payload,n=n._init;try{return fb(n(e))}catch{}}return null}function fL(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fb(e);case 8:return e===iS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $a(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function dT(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pL(n){var e=dT(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function gg(n){n._valueTracker||(n._valueTracker=pL(n))}function hT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=dT(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Jy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pb(n,e){var t=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function rE(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=$a(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fT(n,e){e=e.checked,e!=null&&sS(n,"checked",e,!1)}function mb(n,e){fT(n,e);var t=$a(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?gb(n,e.type,t):e.hasOwnProperty("defaultValue")&&gb(n,e.type,$a(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function sE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function gb(n,e,t){(e!=="number"||Jy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Jh=Array.isArray;function _u(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+$a(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function yb(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function iE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Jh(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:$a(t)}}function pT(n,e){var t=$a(e.value),r=$a(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function oE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function mT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vb(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?mT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yg,gT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yg=yg||document.createElement("div"),yg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ff(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Cf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mL=["Webkit","ms","Moz","O"];Object.keys(Cf).forEach(function(n){mL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Cf[e]=Cf[n]})});function yT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Cf.hasOwnProperty(n)&&Cf[n]?(""+e).trim():e+"px"}function vT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=yT(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var gL=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wb(n,e){if(e){if(gL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function bb(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xb=null;function lS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sb=null,Tu=null,ku=null;function aE(n){if(n=Qm(n)){if(typeof Sb!="function")throw Error(W(280));var e=n.stateNode;e&&(e=p0(e),Sb(n.stateNode,n.type,e))}}function wT(n){Tu?ku?ku.push(n):ku=[n]:Tu=n}function bT(){if(Tu){var n=Tu,e=ku;if(ku=Tu=null,aE(n),e)for(n=0;n<e.length;n++)aE(e[n])}}function xT(n,e){return n(e)}function ST(){}var cw=!1;function AT(n,e,t){if(cw)return n(e,t);cw=!0;try{return xT(n,e,t)}finally{cw=!1,(Tu!==null||ku!==null)&&(ST(),bT())}}function jf(n,e){var t=n.stateNode;if(t===null)return null;var r=p0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var Ab=!1;if(lo)try{var jh={};Object.defineProperty(jh,"passive",{get:function(){Ab=!0}}),window.addEventListener("test",jh,jh),window.removeEventListener("test",jh,jh)}catch{Ab=!1}function yL(n,e,t,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var _f=!1,Zy=null,ev=!1,Eb=null,vL={onError:function(n){_f=!0,Zy=n}};function wL(n,e,t,r,s,i,o,a,c){_f=!1,Zy=null,yL.apply(vL,arguments)}function bL(n,e,t,r,s,i,o,a,c){if(wL.apply(this,arguments),_f){if(_f){var u=Zy;_f=!1,Zy=null}else throw Error(W(198));ev||(ev=!0,Eb=u)}}function $c(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ET(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function lE(n){if($c(n)!==n)throw Error(W(188))}function xL(n){var e=n.alternate;if(!e){if(e=$c(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return lE(s),n;if(i===r)return lE(s),e;i=i.sibling}throw Error(W(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function CT(n){return n=xL(n),n!==null?_T(n):null}function _T(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=_T(n);if(e!==null)return e;n=n.sibling}return null}var TT=br.unstable_scheduleCallback,cE=br.unstable_cancelCallback,SL=br.unstable_shouldYield,AL=br.unstable_requestPaint,gt=br.unstable_now,EL=br.unstable_getCurrentPriorityLevel,cS=br.unstable_ImmediatePriority,kT=br.unstable_UserBlockingPriority,tv=br.unstable_NormalPriority,CL=br.unstable_LowPriority,PT=br.unstable_IdlePriority,u0=null,ri=null;function _L(n){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(u0,n,void 0,(n.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:PL,TL=Math.log,kL=Math.LN2;function PL(n){return n>>>=0,n===0?32:31-(TL(n)/kL|0)|0}var vg=64,wg=4194304;function Zh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function nv(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=Zh(a):(i&=o,i!==0&&(r=Zh(i)))}else o=t&~s,o!==0?r=Zh(o):i!==0&&(r=Zh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ms(e),s=1<<t,r|=n[t],e&=~s;return r}function RL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ML(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-ms(i),a=1<<o,c=s[o];c===-1?(!(a&t)||a&r)&&(s[o]=RL(a,e)):c<=e&&(n.expiredLanes|=a),i&=~a}}function Cb(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function RT(){var n=vg;return vg<<=1,!(vg&4194240)&&(vg=64),n}function uw(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function qm(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ms(e),n[e]=t}function NL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-ms(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function uS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ms(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Pe=0;function MT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var NT,dS,IT,LT,DT,_b=!1,bg=[],Ia=null,La=null,Da=null,Bf=new Map,Uf=new Map,ko=[],IL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uE(n,e){switch(n){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Bf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uf.delete(e.pointerId)}}function Bh(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qm(e),e!==null&&dS(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function LL(n,e,t,r,s){switch(e){case"focusin":return Ia=Bh(Ia,n,e,t,r,s),!0;case"dragenter":return La=Bh(La,n,e,t,r,s),!0;case"mouseover":return Da=Bh(Da,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Bf.set(i,Bh(Bf.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Uf.set(i,Bh(Uf.get(i)||null,n,e,t,r,s)),!0}return!1}function OT(n){var e=ul(n.target);if(e!==null){var t=$c(e);if(t!==null){if(e=t.tag,e===13){if(e=ET(t),e!==null){n.blockedOn=e,DT(n.priority,function(){IT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ny(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Tb(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);xb=r,t.target.dispatchEvent(r),xb=null}else return e=Qm(t),e!==null&&dS(e),n.blockedOn=t,!1;e.shift()}return!0}function dE(n,e,t){ny(n)&&t.delete(e)}function DL(){_b=!1,Ia!==null&&ny(Ia)&&(Ia=null),La!==null&&ny(La)&&(La=null),Da!==null&&ny(Da)&&(Da=null),Bf.forEach(dE),Uf.forEach(dE)}function Uh(n,e){n.blockedOn===e&&(n.blockedOn=null,_b||(_b=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,DL)))}function $f(n){function e(s){return Uh(s,n)}if(0<bg.length){Uh(bg[0],n);for(var t=1;t<bg.length;t++){var r=bg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ia!==null&&Uh(Ia,n),La!==null&&Uh(La,n),Da!==null&&Uh(Da,n),Bf.forEach(e),Uf.forEach(e),t=0;t<ko.length;t++)r=ko[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<ko.length&&(t=ko[0],t.blockedOn===null);)OT(t),t.blockedOn===null&&ko.shift()}var Pu=yo.ReactCurrentBatchConfig,rv=!0;function OL(n,e,t,r){var s=Pe,i=Pu.transition;Pu.transition=null;try{Pe=1,hS(n,e,t,r)}finally{Pe=s,Pu.transition=i}}function FL(n,e,t,r){var s=Pe,i=Pu.transition;Pu.transition=null;try{Pe=4,hS(n,e,t,r)}finally{Pe=s,Pu.transition=i}}function hS(n,e,t,r){if(rv){var s=Tb(n,e,t,r);if(s===null)bw(n,e,r,sv,t),uE(n,r);else if(LL(s,n,e,t,r))r.stopPropagation();else if(uE(n,r),e&4&&-1<IL.indexOf(n)){for(;s!==null;){var i=Qm(s);if(i!==null&&NT(i),i=Tb(n,e,t,r),i===null&&bw(n,e,r,sv,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else bw(n,e,r,null,t)}}var sv=null;function Tb(n,e,t,r){if(sv=null,n=lS(r),n=ul(n),n!==null)if(e=$c(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ET(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return sv=n,null}function FT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EL()){case cS:return 1;case kT:return 4;case tv:case CL:return 16;case PT:return 536870912;default:return 16}default:return 16}}var Ra=null,fS=null,ry=null;function jT(){if(ry)return ry;var n,e=fS,t=e.length,r,s="value"in Ra?Ra.value:Ra.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return ry=s.slice(n,1<r?1-r:void 0)}function sy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function xg(){return!0}function hE(){return!1}function Sr(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xg:hE,this.isPropagationStopped=hE,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xg)},persist:function(){},isPersistent:xg}),e}var Mh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pS=Sr(Mh),Ym=nt({},Mh,{view:0,detail:0}),jL=Sr(Ym),dw,hw,$h,d0=nt({},Ym,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$h&&($h&&n.type==="mousemove"?(dw=n.screenX-$h.screenX,hw=n.screenY-$h.screenY):hw=dw=0,$h=n),dw)},movementY:function(n){return"movementY"in n?n.movementY:hw}}),fE=Sr(d0),BL=nt({},d0,{dataTransfer:0}),UL=Sr(BL),$L=nt({},Ym,{relatedTarget:0}),fw=Sr($L),zL=nt({},Mh,{animationName:0,elapsedTime:0,pseudoElement:0}),HL=Sr(zL),VL=nt({},Mh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),GL=Sr(VL),WL=nt({},Mh,{data:0}),pE=Sr(WL),KL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qL[n])?!!e[n]:!1}function mS(){return YL}var QL=nt({},Ym,{key:function(n){if(n.key){var e=KL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=sy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mS,charCode:function(n){return n.type==="keypress"?sy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),JL=Sr(QL),ZL=nt({},d0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mE=Sr(ZL),eD=nt({},Ym,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mS}),tD=Sr(eD),nD=nt({},Mh,{propertyName:0,elapsedTime:0,pseudoElement:0}),rD=Sr(nD),sD=nt({},d0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),iD=Sr(sD),oD=[9,13,27,32],gS=lo&&"CompositionEvent"in window,Tf=null;lo&&"documentMode"in document&&(Tf=document.documentMode);var aD=lo&&"TextEvent"in window&&!Tf,BT=lo&&(!gS||Tf&&8<Tf&&11>=Tf),gE=" ",yE=!1;function UT(n,e){switch(n){case"keyup":return oD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $T(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var du=!1;function lD(n,e){switch(n){case"compositionend":return $T(e);case"keypress":return e.which!==32?null:(yE=!0,gE);case"textInput":return n=e.data,n===gE&&yE?null:n;default:return null}}function cD(n,e){if(du)return n==="compositionend"||!gS&&UT(n,e)?(n=jT(),ry=fS=Ra=null,du=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BT&&e.locale!=="ko"?null:e.data;default:return null}}var uD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!uD[n.type]:e==="textarea"}function zT(n,e,t,r){wT(r),e=iv(e,"onChange"),0<e.length&&(t=new pS("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var kf=null,zf=null;function dD(n){ZT(n,0)}function h0(n){var e=pu(n);if(hT(e))return n}function hD(n,e){if(n==="change")return e}var HT=!1;if(lo){var pw;if(lo){var mw="oninput"in document;if(!mw){var wE=document.createElement("div");wE.setAttribute("oninput","return;"),mw=typeof wE.oninput=="function"}pw=mw}else pw=!1;HT=pw&&(!document.documentMode||9<document.documentMode)}function bE(){kf&&(kf.detachEvent("onpropertychange",VT),zf=kf=null)}function VT(n){if(n.propertyName==="value"&&h0(zf)){var e=[];zT(e,zf,n,lS(n)),AT(dD,e)}}function fD(n,e,t){n==="focusin"?(bE(),kf=e,zf=t,kf.attachEvent("onpropertychange",VT)):n==="focusout"&&bE()}function pD(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return h0(zf)}function mD(n,e){if(n==="click")return h0(e)}function gD(n,e){if(n==="input"||n==="change")return h0(e)}function yD(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ys=typeof Object.is=="function"?Object.is:yD;function Hf(n,e){if(ys(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!cb.call(e,s)||!ys(n[s],e[s]))return!1}return!0}function xE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function SE(n,e){var t=xE(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=xE(t)}}function GT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?GT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function WT(){for(var n=window,e=Jy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Jy(n.document)}return e}function yS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function vD(n){var e=WT(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&GT(t.ownerDocument.documentElement,t)){if(r!==null&&yS(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=SE(t,i);var o=SE(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var wD=lo&&"documentMode"in document&&11>=document.documentMode,hu=null,kb=null,Pf=null,Pb=!1;function AE(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Pb||hu==null||hu!==Jy(r)||(r=hu,"selectionStart"in r&&yS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pf&&Hf(Pf,r)||(Pf=r,r=iv(kb,"onSelect"),0<r.length&&(e=new pS("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=hu)))}function Sg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var fu={animationend:Sg("Animation","AnimationEnd"),animationiteration:Sg("Animation","AnimationIteration"),animationstart:Sg("Animation","AnimationStart"),transitionend:Sg("Transition","TransitionEnd")},gw={},KT={};lo&&(KT=document.createElement("div").style,"AnimationEvent"in window||(delete fu.animationend.animation,delete fu.animationiteration.animation,delete fu.animationstart.animation),"TransitionEvent"in window||delete fu.transitionend.transition);function f0(n){if(gw[n])return gw[n];if(!fu[n])return n;var e=fu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in KT)return gw[n]=e[t];return n}var XT=f0("animationend"),qT=f0("animationiteration"),YT=f0("animationstart"),QT=f0("transitionend"),JT=new Map,EE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(n,e){JT.set(n,e),Uc(e,[n])}for(var yw=0;yw<EE.length;yw++){var vw=EE[yw],bD=vw.toLowerCase(),xD=vw[0].toUpperCase()+vw.slice(1);Qa(bD,"on"+xD)}Qa(XT,"onAnimationEnd");Qa(qT,"onAnimationIteration");Qa(YT,"onAnimationStart");Qa("dblclick","onDoubleClick");Qa("focusin","onFocus");Qa("focusout","onBlur");Qa(QT,"onTransitionEnd");gh("onMouseEnter",["mouseout","mouseover"]);gh("onMouseLeave",["mouseout","mouseover"]);gh("onPointerEnter",["pointerout","pointerover"]);gh("onPointerLeave",["pointerout","pointerover"]);Uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ef));function CE(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,bL(r,e,void 0,n),n.currentTarget=null}function ZT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;CE(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;CE(s,a,u),i=c}}}if(ev)throw n=Eb,ev=!1,Eb=null,n}function Ve(n,e){var t=e[Lb];t===void 0&&(t=e[Lb]=new Set);var r=n+"__bubble";t.has(r)||(ek(e,n,2,!1),t.add(r))}function ww(n,e,t){var r=0;e&&(r|=4),ek(t,n,r,e)}var Ag="_reactListening"+Math.random().toString(36).slice(2);function Vf(n){if(!n[Ag]){n[Ag]=!0,aT.forEach(function(t){t!=="selectionchange"&&(SD.has(t)||ww(t,!1,n),ww(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ag]||(e[Ag]=!0,ww("selectionchange",!1,e))}}function ek(n,e,t,r){switch(FT(e)){case 1:var s=OL;break;case 4:s=FL;break;default:s=hS}t=s.bind(null,e,t,n),s=void 0,!Ab||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function bw(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ul(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}AT(function(){var u=i,d=lS(t),h=[];e:{var f=JT.get(n);if(f!==void 0){var p=pS,v=n;switch(n){case"keypress":if(sy(t)===0)break e;case"keydown":case"keyup":p=JL;break;case"focusin":v="focus",p=fw;break;case"focusout":v="blur",p=fw;break;case"beforeblur":case"afterblur":p=fw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=fE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=UL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tD;break;case XT:case qT:case YT:p=HL;break;case QT:p=rD;break;case"scroll":p=jL;break;case"wheel":p=iD;break;case"copy":case"cut":case"paste":p=GL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=mE}var m=(e&4)!==0,x=!m&&n==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var w=u,b;w!==null;){b=w;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,g!==null&&(E=jf(w,g),E!=null&&m.push(Gf(w,E,b)))),x)break;w=w.return}0<m.length&&(f=new p(f,v,null,t,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==xb&&(v=t.relatedTarget||t.fromElement)&&(ul(v)||v[co]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=u,v=v?ul(v):null,v!==null&&(x=$c(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(m=fE,E="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(m=mE,E="onPointerLeave",g="onPointerEnter",w="pointer"),x=p==null?f:pu(p),b=v==null?f:pu(v),f=new m(E,w+"leave",p,t,d),f.target=x,f.relatedTarget=b,E=null,ul(d)===u&&(m=new m(g,w+"enter",v,t,d),m.target=b,m.relatedTarget=x,E=m),x=E,p&&v)t:{for(m=p,g=v,w=0,b=m;b;b=Yc(b))w++;for(b=0,E=g;E;E=Yc(E))b++;for(;0<w-b;)m=Yc(m),w--;for(;0<b-w;)g=Yc(g),b--;for(;w--;){if(m===g||g!==null&&m===g.alternate)break t;m=Yc(m),g=Yc(g)}m=null}else m=null;p!==null&&_E(h,f,p,m,!1),v!==null&&x!==null&&_E(h,x,v,m,!0)}}e:{if(f=u?pu(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=hD;else if(vE(f))if(HT)_=gD;else{_=pD;var k=fD}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=mD);if(_&&(_=_(n,u))){zT(h,_,t,d);break e}k&&k(n,f,u),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&gb(f,"number",f.value)}switch(k=u?pu(u):window,n){case"focusin":(vE(k)||k.contentEditable==="true")&&(hu=k,kb=u,Pf=null);break;case"focusout":Pf=kb=hu=null;break;case"mousedown":Pb=!0;break;case"contextmenu":case"mouseup":case"dragend":Pb=!1,AE(h,t,d);break;case"selectionchange":if(wD)break;case"keydown":case"keyup":AE(h,t,d)}var P;if(gS)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else du?UT(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(BT&&t.locale!=="ko"&&(du||M!=="onCompositionStart"?M==="onCompositionEnd"&&du&&(P=jT()):(Ra=d,fS="value"in Ra?Ra.value:Ra.textContent,du=!0)),k=iv(u,M),0<k.length&&(M=new pE(M,n,null,t,d),h.push({event:M,listeners:k}),P?M.data=P:(P=$T(t),P!==null&&(M.data=P)))),(P=aD?lD(n,t):cD(n,t))&&(u=iv(u,"onBeforeInput"),0<u.length&&(d=new pE("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=P))}ZT(h,e)})}function Gf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function iv(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jf(n,t),i!=null&&r.unshift(Gf(n,i,s)),i=jf(n,e),i!=null&&r.push(Gf(n,i,s))),n=n.return}return r}function Yc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _E(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=jf(t,i),c!=null&&o.unshift(Gf(t,c,a))):s||(c=jf(t,i),c!=null&&o.push(Gf(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var AD=/\r\n?/g,ED=/\u0000|\uFFFD/g;function TE(n){return(typeof n=="string"?n:""+n).replace(AD,`
`).replace(ED,"")}function Eg(n,e,t){if(e=TE(e),TE(n)!==e&&t)throw Error(W(425))}function ov(){}var Rb=null,Mb=null;function Nb(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ib=typeof setTimeout=="function"?setTimeout:void 0,CD=typeof clearTimeout=="function"?clearTimeout:void 0,kE=typeof Promise=="function"?Promise:void 0,_D=typeof queueMicrotask=="function"?queueMicrotask:typeof kE<"u"?function(n){return kE.resolve(null).then(n).catch(TD)}:Ib;function TD(n){setTimeout(function(){throw n})}function xw(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),$f(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);$f(e)}function Oa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function PE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Nh=Math.random().toString(36).slice(2),ei="__reactFiber$"+Nh,Wf="__reactProps$"+Nh,co="__reactContainer$"+Nh,Lb="__reactEvents$"+Nh,kD="__reactListeners$"+Nh,PD="__reactHandles$"+Nh;function ul(n){var e=n[ei];if(e)return e;for(var t=n.parentNode;t;){if(e=t[co]||t[ei]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=PE(n);n!==null;){if(t=n[ei])return t;n=PE(n)}return e}n=t,t=n.parentNode}return null}function Qm(n){return n=n[ei]||n[co],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function pu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function p0(n){return n[Wf]||null}var Db=[],mu=-1;function Ja(n){return{current:n}}function We(n){0>mu||(n.current=Db[mu],Db[mu]=null,mu--)}function $e(n,e){mu++,Db[mu]=n.current,n.current=e}var za={},hn=Ja(za),zn=Ja(!1),Mc=za;function yh(n,e){var t=n.type.contextTypes;if(!t)return za;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Hn(n){return n=n.childContextTypes,n!=null}function av(){We(zn),We(hn)}function RE(n,e,t){if(hn.current!==za)throw Error(W(168));$e(hn,e),$e(zn,t)}function tk(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,fL(n)||"Unknown",s));return nt({},t,r)}function lv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||za,Mc=hn.current,$e(hn,n),$e(zn,zn.current),!0}function ME(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=tk(n,e,Mc),r.__reactInternalMemoizedMergedChildContext=n,We(zn),We(hn),$e(hn,n)):We(zn),$e(zn,t)}var bi=null,m0=!1,Sw=!1;function nk(n){bi===null?bi=[n]:bi.push(n)}function RD(n){m0=!0,nk(n)}function Za(){if(!Sw&&bi!==null){Sw=!0;var n=0,e=Pe;try{var t=bi;for(Pe=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}bi=null,m0=!1}catch(s){throw bi!==null&&(bi=bi.slice(n+1)),TT(cS,Za),s}finally{Pe=e,Sw=!1}}return null}var gu=[],yu=0,cv=null,uv=0,jr=[],Br=0,Nc=null,no=1,ro="";function nl(n,e){gu[yu++]=uv,gu[yu++]=cv,cv=n,uv=e}function rk(n,e,t){jr[Br++]=no,jr[Br++]=ro,jr[Br++]=Nc,Nc=n;var r=no;n=ro;var s=32-ms(r)-1;r&=~(1<<s),t+=1;var i=32-ms(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,no=1<<32-ms(e)+s|t<<s|r,ro=i+n}else no=1<<i|t<<s|r,ro=n}function vS(n){n.return!==null&&(nl(n,1),rk(n,1,0))}function wS(n){for(;n===cv;)cv=gu[--yu],gu[yu]=null,uv=gu[--yu],gu[yu]=null;for(;n===Nc;)Nc=jr[--Br],jr[Br]=null,ro=jr[--Br],jr[Br]=null,no=jr[--Br],jr[Br]=null}var yr=null,gr=null,Ye=!1,fs=null;function sk(n,e){var t=$r(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function NE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,yr=n,gr=Oa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,yr=n,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Nc!==null?{id:no,overflow:ro}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=$r(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,yr=n,gr=null,!0):!1;default:return!1}}function Ob(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fb(n){if(Ye){var e=gr;if(e){var t=e;if(!NE(n,e)){if(Ob(n))throw Error(W(418));e=Oa(t.nextSibling);var r=yr;e&&NE(n,e)?sk(r,t):(n.flags=n.flags&-4097|2,Ye=!1,yr=n)}}else{if(Ob(n))throw Error(W(418));n.flags=n.flags&-4097|2,Ye=!1,yr=n}}}function IE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yr=n}function Cg(n){if(n!==yr)return!1;if(!Ye)return IE(n),Ye=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Nb(n.type,n.memoizedProps)),e&&(e=gr)){if(Ob(n))throw ik(),Error(W(418));for(;e;)sk(n,e),e=Oa(e.nextSibling)}if(IE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){gr=Oa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}gr=null}}else gr=yr?Oa(n.stateNode.nextSibling):null;return!0}function ik(){for(var n=gr;n;)n=Oa(n.nextSibling)}function vh(){gr=yr=null,Ye=!1}function bS(n){fs===null?fs=[n]:fs.push(n)}var MD=yo.ReactCurrentBatchConfig;function zh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function _g(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function LE(n){var e=n._init;return e(n._payload)}function ok(n){function e(g,w){if(n){var b=g.deletions;b===null?(g.deletions=[w],g.flags|=16):b.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function s(g,w){return g=Ua(g,w),g.index=0,g.sibling=null,g}function i(g,w,b){return g.index=b,n?(b=g.alternate,b!==null?(b=b.index,b<w?(g.flags|=2,w):b):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,w,b,E){return w===null||w.tag!==6?(w=Pw(b,g.mode,E),w.return=g,w):(w=s(w,b),w.return=g,w)}function c(g,w,b,E){var _=b.type;return _===uu?d(g,w,b.props.children,E,b.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_o&&LE(_)===w.type)?(E=s(w,b.props),E.ref=zh(g,w,b),E.return=g,E):(E=dy(b.type,b.key,b.props,null,g.mode,E),E.ref=zh(g,w,b),E.return=g,E)}function u(g,w,b,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Rw(b,g.mode,E),w.return=g,w):(w=s(w,b.children||[]),w.return=g,w)}function d(g,w,b,E,_){return w===null||w.tag!==7?(w=Rc(b,g.mode,E,_),w.return=g,w):(w=s(w,b),w.return=g,w)}function h(g,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Pw(""+w,g.mode,b),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mg:return b=dy(w.type,w.key,w.props,null,g.mode,b),b.ref=zh(g,null,w),b.return=g,b;case cu:return w=Rw(w,g.mode,b),w.return=g,w;case _o:var E=w._init;return h(g,E(w._payload),b)}if(Jh(w)||Fh(w))return w=Rc(w,g.mode,b,null),w.return=g,w;_g(g,w)}return null}function f(g,w,b,E){var _=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(g,w,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mg:return b.key===_?c(g,w,b,E):null;case cu:return b.key===_?u(g,w,b,E):null;case _o:return _=b._init,f(g,w,_(b._payload),E)}if(Jh(b)||Fh(b))return _!==null?null:d(g,w,b,E,null);_g(g,b)}return null}function p(g,w,b,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(b)||null,a(w,g,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case mg:return g=g.get(E.key===null?b:E.key)||null,c(w,g,E,_);case cu:return g=g.get(E.key===null?b:E.key)||null,u(w,g,E,_);case _o:var k=E._init;return p(g,w,b,k(E._payload),_)}if(Jh(E)||Fh(E))return g=g.get(b)||null,d(w,g,E,_,null);_g(w,E)}return null}function v(g,w,b,E){for(var _=null,k=null,P=w,M=w=0,D=null;P!==null&&M<b.length;M++){P.index>M?(D=P,P=null):D=P.sibling;var O=f(g,P,b[M],E);if(O===null){P===null&&(P=D);break}n&&P&&O.alternate===null&&e(g,P),w=i(O,w,M),k===null?_=O:k.sibling=O,k=O,P=D}if(M===b.length)return t(g,P),Ye&&nl(g,M),_;if(P===null){for(;M<b.length;M++)P=h(g,b[M],E),P!==null&&(w=i(P,w,M),k===null?_=P:k.sibling=P,k=P);return Ye&&nl(g,M),_}for(P=r(g,P);M<b.length;M++)D=p(P,g,M,b[M],E),D!==null&&(n&&D.alternate!==null&&P.delete(D.key===null?M:D.key),w=i(D,w,M),k===null?_=D:k.sibling=D,k=D);return n&&P.forEach(function(j){return e(g,j)}),Ye&&nl(g,M),_}function m(g,w,b,E){var _=Fh(b);if(typeof _!="function")throw Error(W(150));if(b=_.call(b),b==null)throw Error(W(151));for(var k=_=null,P=w,M=w=0,D=null,O=b.next();P!==null&&!O.done;M++,O=b.next()){P.index>M?(D=P,P=null):D=P.sibling;var j=f(g,P,O.value,E);if(j===null){P===null&&(P=D);break}n&&P&&j.alternate===null&&e(g,P),w=i(j,w,M),k===null?_=j:k.sibling=j,k=j,P=D}if(O.done)return t(g,P),Ye&&nl(g,M),_;if(P===null){for(;!O.done;M++,O=b.next())O=h(g,O.value,E),O!==null&&(w=i(O,w,M),k===null?_=O:k.sibling=O,k=O);return Ye&&nl(g,M),_}for(P=r(g,P);!O.done;M++,O=b.next())O=p(P,g,M,O.value,E),O!==null&&(n&&O.alternate!==null&&P.delete(O.key===null?M:O.key),w=i(O,w,M),k===null?_=O:k.sibling=O,k=O);return n&&P.forEach(function(U){return e(g,U)}),Ye&&nl(g,M),_}function x(g,w,b,E){if(typeof b=="object"&&b!==null&&b.type===uu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case mg:e:{for(var _=b.key,k=w;k!==null;){if(k.key===_){if(_=b.type,_===uu){if(k.tag===7){t(g,k.sibling),w=s(k,b.props.children),w.return=g,g=w;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===_o&&LE(_)===k.type){t(g,k.sibling),w=s(k,b.props),w.ref=zh(g,k,b),w.return=g,g=w;break e}t(g,k);break}else e(g,k);k=k.sibling}b.type===uu?(w=Rc(b.props.children,g.mode,E,b.key),w.return=g,g=w):(E=dy(b.type,b.key,b.props,null,g.mode,E),E.ref=zh(g,w,b),E.return=g,g=E)}return o(g);case cu:e:{for(k=b.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){t(g,w.sibling),w=s(w,b.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=Rw(b,g.mode,E),w.return=g,g=w}return o(g);case _o:return k=b._init,x(g,w,k(b._payload),E)}if(Jh(b))return v(g,w,b,E);if(Fh(b))return m(g,w,b,E);_g(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(t(g,w.sibling),w=s(w,b),w.return=g,g=w):(t(g,w),w=Pw(b,g.mode,E),w.return=g,g=w),o(g)):t(g,w)}return x}var wh=ok(!0),ak=ok(!1),dv=Ja(null),hv=null,vu=null,xS=null;function SS(){xS=vu=hv=null}function AS(n){var e=dv.current;We(dv),n._currentValue=e}function jb(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ru(n,e){hv=n,xS=vu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&($n=!0),n.firstContext=null)}function Gr(n){var e=n._currentValue;if(xS!==n)if(n={context:n,memoizedValue:e,next:null},vu===null){if(hv===null)throw Error(W(308));vu=n,hv.dependencies={lanes:0,firstContext:n}}else vu=vu.next=n;return e}var dl=null;function ES(n){dl===null?dl=[n]:dl.push(n)}function lk(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,ES(e)):(t.next=s.next,s.next=t),e.interleaved=t,uo(n,r)}function uo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var To=!1;function CS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ck(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function so(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,uo(n,t)}return s=r.interleaved,s===null?(e.next=e,ES(r)):(e.next=s.next,s.next=e),r.interleaved=e,uo(n,t)}function iy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uS(n,t)}}function DE(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function fv(n,e,t,r){var s=n.updateQueue;To=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,m=a;switch(f=e,p=t,m.tag){case 1:if(v=m.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=nt({},h,f);break e;case 2:To=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Lc|=o,n.lanes=o,n.memoizedState=h}}function OE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Jm={},si=Ja(Jm),Kf=Ja(Jm),Xf=Ja(Jm);function hl(n){if(n===Jm)throw Error(W(174));return n}function _S(n,e){switch($e(Xf,e),$e(Kf,n),$e(si,Jm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vb(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=vb(e,n)}We(si),$e(si,e)}function bh(){We(si),We(Kf),We(Xf)}function uk(n){hl(Xf.current);var e=hl(si.current),t=vb(e,n.type);e!==t&&($e(Kf,n),$e(si,t))}function TS(n){Kf.current===n&&(We(si),We(Kf))}var Ze=Ja(0);function pv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Aw=[];function kS(){for(var n=0;n<Aw.length;n++)Aw[n]._workInProgressVersionPrimary=null;Aw.length=0}var oy=yo.ReactCurrentDispatcher,Ew=yo.ReactCurrentBatchConfig,Ic=0,et=null,Tt=null,Ft=null,mv=!1,Rf=!1,qf=0,ND=0;function en(){throw Error(W(321))}function PS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ys(n[t],e[t]))return!1;return!0}function RS(n,e,t,r,s,i){if(Ic=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oy.current=n===null||n.memoizedState===null?OD:FD,n=t(r,s),Rf){i=0;do{if(Rf=!1,qf=0,25<=i)throw Error(W(301));i+=1,Ft=Tt=null,e.updateQueue=null,oy.current=jD,n=t(r,s)}while(Rf)}if(oy.current=gv,e=Tt!==null&&Tt.next!==null,Ic=0,Ft=Tt=et=null,mv=!1,e)throw Error(W(300));return n}function MS(){var n=qf!==0;return qf=0,n}function Ts(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?et.memoizedState=Ft=n:Ft=Ft.next=n,Ft}function Wr(){if(Tt===null){var n=et.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var e=Ft===null?et.memoizedState:Ft.next;if(e!==null)Ft=e,Tt=n;else{if(n===null)throw Error(W(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ft===null?et.memoizedState=Ft=n:Ft=Ft.next=n}return Ft}function Yf(n,e){return typeof e=="function"?e(n):e}function Cw(n){var e=Wr(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=Tt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((Ic&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,et.lanes|=d,Lc|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,ys(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,et.lanes|=i,Lc|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function _w(n){var e=Wr(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);ys(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function dk(){}function hk(n,e){var t=et,r=Wr(),s=e(),i=!ys(r.memoizedState,s);if(i&&(r.memoizedState=s,$n=!0),r=r.queue,NS(mk.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||Ft!==null&&Ft.memoizedState.tag&1){if(t.flags|=2048,Qf(9,pk.bind(null,t,r,s,e),void 0,null),jt===null)throw Error(W(349));Ic&30||fk(t,e,s)}return s}function fk(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function pk(n,e,t,r){e.value=t,e.getSnapshot=r,gk(e)&&yk(n)}function mk(n,e,t){return t(function(){gk(e)&&yk(n)})}function gk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ys(n,t)}catch{return!0}}function yk(n){var e=uo(n,1);e!==null&&gs(e,n,1,-1)}function FE(n){var e=Ts();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:n},e.queue=n,n=n.dispatch=DD.bind(null,et,n),[e.memoizedState,n]}function Qf(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function vk(){return Wr().memoizedState}function ay(n,e,t,r){var s=Ts();et.flags|=n,s.memoizedState=Qf(1|e,t,void 0,r===void 0?null:r)}function g0(n,e,t,r){var s=Wr();r=r===void 0?null:r;var i=void 0;if(Tt!==null){var o=Tt.memoizedState;if(i=o.destroy,r!==null&&PS(r,o.deps)){s.memoizedState=Qf(e,t,i,r);return}}et.flags|=n,s.memoizedState=Qf(1|e,t,i,r)}function jE(n,e){return ay(8390656,8,n,e)}function NS(n,e){return g0(2048,8,n,e)}function wk(n,e){return g0(4,2,n,e)}function bk(n,e){return g0(4,4,n,e)}function xk(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Sk(n,e,t){return t=t!=null?t.concat([n]):null,g0(4,4,xk.bind(null,e,n),t)}function IS(){}function Ak(n,e){var t=Wr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&PS(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function Ek(n,e){var t=Wr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&PS(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Ck(n,e,t){return Ic&21?(ys(t,e)||(t=RT(),et.lanes|=t,Lc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,$n=!0),n.memoizedState=t)}function ID(n,e){var t=Pe;Pe=t!==0&&4>t?t:4,n(!0);var r=Ew.transition;Ew.transition={};try{n(!1),e()}finally{Pe=t,Ew.transition=r}}function _k(){return Wr().memoizedState}function LD(n,e,t){var r=Ba(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Tk(n))kk(e,t);else if(t=lk(n,e,t,r),t!==null){var s=En();gs(t,n,r,s),Pk(t,e,r)}}function DD(n,e,t){var r=Ba(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Tk(n))kk(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,ys(a,o)){var c=e.interleaved;c===null?(s.next=s,ES(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=lk(n,e,s,r),t!==null&&(s=En(),gs(t,n,r,s),Pk(t,e,r))}}function Tk(n){var e=n.alternate;return n===et||e!==null&&e===et}function kk(n,e){Rf=mv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Pk(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,uS(n,t)}}var gv={readContext:Gr,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},OD={readContext:Gr,useCallback:function(n,e){return Ts().memoizedState=[n,e===void 0?null:e],n},useContext:Gr,useEffect:jE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ay(4194308,4,xk.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ay(4194308,4,n,e)},useInsertionEffect:function(n,e){return ay(4,2,n,e)},useMemo:function(n,e){var t=Ts();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ts();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=LD.bind(null,et,n),[r.memoizedState,n]},useRef:function(n){var e=Ts();return n={current:n},e.memoizedState=n},useState:FE,useDebugValue:IS,useDeferredValue:function(n){return Ts().memoizedState=n},useTransition:function(){var n=FE(!1),e=n[0];return n=ID.bind(null,n[1]),Ts().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=et,s=Ts();if(Ye){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),jt===null)throw Error(W(349));Ic&30||fk(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,jE(mk.bind(null,r,i,n),[n]),r.flags|=2048,Qf(9,pk.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Ts(),e=jt.identifierPrefix;if(Ye){var t=ro,r=no;t=(r&~(1<<32-ms(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=qf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ND++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},FD={readContext:Gr,useCallback:Ak,useContext:Gr,useEffect:NS,useImperativeHandle:Sk,useInsertionEffect:wk,useLayoutEffect:bk,useMemo:Ek,useReducer:Cw,useRef:vk,useState:function(){return Cw(Yf)},useDebugValue:IS,useDeferredValue:function(n){var e=Wr();return Ck(e,Tt.memoizedState,n)},useTransition:function(){var n=Cw(Yf)[0],e=Wr().memoizedState;return[n,e]},useMutableSource:dk,useSyncExternalStore:hk,useId:_k,unstable_isNewReconciler:!1},jD={readContext:Gr,useCallback:Ak,useContext:Gr,useEffect:NS,useImperativeHandle:Sk,useInsertionEffect:wk,useLayoutEffect:bk,useMemo:Ek,useReducer:_w,useRef:vk,useState:function(){return _w(Yf)},useDebugValue:IS,useDeferredValue:function(n){var e=Wr();return Tt===null?e.memoizedState=n:Ck(e,Tt.memoizedState,n)},useTransition:function(){var n=_w(Yf)[0],e=Wr().memoizedState;return[n,e]},useMutableSource:dk,useSyncExternalStore:hk,useId:_k,unstable_isNewReconciler:!1};function Qr(n,e){if(n&&n.defaultProps){e=nt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Bb(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:nt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var y0={isMounted:function(n){return(n=n._reactInternals)?$c(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=En(),s=Ba(n),i=so(r,s);i.payload=e,t!=null&&(i.callback=t),e=Fa(n,i,s),e!==null&&(gs(e,n,s,r),iy(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=En(),s=Ba(n),i=so(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Fa(n,i,s),e!==null&&(gs(e,n,s,r),iy(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=En(),r=Ba(n),s=so(t,r);s.tag=2,e!=null&&(s.callback=e),e=Fa(n,s,r),e!==null&&(gs(e,n,r,t),iy(e,n,r))}};function BE(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Hf(t,r)||!Hf(s,i):!0}function Rk(n,e,t){var r=!1,s=za,i=e.contextType;return typeof i=="object"&&i!==null?i=Gr(i):(s=Hn(e)?Mc:hn.current,r=e.contextTypes,i=(r=r!=null)?yh(n,s):za),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function UE(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&y0.enqueueReplaceState(e,e.state,null)}function Ub(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},CS(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gr(i):(i=Hn(e)?Mc:hn.current,s.context=yh(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bb(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&y0.enqueueReplaceState(s,s.state,null),fv(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function xh(n,e){try{var t="",r=e;do t+=hL(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function Tw(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $b(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var BD=typeof WeakMap=="function"?WeakMap:Map;function Mk(n,e,t){t=so(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){vv||(vv=!0,Qb=r),$b(n,e)},t}function Nk(n,e,t){t=so(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){$b(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){$b(n,e),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function $E(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new BD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=ZD.bind(null,n,e,t),e.then(n,n))}function zE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function HE(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=so(-1,1),e.tag=2,Fa(t,e,1))),t.lanes|=1),n)}var UD=yo.ReactCurrentOwner,$n=!1;function xn(n,e,t,r){e.child=n===null?ak(e,null,t,r):wh(e,n.child,t,r)}function VE(n,e,t,r,s){t=t.render;var i=e.ref;return Ru(e,s),r=RS(n,e,t,r,i,s),t=MS(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ho(n,e,s)):(Ye&&t&&vS(e),e.flags|=1,xn(n,e,r,s),e.child)}function GE(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!$S(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Ik(n,e,i,r,s)):(n=dy(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Hf,t(o,r)&&n.ref===e.ref)return ho(n,e,s)}return e.flags|=1,n=Ua(i,r),n.ref=e.ref,n.return=e,e.child=n}function Ik(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Hf(i,r)&&n.ref===e.ref)if($n=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&($n=!0);else return e.lanes=n.lanes,ho(n,e,s)}return zb(n,e,t,r,s)}function Lk(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(bu,hr),hr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,$e(bu,hr),hr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,$e(bu,hr),hr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,$e(bu,hr),hr|=r;return xn(n,e,s,t),e.child}function Dk(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function zb(n,e,t,r,s){var i=Hn(t)?Mc:hn.current;return i=yh(e,i),Ru(e,s),t=RS(n,e,t,r,i,s),r=MS(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ho(n,e,s)):(Ye&&r&&vS(e),e.flags|=1,xn(n,e,t,s),e.child)}function WE(n,e,t,r,s){if(Hn(t)){var i=!0;lv(e)}else i=!1;if(Ru(e,s),e.stateNode===null)ly(n,e),Rk(e,t,r),Ub(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Gr(u):(u=Hn(t)?Mc:hn.current,u=yh(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&UE(e,o,r,u),To=!1;var f=e.memoizedState;o.state=f,fv(e,r,o,s),c=e.memoizedState,a!==r||f!==c||zn.current||To?(typeof d=="function"&&(Bb(e,t,d,r),c=e.memoizedState),(a=To||BE(e,t,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ck(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Qr(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Gr(c):(c=Hn(t)?Mc:hn.current,c=yh(e,c));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&UE(e,o,r,c),To=!1,f=e.memoizedState,o.state=f,fv(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||zn.current||To?(typeof p=="function"&&(Bb(e,t,p,r),v=e.memoizedState),(u=To||BE(e,t,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return Hb(n,e,t,r,i,s)}function Hb(n,e,t,r,s,i){Dk(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ME(e,t,!1),ho(n,e,i);r=e.stateNode,UD.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=wh(e,n.child,null,i),e.child=wh(e,null,a,i)):xn(n,e,a,i),e.memoizedState=r.state,s&&ME(e,t,!0),e.child}function Ok(n){var e=n.stateNode;e.pendingContext?RE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&RE(n,e.context,!1),_S(n,e.containerInfo)}function KE(n,e,t,r,s){return vh(),bS(s),e.flags|=256,xn(n,e,t,r),e.child}var Vb={dehydrated:null,treeContext:null,retryLane:0};function Gb(n){return{baseLanes:n,cachePool:null,transitions:null}}function Fk(n,e,t){var r=e.pendingProps,s=Ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),$e(Ze,s&1),n===null)return Fb(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=b0(o,r,0,null),n=Rc(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Gb(t),e.memoizedState=Vb,n):LS(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $D(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ua(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ua(a,i):(i=Rc(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?Gb(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=Vb,r}return i=n.child,n=i.sibling,r=Ua(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function LS(n,e){return e=b0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Tg(n,e,t,r){return r!==null&&bS(r),wh(e,n.child,null,t),n=LS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function $D(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=Tw(Error(W(422))),Tg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=b0({mode:"visible",children:r.children},s,0,null),i=Rc(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wh(e,n.child,null,o),e.child.memoizedState=Gb(o),e.memoizedState=Vb,i);if(!(e.mode&1))return Tg(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=Tw(i,r,void 0),Tg(n,e,o,r)}if(a=(o&n.childLanes)!==0,$n||a){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,uo(n,s),gs(r,n,s,-1))}return US(),r=Tw(Error(W(421))),Tg(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=eO.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,gr=Oa(s.nextSibling),yr=e,Ye=!0,fs=null,n!==null&&(jr[Br++]=no,jr[Br++]=ro,jr[Br++]=Nc,no=n.id,ro=n.overflow,Nc=e),e=LS(e,r.children),e.flags|=4096,e)}function XE(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),jb(n.return,e,t)}function kw(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function jk(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xn(n,e,r.children,t),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&XE(n,t,e);else if(n.tag===19)XE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if($e(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&pv(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),kw(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&pv(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}kw(e,!0,t,null,i);break;case"together":kw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ly(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ho(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Lc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=Ua(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ua(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function zD(n,e,t){switch(e.tag){case 3:Ok(e),vh();break;case 5:uk(e);break;case 1:Hn(e.type)&&lv(e);break;case 4:_S(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(dv,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ze,Ze.current&1),e.flags|=128,null):t&e.child.childLanes?Fk(n,e,t):($e(Ze,Ze.current&1),n=ho(n,e,t),n!==null?n.sibling:null);$e(Ze,Ze.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return jk(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,Lk(n,e,t)}return ho(n,e,t)}var Bk,Wb,Uk,$k;Bk=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Wb=function(){};Uk=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,hl(si.current);var i=null;switch(t){case"input":s=pb(n,s),r=pb(n,r),i=[];break;case"select":s=nt({},s,{value:void 0}),r=nt({},r,{value:void 0}),i=[];break;case"textarea":s=yb(n,s),r=yb(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=ov)}wb(t,r);var o;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Of.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Of.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ve("scroll",n),i||a===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};$k=function(n,e,t,r){t!==r&&(e.flags|=4)};function Hh(n,e){if(!Ye)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function tn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function HD(n,e,t){var r=e.pendingProps;switch(wS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return Hn(e.type)&&av(),tn(e),null;case 3:return r=e.stateNode,bh(),We(zn),We(hn),kS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Cg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(ex(fs),fs=null))),Wb(n,e),tn(e),null;case 5:TS(e);var s=hl(Xf.current);if(t=e.type,n!==null&&e.stateNode!=null)Uk(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return tn(e),null}if(n=hl(si.current),Cg(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[ei]=e,r[Wf]=i,n=(e.mode&1)!==0,t){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<ef.length;s++)Ve(ef[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":rE(r,i),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",r);break;case"textarea":iE(r,i),Ve("invalid",r)}wb(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Eg(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Eg(r.textContent,a,n),s=["children",""+a]):Of.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(t){case"input":gg(r),sE(r,i,!0);break;case"textarea":gg(r),oE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ov)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ei]=e,n[Wf]=r,Bk(n,e,!1,!1),e.stateNode=n;e:{switch(o=bb(t,r),t){case"dialog":Ve("cancel",n),Ve("close",n),s=r;break;case"iframe":case"object":case"embed":Ve("load",n),s=r;break;case"video":case"audio":for(s=0;s<ef.length;s++)Ve(ef[s],n);s=r;break;case"source":Ve("error",n),s=r;break;case"img":case"image":case"link":Ve("error",n),Ve("load",n),s=r;break;case"details":Ve("toggle",n),s=r;break;case"input":rE(n,r),s=pb(n,r),Ve("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=nt({},r,{value:void 0}),Ve("invalid",n);break;case"textarea":iE(n,r),s=yb(n,r),Ve("invalid",n);break;default:s=r}wb(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?vT(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gT(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Ff(n,c):typeof c=="number"&&Ff(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Of.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",n):c!=null&&sS(n,i,c,o))}switch(t){case"input":gg(n),sE(n,r,!1);break;case"textarea":gg(n),oE(n);break;case"option":r.value!=null&&n.setAttribute("value",""+$a(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?_u(n,!!r.multiple,i,!1):r.defaultValue!=null&&_u(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=ov)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(n&&e.stateNode!=null)$k(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=hl(Xf.current),hl(si.current),Cg(e)){if(r=e.stateNode,t=e.memoizedProps,r[ei]=e,(i=r.nodeValue!==t)&&(n=yr,n!==null))switch(n.tag){case 3:Eg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Eg(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ei]=e,e.stateNode=r}return tn(e),null;case 13:if(We(Ze),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&gr!==null&&e.mode&1&&!(e.flags&128))ik(),vh(),e.flags|=98560,i=!1;else if(i=Cg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[ei]=e}else vh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),i=!1}else fs!==null&&(ex(fs),fs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ze.current&1?kt===0&&(kt=3):US())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return bh(),Wb(n,e),n===null&&Vf(e.stateNode.containerInfo),tn(e),null;case 10:return AS(e.type._context),tn(e),null;case 17:return Hn(e.type)&&av(),tn(e),null;case 19:if(We(Ze),i=e.memoizedState,i===null)return tn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Hh(i,!1);else{if(kt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=pv(n),o!==null){for(e.flags|=128,Hh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return $e(Ze,Ze.current&1|2),e.child}n=n.sibling}i.tail!==null&&gt()>Sh&&(e.flags|=128,r=!0,Hh(i,!1),e.lanes=4194304)}else{if(!r)if(n=pv(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Hh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ye)return tn(e),null}else 2*gt()-i.renderingStartTime>Sh&&t!==1073741824&&(e.flags|=128,r=!0,Hh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=gt(),e.sibling=null,t=Ze.current,$e(Ze,r?t&1|2:t&1),e):(tn(e),null);case 22:case 23:return BS(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hr&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function VD(n,e){switch(wS(e),e.tag){case 1:return Hn(e.type)&&av(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bh(),We(zn),We(hn),kS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return TS(e),null;case 13:if(We(Ze),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));vh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return We(Ze),null;case 4:return bh(),null;case 10:return AS(e.type._context),null;case 22:case 23:return BS(),null;case 24:return null;default:return null}}var kg=!1,dn=!1,GD=typeof WeakSet=="function"?WeakSet:Set,Z=null;function wu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ht(n,e,r)}else t.current=null}function Kb(n,e,t){try{t()}catch(r){ht(n,e,r)}}var qE=!1;function WD(n,e){if(Rb=rv,n=WT(),yS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var p;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break t;if(f===t&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(Mb={focusedElem:n,selectionRange:t},rv=!1,Z=e;Z!==null;)if(e=Z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Z=n;else for(;Z!==null;){e=Z;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,x=v.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Qr(e.type,m),x);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(E){ht(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}return v=qE,qE=!1,v}function Mf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kb(e,t,i)}s=s.next}while(s!==r)}}function v0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Xb(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function zk(n){var e=n.alternate;e!==null&&(n.alternate=null,zk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ei],delete e[Wf],delete e[Lb],delete e[kD],delete e[PD])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hk(n){return n.tag===5||n.tag===3||n.tag===4}function YE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qb(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ov));else if(r!==4&&(n=n.child,n!==null))for(qb(n,e,t),n=n.sibling;n!==null;)qb(n,e,t),n=n.sibling}function Yb(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Yb(n,e,t),n=n.sibling;n!==null;)Yb(n,e,t),n=n.sibling}var Wt=null,hs=!1;function wo(n,e,t){for(t=t.child;t!==null;)Vk(n,e,t),t=t.sibling}function Vk(n,e,t){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(u0,t)}catch{}switch(t.tag){case 5:dn||wu(t,e);case 6:var r=Wt,s=hs;Wt=null,wo(n,e,t),Wt=r,hs=s,Wt!==null&&(hs?(n=Wt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Wt.removeChild(t.stateNode));break;case 18:Wt!==null&&(hs?(n=Wt,t=t.stateNode,n.nodeType===8?xw(n.parentNode,t):n.nodeType===1&&xw(n,t),$f(n)):xw(Wt,t.stateNode));break;case 4:r=Wt,s=hs,Wt=t.stateNode.containerInfo,hs=!0,wo(n,e,t),Wt=r,hs=s;break;case 0:case 11:case 14:case 15:if(!dn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kb(t,e,o),s=s.next}while(s!==r)}wo(n,e,t);break;case 1:if(!dn&&(wu(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ht(t,e,a)}wo(n,e,t);break;case 21:wo(n,e,t);break;case 22:t.mode&1?(dn=(r=dn)||t.memoizedState!==null,wo(n,e,t),dn=r):wo(n,e,t);break;default:wo(n,e,t)}}function QE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new GD),e.forEach(function(r){var s=tO.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Xr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,hs=!1;break e;case 3:Wt=a.stateNode.containerInfo,hs=!0;break e;case 4:Wt=a.stateNode.containerInfo,hs=!0;break e}a=a.return}if(Wt===null)throw Error(W(160));Vk(i,o,s),Wt=null,hs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ht(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gk(e,n),e=e.sibling}function Gk(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Xr(e,n),Ss(n),r&4){try{Mf(3,n,n.return),v0(3,n)}catch(m){ht(n,n.return,m)}try{Mf(5,n,n.return)}catch(m){ht(n,n.return,m)}}break;case 1:Xr(e,n),Ss(n),r&512&&t!==null&&wu(t,t.return);break;case 5:if(Xr(e,n),Ss(n),r&512&&t!==null&&wu(t,t.return),n.flags&32){var s=n.stateNode;try{Ff(s,"")}catch(m){ht(n,n.return,m)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&fT(s,i),bb(a,o);var u=bb(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?vT(s,h):d==="dangerouslySetInnerHTML"?gT(s,h):d==="children"?Ff(s,h):sS(s,d,h,u)}switch(a){case"input":mb(s,i);break;case"textarea":pT(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?_u(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?_u(s,!!i.multiple,i.defaultValue,!0):_u(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wf]=i}catch(m){ht(n,n.return,m)}}break;case 6:if(Xr(e,n),Ss(n),r&4){if(n.stateNode===null)throw Error(W(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(m){ht(n,n.return,m)}}break;case 3:if(Xr(e,n),Ss(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{$f(e.containerInfo)}catch(m){ht(n,n.return,m)}break;case 4:Xr(e,n),Ss(n);break;case 13:Xr(e,n),Ss(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(FS=gt())),r&4&&QE(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(dn=(u=dn)||d,Xr(e,n),dn=u):Xr(e,n),Ss(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Z=n,d=n.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,p=f.child,f.tag){case 0:case 11:case 14:case 15:Mf(4,f,f.return);break;case 1:wu(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){ht(r,t,m)}}break;case 5:wu(f,f.return);break;case 22:if(f.memoizedState!==null){ZE(h);continue}}p!==null?(p.return=f,Z=p):ZE(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=yT("display",o))}catch(m){ht(n,n.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){ht(n,n.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xr(e,n),Ss(n),r&4&&QE(n);break;case 21:break;default:Xr(e,n),Ss(n)}}function Ss(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Hk(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ff(s,""),r.flags&=-33);var i=YE(n);Yb(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=YE(n);qb(n,a,o);break;default:throw Error(W(161))}}catch(c){ht(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function KD(n,e,t){Z=n,Wk(n)}function Wk(n,e,t){for(var r=(n.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||kg;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||dn;a=kg;var u=dn;if(kg=o,(dn=c)&&!u)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?eC(s):c!==null?(c.return=o,Z=c):eC(s);for(;i!==null;)Z=i,Wk(i),i=i.sibling;Z=s,kg=a,dn=u}JE(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):JE(n)}}function JE(n){for(;Z!==null;){var e=Z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||v0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Qr(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&OE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}OE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&$f(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}dn||e.flags&512&&Xb(e)}catch(f){ht(e,e.return,f)}}if(e===n){Z=null;break}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}}function ZE(n){for(;Z!==null;){var e=Z;if(e===n){Z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Z=t;break}Z=e.return}}function eC(n){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{v0(4,e)}catch(c){ht(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ht(e,s,c)}}var i=e.return;try{Xb(e)}catch(c){ht(e,i,c)}break;case 5:var o=e.return;try{Xb(e)}catch(c){ht(e,o,c)}}}catch(c){ht(e,e.return,c)}if(e===n){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var XD=Math.ceil,yv=yo.ReactCurrentDispatcher,DS=yo.ReactCurrentOwner,zr=yo.ReactCurrentBatchConfig,be=0,jt=null,bt=null,Yt=0,hr=0,bu=Ja(0),kt=0,Jf=null,Lc=0,w0=0,OS=0,Nf=null,Un=null,FS=0,Sh=1/0,yi=null,vv=!1,Qb=null,ja=null,Pg=!1,Ma=null,wv=0,If=0,Jb=null,cy=-1,uy=0;function En(){return be&6?gt():cy!==-1?cy:cy=gt()}function Ba(n){return n.mode&1?be&2&&Yt!==0?Yt&-Yt:MD.transition!==null?(uy===0&&(uy=RT()),uy):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:FT(n.type)),n):1}function gs(n,e,t,r){if(50<If)throw If=0,Jb=null,Error(W(185));qm(n,t,r),(!(be&2)||n!==jt)&&(n===jt&&(!(be&2)&&(w0|=t),kt===4&&Po(n,Yt)),Vn(n,r),t===1&&be===0&&!(e.mode&1)&&(Sh=gt()+500,m0&&Za()))}function Vn(n,e){var t=n.callbackNode;ML(n,e);var r=nv(n,n===jt?Yt:0);if(r===0)t!==null&&cE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&cE(t),e===1)n.tag===0?RD(tC.bind(null,n)):nk(tC.bind(null,n)),_D(function(){!(be&6)&&Za()}),t=null;else{switch(MT(r)){case 1:t=cS;break;case 4:t=kT;break;case 16:t=tv;break;case 536870912:t=PT;break;default:t=tv}t=eP(t,Kk.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Kk(n,e){if(cy=-1,uy=0,be&6)throw Error(W(327));var t=n.callbackNode;if(Mu()&&n.callbackNode!==t)return null;var r=nv(n,n===jt?Yt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=bv(n,r);else{e=r;var s=be;be|=2;var i=qk();(jt!==n||Yt!==e)&&(yi=null,Sh=gt()+500,Pc(n,e));do try{QD();break}catch(a){Xk(n,a)}while(!0);SS(),yv.current=i,be=s,bt!==null?e=0:(jt=null,Yt=0,e=kt)}if(e!==0){if(e===2&&(s=Cb(n),s!==0&&(r=s,e=Zb(n,s))),e===1)throw t=Jf,Pc(n,0),Po(n,r),Vn(n,gt()),t;if(e===6)Po(n,r);else{if(s=n.current.alternate,!(r&30)&&!qD(s)&&(e=bv(n,r),e===2&&(i=Cb(n),i!==0&&(r=i,e=Zb(n,i))),e===1))throw t=Jf,Pc(n,0),Po(n,r),Vn(n,gt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:rl(n,Un,yi);break;case 3:if(Po(n,r),(r&130023424)===r&&(e=FS+500-gt(),10<e)){if(nv(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){En(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Ib(rl.bind(null,n,Un,yi),e);break}rl(n,Un,yi);break;case 4:if(Po(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-ms(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XD(r/1960))-r,10<r){n.timeoutHandle=Ib(rl.bind(null,n,Un,yi),r);break}rl(n,Un,yi);break;case 5:rl(n,Un,yi);break;default:throw Error(W(329))}}}return Vn(n,gt()),n.callbackNode===t?Kk.bind(null,n):null}function Zb(n,e){var t=Nf;return n.current.memoizedState.isDehydrated&&(Pc(n,e).flags|=256),n=bv(n,e),n!==2&&(e=Un,Un=t,e!==null&&ex(e)),n}function ex(n){Un===null?Un=n:Un.push.apply(Un,n)}function qD(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!ys(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Po(n,e){for(e&=~OS,e&=~w0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ms(e),r=1<<t;n[t]=-1,e&=~r}}function tC(n){if(be&6)throw Error(W(327));Mu();var e=nv(n,0);if(!(e&1))return Vn(n,gt()),null;var t=bv(n,e);if(n.tag!==0&&t===2){var r=Cb(n);r!==0&&(e=r,t=Zb(n,r))}if(t===1)throw t=Jf,Pc(n,0),Po(n,e),Vn(n,gt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,rl(n,Un,yi),Vn(n,gt()),null}function jS(n,e){var t=be;be|=1;try{return n(e)}finally{be=t,be===0&&(Sh=gt()+500,m0&&Za())}}function Dc(n){Ma!==null&&Ma.tag===0&&!(be&6)&&Mu();var e=be;be|=1;var t=zr.transition,r=Pe;try{if(zr.transition=null,Pe=1,n)return n()}finally{Pe=r,zr.transition=t,be=e,!(be&6)&&Za()}}function BS(){hr=bu.current,We(bu)}function Pc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,CD(t)),bt!==null)for(t=bt.return;t!==null;){var r=t;switch(wS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&av();break;case 3:bh(),We(zn),We(hn),kS();break;case 5:TS(r);break;case 4:bh();break;case 13:We(Ze);break;case 19:We(Ze);break;case 10:AS(r.type._context);break;case 22:case 23:BS()}t=t.return}if(jt=n,bt=n=Ua(n.current,null),Yt=hr=e,kt=0,Jf=null,OS=w0=Lc=0,Un=Nf=null,dl!==null){for(e=0;e<dl.length;e++)if(t=dl[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}dl=null}return n}function Xk(n,e){do{var t=bt;try{if(SS(),oy.current=gv,mv){for(var r=et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mv=!1}if(Ic=0,Ft=Tt=et=null,Rf=!1,qf=0,DS.current=null,t===null||t.return===null){kt=1,Jf=e,bt=null;break}e:{var i=n,o=t.return,a=t,c=e;if(e=Yt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=zE(o);if(p!==null){p.flags&=-257,HE(p,o,a,i,e),p.mode&1&&$E(i,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(c),e.updateQueue=m}else v.add(c);break e}else{if(!(e&1)){$E(i,u,e),US();break e}c=Error(W(426))}}else if(Ye&&a.mode&1){var x=zE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),HE(x,o,a,i,e),bS(xh(c,a));break e}}i=c=xh(c,a),kt!==4&&(kt=2),Nf===null?Nf=[i]:Nf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Mk(i,c,e);DE(i,g);break e;case 1:a=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ja===null||!ja.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Nk(i,a,e);DE(i,E);break e}}i=i.return}while(i!==null)}Qk(t)}catch(_){e=_,bt===t&&t!==null&&(bt=t=t.return);continue}break}while(!0)}function qk(){var n=yv.current;return yv.current=gv,n===null?gv:n}function US(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!(Lc&268435455)&&!(w0&268435455)||Po(jt,Yt)}function bv(n,e){var t=be;be|=2;var r=qk();(jt!==n||Yt!==e)&&(yi=null,Pc(n,e));do try{YD();break}catch(s){Xk(n,s)}while(!0);if(SS(),be=t,yv.current=r,bt!==null)throw Error(W(261));return jt=null,Yt=0,kt}function YD(){for(;bt!==null;)Yk(bt)}function QD(){for(;bt!==null&&!SL();)Yk(bt)}function Yk(n){var e=Zk(n.alternate,n,hr);n.memoizedProps=n.pendingProps,e===null?Qk(n):bt=e,DS.current=null}function Qk(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=VD(t,e),t!==null){t.flags&=32767,bt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,bt=null;return}}else if(t=HD(t,e,hr),t!==null){bt=t;return}if(e=e.sibling,e!==null){bt=e;return}bt=e=n}while(e!==null);kt===0&&(kt=5)}function rl(n,e,t){var r=Pe,s=zr.transition;try{zr.transition=null,Pe=1,JD(n,e,t,r)}finally{zr.transition=s,Pe=r}return null}function JD(n,e,t,r){do Mu();while(Ma!==null);if(be&6)throw Error(W(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(NL(n,i),n===jt&&(bt=jt=null,Yt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Pg||(Pg=!0,eP(tv,function(){return Mu(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=zr.transition,zr.transition=null;var o=Pe;Pe=1;var a=be;be|=4,DS.current=null,WD(n,t),Gk(t,n),vD(Mb),rv=!!Rb,Mb=Rb=null,n.current=t,KD(t),AL(),be=a,Pe=o,zr.transition=i}else n.current=t;if(Pg&&(Pg=!1,Ma=n,wv=s),i=n.pendingLanes,i===0&&(ja=null),_L(t.stateNode),Vn(n,gt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(vv)throw vv=!1,n=Qb,Qb=null,n;return wv&1&&n.tag!==0&&Mu(),i=n.pendingLanes,i&1?n===Jb?If++:(If=0,Jb=n):If=0,Za(),null}function Mu(){if(Ma!==null){var n=MT(wv),e=zr.transition,t=Pe;try{if(zr.transition=null,Pe=16>n?16:n,Ma===null)var r=!1;else{if(n=Ma,Ma=null,wv=0,be&6)throw Error(W(331));var s=be;for(be|=4,Z=n.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Mf(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,p=d.return;if(zk(d),d===u){Z=null;break}if(f!==null){f.return=p,Z=f;break}Z=p}}}var v=i.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mf(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Z=g;break e}Z=i.return}}var w=n.current;for(Z=w;Z!==null;){o=Z;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Z=b;else e:for(o=w;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:v0(9,a)}}catch(_){ht(a,a.return,_)}if(a===o){Z=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Z=E;break e}Z=a.return}}if(be=s,Za(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(u0,n)}catch{}r=!0}return r}finally{Pe=t,zr.transition=e}}return!1}function nC(n,e,t){e=xh(t,e),e=Mk(n,e,1),n=Fa(n,e,1),e=En(),n!==null&&(qm(n,1,e),Vn(n,e))}function ht(n,e,t){if(n.tag===3)nC(n,n,t);else for(;e!==null;){if(e.tag===3){nC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){n=xh(t,n),n=Nk(e,n,1),e=Fa(e,n,1),n=En(),e!==null&&(qm(e,1,n),Vn(e,n));break}}e=e.return}}function ZD(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=En(),n.pingedLanes|=n.suspendedLanes&t,jt===n&&(Yt&t)===t&&(kt===4||kt===3&&(Yt&130023424)===Yt&&500>gt()-FS?Pc(n,0):OS|=t),Vn(n,e)}function Jk(n,e){e===0&&(n.mode&1?(e=wg,wg<<=1,!(wg&130023424)&&(wg=4194304)):e=1);var t=En();n=uo(n,e),n!==null&&(qm(n,e,t),Vn(n,t))}function eO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Jk(n,t)}function tO(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Jk(n,t)}var Zk;Zk=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||zn.current)$n=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return $n=!1,zD(n,e,t);$n=!!(n.flags&131072)}else $n=!1,Ye&&e.flags&1048576&&rk(e,uv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ly(n,e),n=e.pendingProps;var s=yh(e,hn.current);Ru(e,t),s=RS(null,e,r,n,s,t);var i=MS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(r)?(i=!0,lv(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,CS(e),s.updater=y0,e.stateNode=s,s._reactInternals=e,Ub(e,r,n,t),e=Hb(null,e,r,!0,i,t)):(e.tag=0,Ye&&i&&vS(e),xn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ly(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rO(r),n=Qr(r,n),s){case 0:e=zb(null,e,r,n,t);break e;case 1:e=WE(null,e,r,n,t);break e;case 11:e=VE(null,e,r,n,t);break e;case 14:e=GE(null,e,r,Qr(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qr(r,s),zb(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qr(r,s),WE(n,e,r,s,t);case 3:e:{if(Ok(e),n===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ck(n,e),fv(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xh(Error(W(423)),e),e=KE(n,e,r,t,s);break e}else if(r!==s){s=xh(Error(W(424)),e),e=KE(n,e,r,t,s);break e}else for(gr=Oa(e.stateNode.containerInfo.firstChild),yr=e,Ye=!0,fs=null,t=ak(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(vh(),r===s){e=ho(n,e,t);break e}xn(n,e,r,t)}e=e.child}return e;case 5:return uk(e),n===null&&Fb(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,Nb(r,s)?o=null:i!==null&&Nb(r,i)&&(e.flags|=32),Dk(n,e),xn(n,e,o,t),e.child;case 6:return n===null&&Fb(e),null;case 13:return Fk(n,e,t);case 4:return _S(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=wh(e,null,r,t):xn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qr(r,s),VE(n,e,r,s,t);case 7:return xn(n,e,e.pendingProps,t),e.child;case 8:return xn(n,e,e.pendingProps.children,t),e.child;case 12:return xn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(dv,r._currentValue),r._currentValue=o,i!==null)if(ys(i.value,o)){if(i.children===s.children&&!zn.current){e=ho(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=so(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),jb(i.return,t,e),a.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),jb(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ru(e,t),s=Gr(s),r=r(s),e.flags|=1,xn(n,e,r,t),e.child;case 14:return r=e.type,s=Qr(r,e.pendingProps),s=Qr(r.type,s),GE(n,e,r,s,t);case 15:return Ik(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qr(r,s),ly(n,e),e.tag=1,Hn(r)?(n=!0,lv(e)):n=!1,Ru(e,t),Rk(e,r,s),Ub(e,r,s,t),Hb(null,e,r,!0,n,t);case 19:return jk(n,e,t);case 22:return Lk(n,e,t)}throw Error(W(156,e.tag))};function eP(n,e){return TT(n,e)}function nO(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,e,t,r){return new nO(n,e,t,r)}function $S(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rO(n){if(typeof n=="function")return $S(n)?1:0;if(n!=null){if(n=n.$$typeof,n===oS)return 11;if(n===aS)return 14}return 2}function Ua(n,e){var t=n.alternate;return t===null?(t=$r(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function dy(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")$S(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case uu:return Rc(t.children,s,i,e);case iS:o=8,s|=8;break;case ub:return n=$r(12,t,e,s|2),n.elementType=ub,n.lanes=i,n;case db:return n=$r(13,t,e,s),n.elementType=db,n.lanes=i,n;case hb:return n=$r(19,t,e,s),n.elementType=hb,n.lanes=i,n;case uT:return b0(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case lT:o=10;break e;case cT:o=9;break e;case oS:o=11;break e;case aS:o=14;break e;case _o:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=$r(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Rc(n,e,t,r){return n=$r(7,n,r,e),n.lanes=t,n}function b0(n,e,t,r){return n=$r(22,n,r,e),n.elementType=uT,n.lanes=t,n.stateNode={isHidden:!1},n}function Pw(n,e,t){return n=$r(6,n,null,e),n.lanes=t,n}function Rw(n,e,t){return e=$r(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function sO(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uw(0),this.expirationTimes=uw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uw(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zS(n,e,t,r,s,i,o,a,c){return n=new sO(n,e,t,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$r(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},CS(i),n}function iO(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function tP(n){if(!n)return za;n=n._reactInternals;e:{if($c(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(Hn(t))return tk(n,t,e)}return e}function nP(n,e,t,r,s,i,o,a,c){return n=zS(t,r,!0,n,s,i,o,a,c),n.context=tP(null),t=n.current,r=En(),s=Ba(t),i=so(r,s),i.callback=e??null,Fa(t,i,s),n.current.lanes=s,qm(n,s,r),Vn(n,r),n}function x0(n,e,t,r){var s=e.current,i=En(),o=Ba(s);return t=tP(t),e.context===null?e.context=t:e.pendingContext=t,e=so(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Fa(s,e,o),n!==null&&(gs(n,s,o,i),iy(n,s,o)),o}function xv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function rC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function HS(n,e){rC(n,e),(n=n.alternate)&&rC(n,e)}function oO(){return null}var rP=typeof reportError=="function"?reportError:function(n){console.error(n)};function VS(n){this._internalRoot=n}S0.prototype.render=VS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));x0(n,e,null,null)};S0.prototype.unmount=VS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Dc(function(){x0(null,n,null,null)}),e[co]=null}};function S0(n){this._internalRoot=n}S0.prototype.unstable_scheduleHydration=function(n){if(n){var e=LT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ko.length&&e!==0&&e<ko[t].priority;t++);ko.splice(t,0,n),t===0&&OT(n)}};function GS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function A0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function sC(){}function aO(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=xv(o);i.call(u)}}var o=nP(e,r,n,0,null,!1,!1,"",sC);return n._reactRootContainer=o,n[co]=o.current,Vf(n.nodeType===8?n.parentNode:n),Dc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=xv(c);a.call(u)}}var c=zS(n,0,!1,null,null,!1,!1,"",sC);return n._reactRootContainer=c,n[co]=c.current,Vf(n.nodeType===8?n.parentNode:n),Dc(function(){x0(e,c,t,r)}),c}function E0(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=xv(o);a.call(c)}}x0(e,o,n,s)}else o=aO(t,e,n,s,r);return xv(o)}NT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Zh(e.pendingLanes);t!==0&&(uS(e,t|1),Vn(e,gt()),!(be&6)&&(Sh=gt()+500,Za()))}break;case 13:Dc(function(){var r=uo(n,1);if(r!==null){var s=En();gs(r,n,1,s)}}),HS(n,1)}};dS=function(n){if(n.tag===13){var e=uo(n,134217728);if(e!==null){var t=En();gs(e,n,134217728,t)}HS(n,134217728)}};IT=function(n){if(n.tag===13){var e=Ba(n),t=uo(n,e);if(t!==null){var r=En();gs(t,n,e,r)}HS(n,e)}};LT=function(){return Pe};DT=function(n,e){var t=Pe;try{return Pe=n,e()}finally{Pe=t}};Sb=function(n,e,t){switch(e){case"input":if(mb(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=p0(r);if(!s)throw Error(W(90));hT(r),mb(r,s)}}}break;case"textarea":pT(n,t);break;case"select":e=t.value,e!=null&&_u(n,!!t.multiple,e,!1)}};xT=jS;ST=Dc;var lO={usingClientEntryPoint:!1,Events:[Qm,pu,p0,wT,bT,jS]},Vh={findFiberByHostInstance:ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cO={bundleType:Vh.bundleType,version:Vh.version,rendererPackageName:Vh.rendererPackageName,rendererConfig:Vh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=CT(n),n===null?null:n.stateNode},findFiberByHostInstance:Vh.findFiberByHostInstance||oO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{u0=Rg.inject(cO),ri=Rg}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lO;xr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GS(e))throw Error(W(200));return iO(n,e,null,t)};xr.createRoot=function(n,e){if(!GS(n))throw Error(W(299));var t=!1,r="",s=rP;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zS(n,1,!1,null,null,t,!1,r,s),n[co]=e.current,Vf(n.nodeType===8?n.parentNode:n),new VS(e)};xr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=CT(e),n=n===null?null:n.stateNode,n};xr.flushSync=function(n){return Dc(n)};xr.hydrate=function(n,e,t){if(!A0(e))throw Error(W(200));return E0(null,n,e,!0,t)};xr.hydrateRoot=function(n,e,t){if(!GS(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=rP;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=nP(e,null,n,1,t??null,s,!1,i,o),n[co]=e.current,Vf(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new S0(e)};xr.render=function(n,e,t){if(!A0(e))throw Error(W(200));return E0(null,n,e,!1,t)};xr.unmountComponentAtNode=function(n){if(!A0(n))throw Error(W(40));return n._reactRootContainer?(Dc(function(){E0(null,null,n,!1,function(){n._reactRootContainer=null,n[co]=null})}),!0):!1};xr.unstable_batchedUpdates=jS;xr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!A0(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return E0(n,e,t,!1,r)};xr.version="18.3.1-next-f1338f8080-20240426";function sP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sP)}catch(n){console.error(n)}}sP(),sT.exports=xr;var Zm=sT.exports;const uO=Q1(Zm);var iP,iC=Zm;iP=iC.createRoot,iC.hydrateRoot;function dO(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,s,i,o=[],a="",c=n.split("/");for(c[0]||c.shift();s=c.shift();)t=s[0],t==="*"?(o.push(t),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var oP={exports:{}},aP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah=T;function hO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fO=typeof Object.is=="function"?Object.is:hO,pO=Ah.useState,mO=Ah.useEffect,gO=Ah.useLayoutEffect,yO=Ah.useDebugValue;function vO(n,e){var t=e(),r=pO({inst:{value:t,getSnapshot:e}}),s=r[0].inst,i=r[1];return gO(function(){s.value=t,s.getSnapshot=e,Mw(s)&&i({inst:s})},[n,t,e]),mO(function(){return Mw(s)&&i({inst:s}),n(function(){Mw(s)&&i({inst:s})})},[n]),yO(t),t}function Mw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fO(n,t)}catch{return!0}}function wO(n,e){return e()}var bO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wO:vO;aP.useSyncExternalStore=Ah.useSyncExternalStore!==void 0?Ah.useSyncExternalStore:bO;oP.exports=aP;var xO=oP.exports;const SO=nT.useInsertionEffect,AO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EO=AO?T.useLayoutEffect:T.useEffect,CO=SO||EO,lP=n=>{const e=T.useRef([n,(...t)=>e[0](...t)]).current;return CO(()=>{e[0]=n}),e[1]},_O="popstate",WS="pushState",KS="replaceState",TO="hashchange",oC=[_O,WS,KS,TO],kO=n=>{for(const e of oC)addEventListener(e,n);return()=>{for(const e of oC)removeEventListener(e,n)}},cP=(n,e)=>xO.useSyncExternalStore(kO,n,e),PO=()=>location.search,RO=({ssrSearch:n=""}={})=>cP(PO,()=>n),aC=()=>location.pathname,MO=({ssrPath:n}={})=>cP(aC,n?()=>n:aC),NO=(n,{replace:e=!1,state:t=null}={})=>history[e?KS:WS](t,"",n),IO=(n={})=>[MO(n),NO],lC=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[lC]>"u"){for(const n of[WS,KS]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,lC,{value:!0})}const LO=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",uP=(n="")=>n==="/"?"":n,DO=(n,e)=>n[0]==="~"?n.slice(1):uP(e)+n,OO=(n="",e)=>LO(cC(uP(n)),cC(e)),cC=n=>{try{return decodeURI(n)}catch{return n}},dP={hook:IO,searchHook:RO,parser:dO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},hP=T.createContext(dP),eg=()=>T.useContext(hP),fP={},pP=T.createContext(fP),FO=()=>T.useContext(pP),C0=n=>{const[e,t]=n.hook(n);return[OO(n.base,e),lP((r,s)=>t(DO(r,n.base),s))]},jO=()=>C0(eg()),mP=(n,e,t,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),o=s.exec(t)||[],[a,...c]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((h,f)=>[h,c[f]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[a]:[]]:[!1,null]},BO=({children:n,...e})=>{var d,h;const t=eg(),r=e.hook?dP:t;let s=r;const[i,o]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((h=e.hook)==null?void 0:h.hrefs);let a=T.useRef({}),c=a.current,u=c;for(let f in r){const p=f==="base"?r[f]+(e[f]||""):e[f]||r[f];c===u&&p!==u[f]&&(a.current=u={...u}),u[f]=p,p!==r[f]&&(s=u)}return T.createElement(hP.Provider,{value:s,children:n})},uC=({children:n,component:e},t)=>e?T.createElement(e,{params:t}):typeof n=="function"?n(t):n,UO=n=>{let e=T.useRef(fP),t=e.current;for(const r in n)n[r]!==t[r]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},Mg=({path:n,nest:e,match:t,...r})=>{const s=eg(),[i]=C0(s),[o,a,c]=t??mP(s.parser,n,i,e),u=UO({...FO(),...a});if(!o)return null;const d=c?T.createElement(BO,{base:c},uC(r,u)):uC(r,u);return T.createElement(pP.Provider,{value:u,children:d})},io=T.forwardRef((n,e)=>{const t=eg(),[r,s]=C0(t),{to:i="",href:o=i,onClick:a,asChild:c,children:u,className:d,replace:h,state:f,...p}=n,v=lP(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(a==null||a(x),x.defaultPrevented||(x.preventDefault(),s(o,n)))}),m=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return c&&T.isValidElement(u)?T.cloneElement(u,{onClick:v,href:m}):T.createElement("a",{...p,onClick:v,href:m,className:d!=null&&d.call?d(r===o):d,children:u,ref:e})}),gP=n=>Array.isArray(n)?n.flatMap(e=>gP(e&&e.type===T.Fragment?e.props.children:e)):[n],$O=({children:n,location:e})=>{const t=eg(),[r]=C0(t);for(const s of gP(n)){let i=0;if(T.isValidElement(s)&&(i=mP(t.parser,s.props.path,e||r,s.props.nest))[0])return T.cloneElement(s,{match:i})}return null};var _0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},T0=typeof window>"u"||"Deno"in globalThis;function Jr(){}function zO(n,e){return typeof n=="function"?n(e):n}function HO(n){return typeof n=="number"&&n>=0&&n!==1/0}function VO(n,e){return Math.max(n+(e||0)-Date.now(),0)}function dC(n,e){return typeof n=="function"?n(e):n}function GO(n,e){return typeof n=="function"?n(e):n}function hC(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==XS(o,e.options))return!1}else if(!ep(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function fC(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Zf(e.options.mutationKey)!==Zf(i))return!1}else if(!ep(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function XS(n,e){return((e==null?void 0:e.queryKeyHashFn)||Zf)(n)}function Zf(n){return JSON.stringify(n,(e,t)=>tx(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function ep(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!ep(n[t],e[t])):!1}function yP(n,e){if(n===e)return n;const t=pC(n)&&pC(e);if(t||tx(n)&&tx(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let c=0;for(let u=0;u<o;u++){const d=t?u:i[u];(!t&&r.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=yP(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&c++)}return s===o&&c===s?n:a}return e}function pC(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function tx(n){if(!mC(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!mC(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function mC(n){return Object.prototype.toString.call(n)==="[object Object]"}function WO(n){return new Promise(e=>{setTimeout(e,n)})}function KO(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?yP(n,e):e}function XO(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function qO(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var qS=Symbol();function vP(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===qS?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var fl,Mo,Ou,F_,YO=(F_=class extends _0{constructor(){super();A(this,fl);A(this,Mo);A(this,Ou);y(this,Ou,e=>{if(!T0&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){l(this,Mo)||this.setEventListener(l(this,Ou))}onUnsubscribe(){var e;this.hasListeners()||((e=l(this,Mo))==null||e.call(this),y(this,Mo,void 0))}setEventListener(e){var t;y(this,Ou,e),(t=l(this,Mo))==null||t.call(this),y(this,Mo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){l(this,fl)!==e&&(y(this,fl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof l(this,fl)=="boolean"?l(this,fl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},fl=new WeakMap,Mo=new WeakMap,Ou=new WeakMap,F_),wP=new YO,Fu,No,ju,j_,QO=(j_=class extends _0{constructor(){super();A(this,Fu,!0);A(this,No);A(this,ju);y(this,ju,e=>{if(!T0&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){l(this,No)||this.setEventListener(l(this,ju))}onUnsubscribe(){var e;this.hasListeners()||((e=l(this,No))==null||e.call(this),y(this,No,void 0))}setEventListener(e){var t;y(this,ju,e),(t=l(this,No))==null||t.call(this),y(this,No,e(this.setOnline.bind(this)))}setOnline(e){l(this,Fu)!==e&&(y(this,Fu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return l(this,Fu)}},Fu=new WeakMap,No=new WeakMap,ju=new WeakMap,j_),Sv=new QO;function JO(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function ZO(n){return Math.min(1e3*2**n,3e4)}function bP(n){return(n??"online")==="online"?Sv.isOnline():!0}var xP=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Nw(n){return n instanceof xP}function SP(n){let e=!1,t=0,r=!1,s;const i=JO(),o=m=>{var x;r||(f(new xP(m)),(x=n.abort)==null||x.call(n))},a=()=>{e=!0},c=()=>{e=!1},u=()=>wP.isFocused()&&(n.networkMode==="always"||Sv.isOnline())&&n.canRun(),d=()=>bP(n.networkMode)&&n.canRun(),h=m=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,m),s==null||s(),i.resolve(m))},f=m=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,m),s==null||s(),i.reject(m))},p=()=>new Promise(m=>{var x;s=g=>{(r||u())&&m(g)},(x=n.onPause)==null||x.call(n)}).then(()=>{var m;s=void 0,r||(m=n.onContinue)==null||m.call(n)}),v=()=>{if(r)return;let m;const x=t===0?n.initialPromise:void 0;try{m=x??n.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(h).catch(g=>{var k;if(r)return;const w=n.retry??(T0?0:3),b=n.retryDelay??ZO,E=typeof b=="function"?b(t,g):b,_=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,g);if(e||!_){f(g);return}t++,(k=n.onFail)==null||k.call(n,t,g),WO(E).then(()=>u()?void 0:p()).then(()=>{e?f(g):v()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),i)}}function eF(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Sn=eF(),pl,B_,AP=(B_=class{constructor(){A(this,pl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HO(this.gcTime)&&y(this,pl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(T0?1/0:5*60*1e3))}clearGcTimeout(){l(this,pl)&&(clearTimeout(l(this,pl)),y(this,pl,void 0))}},pl=new WeakMap,B_),Bu,Uu,_r,rn,hp,ml,Zr,fi,U_,tF=(U_=class extends AP{constructor(e){super();A(this,Zr);A(this,Bu);A(this,Uu);A(this,_r);A(this,rn);A(this,hp);A(this,ml);y(this,ml,!1),y(this,hp,e.defaultOptions),this.setOptions(e.options),this.observers=[],y(this,_r,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,y(this,Bu,rF(this.options)),this.state=e.state??l(this,Bu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=l(this,rn))==null?void 0:e.promise}setOptions(e){this.options={...l(this,hp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&l(this,_r).remove(this)}setData(e,t){const r=KO(this.state.data,e,this.options);return C(this,Zr,fi).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){C(this,Zr,fi).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=l(this,rn))==null?void 0:r.promise;return(s=l(this,rn))==null||s.cancel(e),t?t.then(Jr).catch(Jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(l(this,Bu))}isActive(){return this.observers.some(e=>GO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!VO(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=l(this,rn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=l(this,rn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),l(this,_r).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(l(this,rn)&&(l(this,ml)?l(this,rn).cancel({revert:!0}):l(this,rn).cancelRetry()),this.scheduleGc()),l(this,_r).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||C(this,Zr,fi).call(this,{type:"invalidate"})}fetch(e,t){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(l(this,rn))return l(this,rn).continueRetry(),l(this,rn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(y(this,ml,!0),r.signal)})},i=()=>{const h=vP(this.options,t),f={queryKey:this.queryKey,meta:this.meta};return s(f),y(this,ml,!1),this.options.persister?this.options.persister(h,f,this):h(f)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),y(this,Uu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&C(this,Zr,fi).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=h=>{var f,p,v,m;Nw(h)&&h.silent||C(this,Zr,fi).call(this,{type:"error",error:h}),Nw(h)||((p=(f=l(this,_r).config).onError)==null||p.call(f,h,this),(m=(v=l(this,_r).config).onSettled)==null||m.call(v,this.state.data,h,this)),this.scheduleGc()};return y(this,rn,SP({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,v,m;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){a(x);return}(p=(f=l(this,_r).config).onSuccess)==null||p.call(f,h,this),(m=(v=l(this,_r).config).onSettled)==null||m.call(v,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,f)=>{C(this,Zr,fi).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{C(this,Zr,fi).call(this,{type:"pause"})},onContinue:()=>{C(this,Zr,fi).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),l(this,rn).start()}},Bu=new WeakMap,Uu=new WeakMap,_r=new WeakMap,rn=new WeakMap,hp=new WeakMap,ml=new WeakMap,Zr=new WeakSet,fi=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...nF(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Nw(s)&&s.revert&&l(this,Uu)?{...l(this,Uu),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Sn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),l(this,_r).notify({query:this,type:"updated",action:e})})},U_);function nF(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bP(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function rF(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ks,$_,sF=($_=class extends _0{constructor(e={}){super();A(this,ks);this.config=e,y(this,ks,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??XS(s,t);let o=this.get(i);return o||(o=new tF({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){l(this,ks).has(e.queryHash)||(l(this,ks).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=l(this,ks).get(e.queryHash);t&&(e.destroy(),t===e&&l(this,ks).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return l(this,ks).get(e)}getAll(){return[...l(this,ks).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>hC(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>hC(e,r)):t}notify(e){Sn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ks=new WeakMap,$_),Ps,mn,gl,Rs,Ao,z_,iF=(z_=class extends AP{constructor(e){super();A(this,Rs);A(this,Ps);A(this,mn);A(this,gl);this.mutationId=e.mutationId,y(this,mn,e.mutationCache),y(this,Ps,[]),this.state=e.state||oF(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){l(this,Ps).includes(e)||(l(this,Ps).push(e),this.clearGcTimeout(),l(this,mn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){y(this,Ps,l(this,Ps).filter(t=>t!==e)),this.scheduleGc(),l(this,mn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){l(this,Ps).length||(this.state.status==="pending"?this.scheduleGc():l(this,mn).remove(this))}continue(){var e;return((e=l(this,gl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,c,u,d,h,f,p,v,m,x,g,w,b,E,_,k,P;y(this,gl,SP({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,D)=>{C(this,Rs,Ao).call(this,{type:"failed",failureCount:M,error:D})},onPause:()=>{C(this,Rs,Ao).call(this,{type:"pause"})},onContinue:()=>{C(this,Rs,Ao).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>l(this,mn).canRun(this)}));const t=this.state.status==="pending",r=!l(this,gl).canStart();try{if(!t){C(this,Rs,Ao).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=l(this,mn).config).onMutate)==null?void 0:i.call(s,e,this));const D=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));D!==this.state.context&&C(this,Rs,Ao).call(this,{type:"pending",context:D,variables:e,isPaused:r})}const M=await l(this,gl).start();return await((u=(c=l(this,mn).config).onSuccess)==null?void 0:u.call(c,M,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,M,e,this.state.context)),await((p=(f=l(this,mn).config).onSettled)==null?void 0:p.call(f,M,null,this.state.variables,this.state.context,this)),await((m=(v=this.options).onSettled)==null?void 0:m.call(v,M,null,e,this.state.context)),C(this,Rs,Ao).call(this,{type:"success",data:M}),M}catch(M){try{throw await((g=(x=l(this,mn).config).onError)==null?void 0:g.call(x,M,e,this.state.context,this)),await((b=(w=this.options).onError)==null?void 0:b.call(w,M,e,this.state.context)),await((_=(E=l(this,mn).config).onSettled)==null?void 0:_.call(E,void 0,M,this.state.variables,this.state.context,this)),await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,M,e,this.state.context)),M}finally{C(this,Rs,Ao).call(this,{type:"error",error:M})}}finally{l(this,mn).runNext(this)}}},Ps=new WeakMap,mn=new WeakMap,gl=new WeakMap,Rs=new WeakSet,Ao=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Sn.batch(()=>{l(this,Ps).forEach(r=>{r.onMutationUpdate(e)}),l(this,mn).notify({mutation:this,type:"updated",action:e})})},z_);function oF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kn,fp,H_,aF=(H_=class extends _0{constructor(e={}){super();A(this,Kn);A(this,fp);this.config=e,y(this,Kn,new Map),y(this,fp,Date.now())}build(e,t,r){const s=new iF({mutationCache:this,mutationId:++ot(this,fp)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){const t=Ng(e),r=l(this,Kn).get(t)??[];r.push(e),l(this,Kn).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=Ng(e);if(l(this,Kn).has(t)){const s=(r=l(this,Kn).get(t))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?l(this,Kn).delete(t):l(this,Kn).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=l(this,Kn).get(Ng(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=l(this,Kn).get(Ng(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...l(this,Kn).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>fC(t,r))}findAll(e={}){return this.getAll().filter(t=>fC(e,t))}notify(e){Sn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Sn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Jr))))}},Kn=new WeakMap,fp=new WeakMap,H_);function Ng(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function gC(n){return{onFetch:(e,t)=>{var d,h,f,p,v;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},g=vP(e.options,e.fetchOptions),w=async(b,E,_)=>{if(m)return Promise.reject();if(E==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:e.queryKey,pageParam:E,direction:_?"backward":"forward",meta:e.options.meta};x(k);const P=await g(k),{maxPages:M}=e.options,D=_?qO:XO;return{pages:D(b.pages,P,M),pageParams:D(b.pageParams,E,M)}};if(s&&i.length){const b=s==="backward",E=b?lF:yC,_={pages:i,pageParams:o},k=E(r,_);a=await w(_,k,b)}else{const b=n??i.length;do{const E=c===0?o[0]??r.initialPageParam:yC(r,a);if(c>0&&E==null)break;a=await w(a,E),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var m,x;return(x=(m=e.options).persister)==null?void 0:x.call(m,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function yC(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function lF(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var at,Io,Lo,$u,zu,Do,Hu,Vu,V_,cF=(V_=class{constructor(n={}){A(this,at);A(this,Io);A(this,Lo);A(this,$u);A(this,zu);A(this,Do);A(this,Hu);A(this,Vu);y(this,at,n.queryCache||new sF),y(this,Io,n.mutationCache||new aF),y(this,Lo,n.defaultOptions||{}),y(this,$u,new Map),y(this,zu,new Map),y(this,Do,0)}mount(){ot(this,Do)._++,l(this,Do)===1&&(y(this,Hu,wP.subscribe(async n=>{n&&(await this.resumePausedMutations(),l(this,at).onFocus())})),y(this,Vu,Sv.subscribe(async n=>{n&&(await this.resumePausedMutations(),l(this,at).onOnline())})))}unmount(){var n,e;ot(this,Do)._--,l(this,Do)===0&&((n=l(this,Hu))==null||n.call(this),y(this,Hu,void 0),(e=l(this,Vu))==null||e.call(this),y(this,Vu,void 0))}isFetching(n){return l(this,at).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return l(this,Io).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=l(this,at).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=l(this,at).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(dC(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return l(this,at).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=l(this,at).get(r.queryHash),i=s==null?void 0:s.state.data,o=zO(e,i);if(o!==void 0)return l(this,at).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Sn.batch(()=>l(this,at).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=l(this,at).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=l(this,at);Sn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=l(this,at),r={type:"active",...n};return Sn.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Sn.batch(()=>l(this,at).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Jr).catch(Jr)}invalidateQueries(n={},e={}){return Sn.batch(()=>{if(l(this,at).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Sn.batch(()=>l(this,at).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(Jr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Jr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=l(this,at).build(this,e);return t.isStaleByTime(dC(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Jr).catch(Jr)}fetchInfiniteQuery(n){return n.behavior=gC(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Jr).catch(Jr)}ensureInfiniteQueryData(n){return n.behavior=gC(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Sv.isOnline()?l(this,Io).resumePausedMutations():Promise.resolve()}getQueryCache(){return l(this,at)}getMutationCache(){return l(this,Io)}getDefaultOptions(){return l(this,Lo)}setDefaultOptions(n){y(this,Lo,n)}setQueryDefaults(n,e){l(this,$u).set(Zf(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...l(this,$u).values()];let t={};return e.forEach(r=>{ep(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){l(this,zu).set(Zf(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...l(this,zu).values()];let t={};return e.forEach(r=>{ep(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...l(this,Lo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=XS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===qS&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...l(this,Lo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){l(this,at).clear(),l(this,Io).clear()}},at=new WeakMap,Io=new WeakMap,Lo=new WeakMap,$u=new WeakMap,zu=new WeakMap,Do=new WeakMap,Hu=new WeakMap,Vu=new WeakMap,V_),uF=T.createContext(void 0),dF=({client:n,children:e})=>(T.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),S.jsx(uF.Provider,{value:n,children:e}));async function EP(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}async function vC(n,e,t){const r=await fetch(e,{method:n,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await EP(r),r}const hF=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await EP(t),await t.json())},fF=new cF({defaultOptions:{queries:{queryFn:hF({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),pF=1,mF=1e6;let Iw=0;function gF(){return Iw=(Iw+1)%Number.MAX_SAFE_INTEGER,Iw.toString()}const Lw=new Map,wC=n=>{if(Lw.has(n))return;const e=setTimeout(()=>{Lw.delete(n),Lf({type:"REMOVE_TOAST",toastId:n})},mF);Lw.set(n,e)},yF=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,pF)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?wC(t):n.toasts.forEach(r=>{wC(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},hy=[];let fy={toasts:[]};function Lf(n){fy=yF(fy,n),hy.forEach(e=>{e(fy)})}function vF({...n}){const e=gF(),t=s=>Lf({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Lf({type:"DISMISS_TOAST",toastId:e});return Lf({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function wF(){const[n,e]=T.useState(fy);return T.useEffect(()=>(hy.push(e),()=>{const t=hy.indexOf(e);t>-1&&hy.splice(t,1)}),[n]),{...n,toast:vF,dismiss:t=>Lf({type:"DISMISS_TOAST",toastId:t})}}function oe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function bC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function k0(...n){return e=>{let t=!1;const r=n.map(s=>{const i=bC(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():bC(n[s],null)}}}}function Bt(...n){return T.useCallback(k0(...n),n)}function zc(n,e=[]){let t=[];function r(i,o){const a=T.createContext(o),c=t.length;t=[...t,o];const u=h=>{var g;const{scope:f,children:p,...v}=h,m=((g=f==null?void 0:f[n])==null?void 0:g[c])||a,x=T.useMemo(()=>v,Object.values(v));return S.jsx(m.Provider,{value:x,children:p})};u.displayName=i+"Provider";function d(h,f){var m;const p=((m=f==null?void 0:f[n])==null?void 0:m[c])||a,v=T.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=t.map(o=>T.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return T.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[r,bF(s,...e)]}function bF(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function tp(n){const e=SF(n),t=T.forwardRef((r,s)=>{const{children:i,...o}=r,a=T.Children.toArray(i),c=a.find(EF);if(c){const u=c.props.children,d=a.map(h=>h===c?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return S.jsx(e,{...o,ref:s,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return S.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var xF=tp("Slot");function SF(n){const e=T.forwardRef((t,r)=>{const{children:s,...i}=t;if(T.isValidElement(s)){const o=_F(s),a=CF(i,s.props);return s.type!==T.Fragment&&(a.ref=r?k0(r,o):o),T.cloneElement(s,a)}return T.Children.count(s)>1?T.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var CP=Symbol("radix.slottable");function AF(n){const e=({children:t})=>S.jsx(S.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=CP,e}function EF(n){return T.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===CP}function CF(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{i(...a),s(...a)}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function _F(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function YS(n){const e=n+"CollectionProvider",[t,r]=zc(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:x,children:g}=m,w=So.useRef(null),b=So.useRef(new Map).current;return S.jsx(s,{scope:x,itemMap:b,collectionRef:w,children:g})};o.displayName=e;const a=n+"CollectionSlot",c=tp(a),u=So.forwardRef((m,x)=>{const{scope:g,children:w}=m,b=i(a,g),E=Bt(x,b.collectionRef);return S.jsx(c,{ref:E,children:w})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=tp(d),p=So.forwardRef((m,x)=>{const{scope:g,children:w,...b}=m,E=So.useRef(null),_=Bt(x,E),k=i(d,g);return So.useEffect(()=>(k.itemMap.set(E,{ref:E,...b}),()=>void k.itemMap.delete(E))),S.jsx(f,{[h]:"",ref:_,children:w})});p.displayName=d;function v(m){const x=i(n+"CollectionConsumer",m);return So.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((k,P)=>b.indexOf(k.ref.current)-b.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,r]}var TF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rt=TF.reduce((n,e)=>{const t=tp(`Primitive.${e}`),r=T.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function QS(n,e){n&&Zm.flushSync(()=>n.dispatchEvent(e))}function _n(n){const e=T.useRef(n);return T.useEffect(()=>{e.current=n}),T.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function kF(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n);T.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var PF="DismissableLayer",nx="dismissableLayer.update",RF="dismissableLayer.pointerDownOutside",MF="dismissableLayer.focusOutside",xC,_P=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),P0=T.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,u=T.useContext(_P),[d,h]=T.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=T.useState({}),v=Bt(e,P=>h(P)),m=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=m.indexOf(x),w=d?m.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,E=w>=g,_=IF(P=>{const M=P.target,D=[...u.branches].some(O=>O.contains(M));!E||D||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),k=LF(P=>{const M=P.target;[...u.branches].some(O=>O.contains(M))||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return kF(P=>{w===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),T.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(xC=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),SC(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=xC)}},[d,f,t,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),SC())},[d,u]),T.useEffect(()=>{const P=()=>p({});return document.addEventListener(nx,P),()=>document.removeEventListener(nx,P)},[]),S.jsx(rt.div,{...c,ref:v,style:{pointerEvents:b?E?"auto":"none":void 0,...n.style},onFocusCapture:oe(n.onFocusCapture,k.onFocusCapture),onBlurCapture:oe(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:oe(n.onPointerDownCapture,_.onPointerDownCapture)})});P0.displayName=PF;var NF="DismissableLayerBranch",TP=T.forwardRef((n,e)=>{const t=T.useContext(_P),r=T.useRef(null),s=Bt(e,r);return T.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),S.jsx(rt.div,{...n,ref:s})});TP.displayName=NF;function IF(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=T.useRef(!1),s=T.useRef(()=>{});return T.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){kP(RF,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function LF(n,e=globalThis==null?void 0:globalThis.document){const t=_n(n),r=T.useRef(!1);return T.useEffect(()=>{const s=i=>{i.target&&!r.current&&kP(MF,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function SC(){const n=new CustomEvent(nx);document.dispatchEvent(n)}function kP(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?QS(s,i):s.dispatchEvent(i)}var DF=P0,OF=TP,Ha=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},FF="Portal",JS=T.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=T.useState(!1);Ha(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?uO.createPortal(S.jsx(rt.div,{...r,ref:e}),o):null});JS.displayName=FF;function jF(n,e){return T.useReducer((t,r)=>e[t][r]??t,n)}var Hc=n=>{const{present:e,children:t}=n,r=BF(e),s=typeof t=="function"?t({present:r.isPresent}):T.Children.only(t),i=Bt(r.ref,UF(s));return typeof t=="function"||r.isPresent?T.cloneElement(s,{ref:i}):null};Hc.displayName="Presence";function BF(n){const[e,t]=T.useState(),r=T.useRef({}),s=T.useRef(n),i=T.useRef("none"),o=n?"mounted":"unmounted",[a,c]=jF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=Ig(r.current);i.current=a==="mounted"?u:"none"},[a]),Ha(()=>{const u=r.current,d=s.current;if(d!==n){const f=i.current,p=Ig(u);n?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),Ha(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const m=Ig(r.current).includes(p.animationName);if(p.target===e&&m&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=p=>{p.target===e&&(i.current=Ig(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function Ig(n){return(n==null?void 0:n.animationName)||"none"}function UF(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ZS({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=$F({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:r,a=_n(t),c=T.useCallback(u=>{if(i){const h=typeof u=="function"?u(n):u;h!==n&&a(h)}else s(u)},[i,n,s,a]);return[o,c]}function $F({defaultProp:n,onChange:e}){const t=T.useState(n),[r]=t,s=T.useRef(r),i=_n(e);return T.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),t}var zF="VisuallyHidden",R0=T.forwardRef((n,e)=>S.jsx(rt.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));R0.displayName=zF;var HF=R0,eA="ToastProvider",[tA,VF,GF]=YS("Toast"),[PP,x6]=zc("Toast",[GF]),[WF,M0]=PP(eA),RP=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[a,c]=T.useState(null),[u,d]=T.useState(0),h=T.useRef(!1),f=T.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${eA}\`. Expected non-empty \`string\`.`),S.jsx(tA.Provider,{scope:e,children:S.jsx(WF,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:T.useCallback(()=>d(p=>p+1),[]),onToastRemove:T.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};RP.displayName=eA;var MP="ToastViewport",KF=["F8"],rx="toast.viewportPause",sx="toast.viewportResume",NP=T.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=KF,label:s="Notifications ({hotkey})",...i}=n,o=M0(MP,t),a=VF(t),c=T.useRef(null),u=T.useRef(null),d=T.useRef(null),h=T.useRef(null),f=Bt(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;T.useEffect(()=>{const x=g=>{var b;r.length!==0&&r.every(E=>g[E]||g.code===E)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),T.useEffect(()=>{const x=c.current,g=h.current;if(v&&x&&g){const w=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(rx);g.dispatchEvent(k),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(sx);g.dispatchEvent(k),o.isClosePausedRef.current=!1}},E=k=>{!x.contains(k.relatedTarget)&&b()},_=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",w),x.addEventListener("focusout",E),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",E),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const m=T.useCallback(({tabbingDirection:x})=>{const w=a().map(b=>{const E=b.ref.current,_=[E,...oj(E)];return x==="forwards"?_:_.reverse()});return(x==="forwards"?w.reverse():w).flat()},[a]);return T.useEffect(()=>{const x=h.current;if(x){const g=w=>{var _,k,P;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const M=document.activeElement,D=w.shiftKey;if(w.target===x&&D){(_=u.current)==null||_.focus();return}const U=m({tabbingDirection:D?"backwards":"forwards"}),V=U.findIndex($=>$===M);Dw(U.slice(V+1))?w.preventDefault():D?(k=u.current)==null||k.focus():(P=d.current)==null||P.focus()}};return x.addEventListener("keydown",g),()=>x.removeEventListener("keydown",g)}},[a,m]),S.jsxs(OF,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&S.jsx(ix,{ref:u,onFocusFromOutsideViewport:()=>{const x=m({tabbingDirection:"forwards"});Dw(x)}}),S.jsx(tA.Slot,{scope:t,children:S.jsx(rt.ol,{tabIndex:-1,...i,ref:f})}),v&&S.jsx(ix,{ref:d,onFocusFromOutsideViewport:()=>{const x=m({tabbingDirection:"backwards"});Dw(x)}})]})});NP.displayName=MP;var IP="ToastFocusProxy",ix=T.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=M0(IP,t);return S.jsx(R0,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});ix.displayName=IP;var N0="Toast",XF="toast.swipeStart",qF="toast.swipeMove",YF="toast.swipeCancel",QF="toast.swipeEnd",LP=T.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[a=!0,c]=ZS({prop:r,defaultProp:s,onChange:i});return S.jsx(Hc,{present:t||a,children:S.jsx(ej,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:_n(n.onPause),onResume:_n(n.onResume),onSwipeStart:oe(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:oe(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});LP.displayName=N0;var[JF,ZF]=PP(N0,{onClose(){}}),ej=T.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...v}=n,m=M0(N0,t),[x,g]=T.useState(null),w=Bt(e,$=>g($)),b=T.useRef(null),E=T.useRef(null),_=s||m.duration,k=T.useRef(0),P=T.useRef(_),M=T.useRef(0),{onToastAdd:D,onToastRemove:O}=m,j=_n(()=>{var X;(x==null?void 0:x.contains(document.activeElement))&&((X=m.viewport)==null||X.focus()),o()}),U=T.useCallback($=>{!$||$===1/0||(window.clearTimeout(M.current),k.current=new Date().getTime(),M.current=window.setTimeout(j,$))},[j]);T.useEffect(()=>{const $=m.viewport;if($){const X=()=>{U(P.current),u==null||u()},H=()=>{const B=new Date().getTime()-k.current;P.current=P.current-B,window.clearTimeout(M.current),c==null||c()};return $.addEventListener(rx,H),$.addEventListener(sx,X),()=>{$.removeEventListener(rx,H),$.removeEventListener(sx,X)}}},[m.viewport,_,c,u,U]),T.useEffect(()=>{i&&!m.isClosePausedRef.current&&U(_)},[i,_,m.isClosePausedRef,U]),T.useEffect(()=>(D(),()=>O()),[D,O]);const V=T.useMemo(()=>x?$P(x):null,[x]);return m.viewport?S.jsxs(S.Fragment,{children:[V&&S.jsx(tj,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),S.jsx(JF,{scope:t,onClose:j,children:Zm.createPortal(S.jsx(tA.ItemSlot,{scope:t,children:S.jsx(DF,{asChild:!0,onEscapeKeyDown:oe(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||j(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:S.jsx(rt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":m.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:oe(n.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:oe(n.onPointerDown,$=>{$.button===0&&(b.current={x:$.clientX,y:$.clientY})}),onPointerMove:oe(n.onPointerMove,$=>{if(!b.current)return;const X=$.clientX-b.current.x,H=$.clientY-b.current.y,B=!!E.current,N=["left","right"].includes(m.swipeDirection),R=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,I=N?R(0,X):0,L=N?0:R(0,H),F=$.pointerType==="touch"?10:2,z={x:I,y:L},K={originalEvent:$,delta:z};B?(E.current=z,Lg(qF,h,K,{discrete:!1})):AC(z,m.swipeDirection,F)?(E.current=z,Lg(XF,d,K,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(X)>F||Math.abs(H)>F)&&(b.current=null)}),onPointerUp:oe(n.onPointerUp,$=>{const X=E.current,H=$.target;if(H.hasPointerCapture($.pointerId)&&H.releasePointerCapture($.pointerId),E.current=null,b.current=null,X){const B=$.currentTarget,N={originalEvent:$,delta:X};AC(X,m.swipeDirection,m.swipeThreshold)?Lg(QF,p,N,{discrete:!0}):Lg(YF,f,N,{discrete:!0}),B.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),tj=n=>{const{__scopeToast:e,children:t,...r}=n,s=M0(N0,e),[i,o]=T.useState(!1),[a,c]=T.useState(!1);return sj(()=>o(!0)),T.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:S.jsx(JS,{asChild:!0,children:S.jsx(R0,{...r,children:i&&S.jsxs(S.Fragment,{children:[s.label," ",t]})})})},nj="ToastTitle",DP=T.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return S.jsx(rt.div,{...r,ref:e})});DP.displayName=nj;var rj="ToastDescription",OP=T.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return S.jsx(rt.div,{...r,ref:e})});OP.displayName=rj;var FP="ToastAction",jP=T.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?S.jsx(UP,{altText:t,asChild:!0,children:S.jsx(nA,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${FP}\`. Expected non-empty \`string\`.`),null)});jP.displayName=FP;var BP="ToastClose",nA=T.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=ZF(BP,t);return S.jsx(UP,{asChild:!0,children:S.jsx(rt.button,{type:"button",...r,ref:e,onClick:oe(n.onClick,s.onClose)})})});nA.displayName=BP;var UP=T.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return S.jsx(rt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function $P(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),ij(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$P(r))}}),e}function Lg(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?QS(s,i):s.dispatchEvent(i)}var AC=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function sj(n=()=>{}){const e=_n(n);Ha(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function ij(n){return n.nodeType===n.ELEMENT_NODE}function oj(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Dw(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var aj=RP,zP=NP,HP=LP,VP=DP,GP=OP,WP=jP,KP=nA;function XP(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=XP(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function qP(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=XP(n))&&(r&&(r+=" "),r+=e);return r}const EC=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,CC=qP,YP=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return CC(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const f=EC(d)||EC(h);return s[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(v=>{let[m,x]=v;return Array.isArray(x)?x.includes({...i,...a}[m]):{...i,...a}[m]===x})?[...u,h,f]:u},[]);return CC(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QP=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=T.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>T.createElement("svg",{ref:c,...cj,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:QP("lucide",s),...a},[...o.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(n,e)=>{const t=T.forwardRef(({className:r,...s},i)=>T.createElement(uj,{ref:i,iconNode:e,className:QP(`lucide-${lj(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=St("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=St("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=St("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=St("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=St("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=St("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=St("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=St("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=St("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=St("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=St("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=St("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=St("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=St("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=St("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=St("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=St("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=St("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=St("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rA="-",Sj=n=>{const e=Ej(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(rA);return a[0]===""&&a.length!==1&&a.shift(),JP(a,e)||Aj(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},JP=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?JP(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(rA);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},IC=/^\[(.+)\]$/,Aj=n=>{if(IC.test(n)){const e=IC.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Ej=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return _j(Object.entries(n.classGroups),t).forEach(([i,o])=>{ox(o,r,i,e)}),r},ox=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:LC(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(Cj(s)){ox(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{ox(o,LC(e,i),t,r)})})},LC=(n,e)=>{let t=n;return e.split(rA).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Cj=n=>n.isThemeGetter,_j=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,Tj=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},ZP="!",kj=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let x=0;x<a.length;x++){let g=a[x];if(u===0){if(g===s&&(r||a.slice(x,x+i)===e)){c.push(a.slice(d,x)),d=x+i;continue}if(g==="/"){h=x;continue}}g==="["?u++:g==="]"&&u--}const f=c.length===0?a:a.substring(d),p=f.startsWith(ZP),v=p?f.substring(1):f,m=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return t?a=>t({className:a,parseClassName:o}):o},Pj=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Rj=n=>({cache:Tj(n.cacheSize),parseClassName:kj(n),...Sj(n)}),Mj=/\s+/,Nj=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(Mj);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=t(u);let v=!!p,m=r(v?f.substring(0,p):f);if(!m){if(!v){a=u+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=u+(a.length>0?" "+a:a);continue}v=!1}const x=Pj(d).join(":"),g=h?x+ZP:x,w=g+m;if(i.includes(w))continue;i.push(w);const b=s(m,v);for(let E=0;E<b.length;++E){const _=b[E];i.push(g+_)}a=u+(a.length>0?" "+a:a)}return a};function Ij(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=eR(e))&&(r&&(r+=" "),r+=t);return r}const eR=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=eR(n[r]))&&(t&&(t+=" "),t+=e);return t};function Lj(n,...e){let t,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),n());return t=Rj(u),r=t.cache.get,s=t.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=Nj(c,t);return s(c,d),d}return function(){return i(Ij.apply(null,arguments))}}const He=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},tR=/^\[(?:([a-z-]+):)?(.+)\]$/i,Dj=/^\d+\/\d+$/,Oj=new Set(["px","full","screen"]),Fj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Uj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$j=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hi=n=>Nu(n)||Oj.has(n)||Dj.test(n),bo=n=>Ih(n,"length",qj),Nu=n=>!!n&&!Number.isNaN(Number(n)),Fw=n=>Ih(n,"number",Nu),Gh=n=>!!n&&Number.isInteger(Number(n)),zj=n=>n.endsWith("%")&&Nu(n.slice(0,-1)),de=n=>tR.test(n),xo=n=>Fj.test(n),Hj=new Set(["length","size","percentage"]),Vj=n=>Ih(n,Hj,nR),Gj=n=>Ih(n,"position",nR),Wj=new Set(["image","url"]),Kj=n=>Ih(n,Wj,Qj),Xj=n=>Ih(n,"",Yj),Wh=()=>!0,Ih=(n,e,t)=>{const r=tR.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},qj=n=>jj.test(n)&&!Bj.test(n),nR=()=>!1,Yj=n=>Uj.test(n),Qj=n=>$j.test(n),Jj=()=>{const n=He("colors"),e=He("spacing"),t=He("blur"),r=He("brightness"),s=He("borderColor"),i=He("borderRadius"),o=He("borderSpacing"),a=He("borderWidth"),c=He("contrast"),u=He("grayscale"),d=He("hueRotate"),h=He("invert"),f=He("gap"),p=He("gradientColorStops"),v=He("gradientColorStopPositions"),m=He("inset"),x=He("margin"),g=He("opacity"),w=He("padding"),b=He("saturate"),E=He("scale"),_=He("sepia"),k=He("skew"),P=He("space"),M=He("translate"),D=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",de,e],U=()=>[de,e],V=()=>["",hi,bo],$=()=>["auto",Nu,de],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",de],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Nu,de];return{cacheSize:500,separator:":",theme:{colors:[Wh],spacing:[hi,bo],blur:["none","",xo,de],brightness:L(),borderColor:[n],borderRadius:["none","","full",xo,de],borderSpacing:U(),borderWidth:V(),contrast:L(),grayscale:R(),hueRotate:L(),invert:R(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[zj,bo],inset:j(),margin:j(),opacity:L(),padding:U(),saturate:L(),scale:L(),sepia:R(),skew:L(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[xo]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),de]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gh,de]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Gh,de]}],"grid-cols":[{"grid-cols":[Wh]}],"col-start-end":[{col:["auto",{span:["full",Gh,de]},de]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Wh]}],"row-start-end":[{row:["auto",{span:[Gh,de]},de]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[xo]},xo]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xo,bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fw]}],"font-family":[{font:[Wh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",Nu,Fw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hi,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hi,bo]}],"underline-offset":[{"underline-offset":["auto",hi,de]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),Gj]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Vj]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Kj]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[hi,de]}],"outline-w":[{outline:[hi,bo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[hi,bo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",xo,Xj]}],"shadow-color":[{shadow:[Wh]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xo,de]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Gh,de]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[hi,bo,Fw]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Zj=Lj(Jj);function st(...n){return Zj(qP(n))}const eB=aj,rR=T.forwardRef(({className:n,...e},t)=>S.jsx(zP,{ref:t,className:st("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));rR.displayName=zP.displayName;const tB=YP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sR=T.forwardRef(({className:n,variant:e,...t},r)=>S.jsx(HP,{ref:r,className:st(tB({variant:e}),n),...t}));sR.displayName=HP.displayName;const nB=T.forwardRef(({className:n,...e},t)=>S.jsx(WP,{ref:t,className:st("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));nB.displayName=WP.displayName;const iR=T.forwardRef(({className:n,...e},t)=>S.jsx(KP,{ref:t,className:st("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:S.jsx(bj,{className:"h-4 w-4"})}));iR.displayName=KP.displayName;const oR=T.forwardRef(({className:n,...e},t)=>S.jsx(VP,{ref:t,className:st("text-sm font-semibold",n),...e}));oR.displayName=VP.displayName;const aR=T.forwardRef(({className:n,...e},t)=>S.jsx(GP,{ref:t,className:st("text-sm opacity-90",n),...e}));aR.displayName=GP.displayName;function rB(){const{toasts:n}=wF();return S.jsxs(eB,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return S.jsxs(sR,{...i,children:[S.jsxs("div",{className:"grid gap-1",children:[t&&S.jsx(oR,{children:t}),r&&S.jsx(aR,{children:r})]}),s,S.jsx(iR,{})]},e)}),S.jsx(rR,{})]})}var sB=nT[" useId ".trim().toString()]||(()=>{}),iB=0;function ax(n){const[e,t]=T.useState(sB());return Ha(()=>{t(r=>r??String(iB++))},[n]),e?`radix-${e}`:""}const oB=["top","right","bottom","left"],Va=Math.min,pr=Math.max,Av=Math.round,Dg=Math.floor,ii=n=>({x:n,y:n}),aB={left:"right",right:"left",bottom:"top",top:"bottom"},lB={start:"end",end:"start"};function lx(n,e,t){return pr(n,Va(e,t))}function fo(n,e){return typeof n=="function"?n(e):n}function po(n){return n.split("-")[0]}function Lh(n){return n.split("-")[1]}function sA(n){return n==="x"?"y":"x"}function iA(n){return n==="y"?"height":"width"}function Ga(n){return["top","bottom"].includes(po(n))?"y":"x"}function oA(n){return sA(Ga(n))}function cB(n,e,t){t===void 0&&(t=!1);const r=Lh(n),s=oA(n),i=iA(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Ev(o)),[o,Ev(o)]}function uB(n){const e=Ev(n);return[cx(n),e,cx(e)]}function cx(n){return n.replace(/start|end/g,e=>lB[e])}function dB(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function hB(n,e,t,r){const s=Lh(n);let i=dB(po(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cx)))),i}function Ev(n){return n.replace(/left|right|bottom|top/g,e=>aB[e])}function fB(n){return{top:0,right:0,bottom:0,left:0,...n}}function lR(n){return typeof n!="number"?fB(n):{top:n,right:n,bottom:n,left:n}}function Cv(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function DC(n,e,t){let{reference:r,floating:s}=n;const i=Ga(e),o=oA(e),a=iA(o),c=po(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Lh(e)){case"start":p[o]-=f*(t&&u?-1:1);break;case"end":p[o]+=f*(t&&u?-1:1);break}return p}const pB=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:d,y:h}=DC(u,r,c),f=r,p={},v=0;for(let m=0;m<a.length;m++){const{name:x,fn:g}=a[m],{x:w,y:b,data:E,reset:_}=await g({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:n,floating:e}});d=w??d,h=b??h,p={...p,[x]:{...p[x],...E}},_&&v<=50&&(v++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):_.rects),{x:d,y:h}=DC(u,f,c)),m=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function np(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=fo(e,n),v=lR(p),x=a[f?h==="floating"?"reference":"floating":h],g=Cv(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(x)))==null||t?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),w=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Cv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:c}):w);return{top:(g.top-_.top+v.top)/E.y,bottom:(_.bottom-g.bottom+v.bottom)/E.y,left:(g.left-_.left+v.left)/E.x,right:(_.right-g.right+v.right)/E.x}}const mB=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=fo(n,e)||{};if(u==null)return{};const h=lR(d),f={x:t,y:r},p=oA(s),v=iA(p),m=await o.getDimensions(u),x=p==="y",g=x?"top":"left",w=x?"bottom":"right",b=x?"clientHeight":"clientWidth",E=i.reference[v]+i.reference[p]-f[p]-i.floating[v],_=f[p]-i.reference[p],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=k?k[b]:0;(!P||!await(o.isElement==null?void 0:o.isElement(k)))&&(P=a.floating[b]||i.floating[v]);const M=E/2-_/2,D=P/2-m[v]/2-1,O=Va(h[g],D),j=Va(h[w],D),U=O,V=P-m[v]-j,$=P/2-m[v]/2+M,X=lx(U,$,V),H=!c.arrow&&Lh(s)!=null&&$!==X&&i.reference[v]/2-($<U?O:j)-m[v]/2<0,B=H?$<U?$-U:$-V:0;return{[p]:f[p]+B,data:{[p]:X,centerOffset:$-X-B,...H&&{alignmentOffset:B}},reset:H}}}),gB=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...x}=fo(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const g=po(s),w=Ga(a),b=po(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=f||(b||!m?[Ev(a)]:uB(a)),k=v!=="none";!f&&k&&_.push(...hB(a,m,v,E));const P=[a,..._],M=await np(e,x),D=[];let O=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&D.push(M[g]),h){const $=cB(s,o,E);D.push(M[$[0]],M[$[1]])}if(O=[...O,{placement:s,overflows:D}],!D.every($=>$<=0)){var j,U;const $=(((j=i.flip)==null?void 0:j.index)||0)+1,X=P[$];if(X)return{data:{index:$,overflows:O},reset:{placement:X}};let H=(U=O.filter(B=>B.overflows[0]<=0).sort((B,N)=>B.overflows[1]-N.overflows[1])[0])==null?void 0:U.placement;if(!H)switch(p){case"bestFit":{var V;const B=(V=O.filter(N=>{if(k){const R=Ga(N.placement);return R===w||R==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(R=>R>0).reduce((R,I)=>R+I,0)]).sort((N,R)=>N[1]-R[1])[0])==null?void 0:V[0];B&&(H=B);break}case"initialPlacement":H=a;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function OC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function FC(n){return oB.some(e=>n[e]>=0)}const yB=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=fo(n,e);switch(r){case"referenceHidden":{const i=await np(e,{...s,elementContext:"reference"}),o=OC(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:FC(o)}}}case"escaped":{const i=await np(e,{...s,altBoundary:!0}),o=OC(i,t.floating);return{data:{escapedOffsets:o,escaped:FC(o)}}}default:return{}}}}};async function vB(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=po(t),a=Lh(t),c=Ga(t)==="y",u=["left","top"].includes(o)?-1:1,d=i&&c?-1:1,h=fo(e,n);let{mainAxis:f,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const wB=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await vB(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},bB=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:g,y:w}=x;return{x:g,y:w}}},...c}=fo(n,e),u={x:t,y:r},d=await np(e,c),h=Ga(po(s)),f=sA(h);let p=u[f],v=u[h];if(i){const x=f==="y"?"top":"left",g=f==="y"?"bottom":"right",w=p+d[x],b=p-d[g];p=lx(w,p,b)}if(o){const x=h==="y"?"top":"left",g=h==="y"?"bottom":"right",w=v+d[x],b=v-d[g];v=lx(w,v,b)}const m=a.fn({...e,[f]:p,[h]:v});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[f]:i,[h]:o}}}}}},xB=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=fo(n,e),d={x:t,y:r},h=Ga(s),f=sA(h);let p=d[f],v=d[h];const m=fo(a,e),x=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const b=f==="y"?"height":"width",E=i.reference[f]-i.floating[b]+x.mainAxis,_=i.reference[f]+i.reference[b]-x.mainAxis;p<E?p=E:p>_&&(p=_)}if(u){var g,w;const b=f==="y"?"width":"height",E=["top","left"].includes(po(s)),_=i.reference[h]-i.floating[b]+(E&&((g=o.offset)==null?void 0:g[h])||0)+(E?0:x.crossAxis),k=i.reference[h]+i.reference[b]+(E?0:((w=o.offset)==null?void 0:w[h])||0)-(E?x.crossAxis:0);v<_?v=_:v>k&&(v=k)}return{[f]:p,[h]:v}}}},SB=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=fo(n,e),d=await np(e,u),h=po(s),f=Lh(s),p=Ga(s)==="y",{width:v,height:m}=i.floating;let x,g;h==="top"||h==="bottom"?(x=h,g=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,x=f==="end"?"top":"bottom");const w=m-d.top-d.bottom,b=v-d.left-d.right,E=Va(m-d[x],w),_=Va(v-d[g],b),k=!e.middlewareData.shift;let P=E,M=_;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(M=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=w),k&&!f){const O=pr(d.left,0),j=pr(d.right,0),U=pr(d.top,0),V=pr(d.bottom,0);p?M=v-2*(O!==0||j!==0?O+j:pr(d.left,d.right)):P=m-2*(U!==0||V!==0?U+V:pr(d.top,d.bottom))}await c({...e,availableWidth:M,availableHeight:P});const D=await o.getDimensions(a.floating);return v!==D.width||m!==D.height?{reset:{rects:!0}}:{}}}};function I0(){return typeof window<"u"}function Dh(n){return cR(n)?(n.nodeName||"").toLowerCase():"#document"}function vr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ci(n){var e;return(e=(cR(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function cR(n){return I0()?n instanceof Node||n instanceof vr(n).Node:!1}function vs(n){return I0()?n instanceof Element||n instanceof vr(n).Element:!1}function oi(n){return I0()?n instanceof HTMLElement||n instanceof vr(n).HTMLElement:!1}function jC(n){return!I0()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof vr(n).ShadowRoot}function tg(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=ws(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function AB(n){return["table","td","th"].includes(Dh(n))}function L0(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function aA(n){const e=lA(),t=vs(n)?ws(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function EB(n){let e=Wa(n);for(;oi(e)&&!Eh(e);){if(aA(e))return e;if(L0(e))return null;e=Wa(e)}return null}function lA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Eh(n){return["html","body","#document"].includes(Dh(n))}function ws(n){return vr(n).getComputedStyle(n)}function D0(n){return vs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Wa(n){if(Dh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||jC(n)&&n.host||ci(n);return jC(e)?e.host:e}function uR(n){const e=Wa(n);return Eh(e)?n.ownerDocument?n.ownerDocument.body:n.body:oi(e)&&tg(e)?e:uR(e)}function rp(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=uR(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=vr(s);if(i){const a=ux(o);return e.concat(o,o.visualViewport||[],tg(s)?s:[],a&&t?rp(a):[])}return e.concat(s,rp(s,[],t))}function ux(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function dR(n){const e=ws(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=oi(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=Av(t)!==i||Av(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function cA(n){return vs(n)?n:n.contextElement}function Iu(n){const e=cA(n);if(!oi(e))return ii(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=dR(e);let o=(i?Av(t.width):t.width)/r,a=(i?Av(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const CB=ii(0);function hR(n){const e=vr(n);return!lA()||!e.visualViewport?CB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _B(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==vr(n)?!1:e}function Oc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=cA(n);let o=ii(1);e&&(r?vs(r)&&(o=Iu(r)):o=Iu(n));const a=_B(i,t,r)?hR(i):ii(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=vr(i),p=r&&vs(r)?vr(r):r;let v=f,m=ux(v);for(;m&&r&&p!==v;){const x=Iu(m),g=m.getBoundingClientRect(),w=ws(m),b=g.left+(m.clientLeft+parseFloat(w.paddingLeft))*x.x,E=g.top+(m.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=b,u+=E,v=vr(m),m=ux(v)}}return Cv({width:d,height:h,x:c,y:u})}function uA(n,e){const t=D0(n).scrollLeft;return e?e.left+t:Oc(ci(n)).left+t}function fR(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:uA(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function TB(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=ci(r),a=e?L0(e.floating):!1;if(r===o||a&&i)return t;let c={scrollLeft:0,scrollTop:0},u=ii(1);const d=ii(0),h=oi(r);if((h||!h&&!i)&&((Dh(r)!=="body"||tg(o))&&(c=D0(r)),oi(r))){const p=Oc(r);u=Iu(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?fR(o,c,!0):ii(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:t.y*u.y-c.scrollTop*u.y+d.y+f.y}}function kB(n){return Array.from(n.getClientRects())}function PB(n){const e=ci(n),t=D0(n),r=n.ownerDocument.body,s=pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+uA(n);const a=-t.scrollTop;return ws(r).direction==="rtl"&&(o+=pr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function RB(n,e){const t=vr(n),r=ci(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=lA();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function MB(n,e){const t=Oc(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=oi(n)?Iu(n):ii(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function BC(n,e,t){let r;if(e==="viewport")r=RB(n,t);else if(e==="document")r=PB(ci(n));else if(vs(e))r=MB(e,t);else{const s=hR(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Cv(r)}function pR(n,e){const t=Wa(n);return t===e||!vs(t)||Eh(t)?!1:ws(t).position==="fixed"||pR(t,e)}function NB(n,e){const t=e.get(n);if(t)return t;let r=rp(n,[],!1).filter(a=>vs(a)&&Dh(a)!=="body"),s=null;const i=ws(n).position==="fixed";let o=i?Wa(n):n;for(;vs(o)&&!Eh(o);){const a=ws(o),c=aA(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||tg(o)&&!c&&pR(n,o))?r=r.filter(d=>d!==o):s=a,o=Wa(o)}return e.set(n,r),r}function IB(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?L0(e)?[]:NB(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,d)=>{const h=BC(e,d,s);return u.top=pr(h.top,u.top),u.right=Va(h.right,u.right),u.bottom=Va(h.bottom,u.bottom),u.left=pr(h.left,u.left),u},BC(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function LB(n){const{width:e,height:t}=dR(n);return{width:e,height:t}}function DB(n,e,t){const r=oi(e),s=ci(e),i=t==="fixed",o=Oc(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=ii(0);if(r||!r&&!i)if((Dh(e)!=="body"||tg(s))&&(a=D0(e)),r){const f=Oc(e,!0,i,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else s&&(c.x=uA(s));const u=s&&!r&&!i?fR(s,a):ii(0),d=o.left+a.scrollLeft-c.x-u.x,h=o.top+a.scrollTop-c.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function jw(n){return ws(n).position==="static"}function UC(n,e){if(!oi(n)||ws(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ci(n)===t&&(t=t.ownerDocument.body),t}function mR(n,e){const t=vr(n);if(L0(n))return t;if(!oi(n)){let s=Wa(n);for(;s&&!Eh(s);){if(vs(s)&&!jw(s))return s;s=Wa(s)}return t}let r=UC(n,e);for(;r&&AB(r)&&jw(r);)r=UC(r,e);return r&&Eh(r)&&jw(r)&&!aA(r)?t:r||EB(n)||t}const OB=async function(n){const e=this.getOffsetParent||mR,t=this.getDimensions,r=await t(n.floating);return{reference:DB(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function FB(n){return ws(n).direction==="rtl"}const jB={convertOffsetParentRelativeRectToViewportRelativeRect:TB,getDocumentElement:ci,getClippingRect:IB,getOffsetParent:mR,getElementRects:OB,getClientRects:kB,getDimensions:LB,getScale:Iu,isElement:vs,isRTL:FB};function gR(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function BB(n,e){let t=null,r;const s=ci(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=n.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const v=Dg(h),m=Dg(s.clientWidth-(d+f)),x=Dg(s.clientHeight-(h+p)),g=Dg(d),b={rootMargin:-v+"px "+-m+"px "+-x+"px "+-g+"px",threshold:pr(0,Va(1,c))||1};let E=!0;function _(k){const P=k[0].intersectionRatio;if(P!==c){if(!E)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!gR(u,n.getBoundingClientRect())&&o(),E=!1}try{t=new IntersectionObserver(_,{...b,root:s.ownerDocument})}catch{t=new IntersectionObserver(_,b)}t.observe(n)}return o(!0),i}function UB(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=cA(n),d=s||i?[...u?rp(u):[],...rp(e)]:[];d.forEach(g=>{s&&g.addEventListener("scroll",t,{passive:!0}),i&&g.addEventListener("resize",t)});const h=u&&a?BB(u,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(g=>{let[w]=g;w&&w.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),t()}),u&&!c&&p.observe(u),p.observe(e));let v,m=c?Oc(n):null;c&&x();function x(){const g=Oc(n);m&&!gR(m,g)&&t(),m=g,v=requestAnimationFrame(x)}return t(),()=>{var g;d.forEach(w=>{s&&w.removeEventListener("scroll",t),i&&w.removeEventListener("resize",t)}),h==null||h(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const $B=wB,zB=bB,HB=gB,VB=SB,GB=yB,$C=mB,WB=xB,KB=(n,e,t)=>{const r=new Map,s={platform:jB,...t},i={...s.platform,_c:r};return pB(n,e,{...s,platform:i})};var py=typeof document<"u"?T.useLayoutEffect:T.useEffect;function _v(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!_v(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!_v(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function yR(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function zC(n,e){const t=yR(n);return Math.round(e*t)/t}function Bw(n){const e=T.useRef(n);return py(()=>{e.current=n}),e}function XB(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[d,h]=T.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=T.useState(r);_v(f,r)||p(r);const[v,m]=T.useState(null),[x,g]=T.useState(null),w=T.useCallback(N=>{N!==k.current&&(k.current=N,m(N))},[]),b=T.useCallback(N=>{N!==P.current&&(P.current=N,g(N))},[]),E=i||v,_=o||x,k=T.useRef(null),P=T.useRef(null),M=T.useRef(d),D=c!=null,O=Bw(c),j=Bw(s),U=Bw(u),V=T.useCallback(()=>{if(!k.current||!P.current)return;const N={placement:e,strategy:t,middleware:f};j.current&&(N.platform=j.current),KB(k.current,P.current,N).then(R=>{const I={...R,isPositioned:U.current!==!1};$.current&&!_v(M.current,I)&&(M.current=I,Zm.flushSync(()=>{h(I)}))})},[f,e,t,j,U]);py(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(N=>({...N,isPositioned:!1})))},[u]);const $=T.useRef(!1);py(()=>($.current=!0,()=>{$.current=!1}),[]),py(()=>{if(E&&(k.current=E),_&&(P.current=_),E&&_){if(O.current)return O.current(E,_,V);V()}},[E,_,V,O,D]);const X=T.useMemo(()=>({reference:k,floating:P,setReference:w,setFloating:b}),[w,b]),H=T.useMemo(()=>({reference:E,floating:_}),[E,_]),B=T.useMemo(()=>{const N={position:t,left:0,top:0};if(!H.floating)return N;const R=zC(H.floating,d.x),I=zC(H.floating,d.y);return a?{...N,transform:"translate("+R+"px, "+I+"px)",...yR(H.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:R,top:I}},[t,a,H.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:V,refs:X,elements:H,floatingStyles:B}),[d,V,X,H,B])}const qB=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?$C({element:r.current,padding:s}).fn(t):{}:r?$C({element:r,padding:s}).fn(t):{}}}},YB=(n,e)=>({...$B(n),options:[n,e]}),QB=(n,e)=>({...zB(n),options:[n,e]}),JB=(n,e)=>({...WB(n),options:[n,e]}),ZB=(n,e)=>({...HB(n),options:[n,e]}),e3=(n,e)=>({...VB(n),options:[n,e]}),t3=(n,e)=>({...GB(n),options:[n,e]}),n3=(n,e)=>({...qB(n),options:[n,e]});var r3="Arrow",vR=T.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return S.jsx(rt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});vR.displayName=r3;var s3=vR;function i3(n){const[e,t]=T.useState(void 0);return Ha(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var dA="Popper",[wR,O0]=zc(dA),[o3,bR]=wR(dA),xR=n=>{const{__scopePopper:e,children:t}=n,[r,s]=T.useState(null);return S.jsx(o3,{scope:e,anchor:r,onAnchorChange:s,children:t})};xR.displayName=dA;var SR="PopperAnchor",AR=T.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=bR(SR,t),o=T.useRef(null),a=Bt(e,o);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:S.jsx(rt.div,{...s,ref:a})});AR.displayName=SR;var hA="PopperContent",[a3,l3]=wR(hA),ER=T.forwardRef((n,e)=>{var Y,ge,Ae,_e,Be,Zt;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:v,...m}=n,x=bR(hA,t),[g,w]=T.useState(null),b=Bt(e,Gn=>w(Gn)),[E,_]=T.useState(null),k=i3(E),P=(k==null?void 0:k.width)??0,M=(k==null?void 0:k.height)??0,D=r+(i!=="center"?"-"+i:""),O=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],U=j.length>0,V={padding:O,boundary:j.filter(u3),altBoundary:U},{refs:$,floatingStyles:X,placement:H,isPositioned:B,middlewareData:N}=XB({strategy:"fixed",placement:D,whileElementsMounted:(...Gn)=>UB(...Gn,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[YB({mainAxis:s+M,alignmentAxis:o}),c&&QB({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?JB():void 0,...V}),c&&ZB({...V}),e3({...V,apply:({elements:Gn,rects:vo,availableWidth:it,availableHeight:fg})=>{const{width:ew,height:tw}=vo.reference,Xc=Gn.floating.style;Xc.setProperty("--radix-popper-available-width",`${it}px`),Xc.setProperty("--radix-popper-available-height",`${fg}px`),Xc.setProperty("--radix-popper-anchor-width",`${ew}px`),Xc.setProperty("--radix-popper-anchor-height",`${tw}px`)}}),E&&n3({element:E,padding:a}),d3({arrowWidth:P,arrowHeight:M}),f&&t3({strategy:"referenceHidden",...V})]}),[R,I]=TR(H),L=_n(v);Ha(()=>{B&&(L==null||L())},[B,L]);const F=(Y=N.arrow)==null?void 0:Y.x,z=(ge=N.arrow)==null?void 0:ge.y,K=((Ae=N.arrow)==null?void 0:Ae.centerOffset)!==0,[re,se]=T.useState();return Ha(()=>{g&&se(window.getComputedStyle(g).zIndex)},[g]),S.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:B?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(_e=N.transformOrigin)==null?void 0:_e.x,(Be=N.transformOrigin)==null?void 0:Be.y].join(" "),...((Zt=N.hide)==null?void 0:Zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:S.jsx(a3,{scope:t,placedSide:R,onArrowChange:_,arrowX:F,arrowY:z,shouldHideArrow:K,children:S.jsx(rt.div,{"data-side":R,"data-align":I,...m,ref:b,style:{...m.style,animation:B?void 0:"none"}})})})});ER.displayName=hA;var CR="PopperArrow",c3={top:"bottom",right:"left",bottom:"top",left:"right"},_R=T.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=l3(CR,r),o=c3[i.placedSide];return S.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:S.jsx(s3,{...s,ref:t,style:{...s.style,display:"block"}})})});_R.displayName=CR;function u3(n){return n!==null}var d3=n=>({name:"transformOrigin",options:n,fn(e){var x,g,w;const{placement:t,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,d]=TR(t),h={start:"0%",center:"50%",end:"100%"}[d],f=(((g=s.arrow)==null?void 0:g.x)??0)+a/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let v="",m="";return u==="bottom"?(v=o?h:`${f}px`,m=`${-c}px`):u==="top"?(v=o?h:`${f}px`,m=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,m=o?h:`${p}px`):u==="left"&&(v=`${r.floating.width+c}px`,m=o?h:`${p}px`),{data:{x:v,y:m}}}});function TR(n){const[e,t="center"]=n.split("-");return[e,t]}var h3=xR,kR=AR,PR=ER,RR=_R,[F0,S6]=zc("Tooltip",[O0]),fA=O0(),MR="TooltipProvider",f3=700,HC="tooltip.open",[p3,NR]=F0(MR),IR=n=>{const{__scopeTooltip:e,delayDuration:t=f3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,o=T.useRef(!0),a=T.useRef(!1),c=T.useRef(0);return T.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),S.jsx(p3,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:T.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:T.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};IR.displayName=MR;var LR="Tooltip",[A6,j0]=F0(LR),dx="TooltipTrigger",m3=T.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=j0(dx,t),i=NR(dx,t),o=fA(t),a=T.useRef(null),c=Bt(e,a,s.onTriggerChange),u=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>u.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),S.jsx(kR,{asChild:!0,...o,children:S.jsx(rt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:oe(n.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:oe(n.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:oe(n.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:oe(n.onFocus,()=>{u.current||s.onOpen()}),onBlur:oe(n.onBlur,s.onClose),onClick:oe(n.onClick,s.onClose)})})});m3.displayName=dx;var g3="TooltipPortal",[E6,y3]=F0(g3,{forceMount:void 0}),Ch="TooltipContent",DR=T.forwardRef((n,e)=>{const t=y3(Ch,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=j0(Ch,n.__scopeTooltip);return S.jsx(Hc,{present:r||o.open,children:o.disableHoverableContent?S.jsx(OR,{side:s,...i,ref:e}):S.jsx(v3,{side:s,...i,ref:e})})}),v3=T.forwardRef((n,e)=>{const t=j0(Ch,n.__scopeTooltip),r=NR(Ch,n.__scopeTooltip),s=T.useRef(null),i=Bt(e,s),[o,a]=T.useState(null),{trigger:c,onClose:u}=t,d=s.current,{onPointerInTransitChange:h}=r,f=T.useCallback(()=>{a(null),h(!1)},[h]),p=T.useCallback((v,m)=>{const x=v.currentTarget,g={x:v.clientX,y:v.clientY},w=A3(g,x.getBoundingClientRect()),b=E3(g,w),E=C3(m.getBoundingClientRect()),_=T3([...b,...E]);a(_),h(!0)},[h]);return T.useEffect(()=>()=>f(),[f]),T.useEffect(()=>{if(c&&d){const v=x=>p(x,d),m=x=>p(x,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",m)}}},[c,d,p,f]),T.useEffect(()=>{if(o){const v=m=>{const x=m.target,g={x:m.clientX,y:m.clientY},w=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),b=!_3(g,o);w?f():b&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),S.jsx(OR,{...n,ref:i})}),[w3,b3]=F0(LR,{isInside:!1}),x3=AF("TooltipContent"),OR=T.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,c=j0(Ch,t),u=fA(t),{onClose:d}=c;return T.useEffect(()=>(document.addEventListener(HC,d),()=>document.removeEventListener(HC,d)),[d]),T.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),S.jsx(P0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:S.jsxs(PR,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[S.jsx(x3,{children:r}),S.jsx(w3,{scope:t,isInside:!0,children:S.jsx(HF,{id:c.contentId,role:"tooltip",children:s||r})})]})})});DR.displayName=Ch;var FR="TooltipArrow",S3=T.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=fA(t);return b3(FR,t).isInside?null:S.jsx(RR,{...s,...r,ref:e})});S3.displayName=FR;function A3(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function E3(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function C3(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function _3(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,u=e[o].x,d=e[o].y;c>r!=d>r&&t<(u-a)*(r-c)/(d-c)+a&&(s=!s)}return s}function T3(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),k3(e)}function k3(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var P3=IR,jR=DR;const R3=P3,M3=T.forwardRef(({className:n,sideOffset:e=4,...t},r)=>S.jsx(jR,{ref:r,sideOffset:e,className:st("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));M3.displayName=jR.displayName;class N3 extends T.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error boundary caught error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:S.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:S.jsxs("div",{className:"max-w-md w-full p-6 border border-border rounded-xl bg-card",children:[S.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Something went wrong"}),S.jsx("p",{className:"text-muted-foreground mb-4",children:"The application encountered an unexpected error. Please refresh the page to continue."}),S.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground hover-elevate active-elevate-2","data-testid":"button-reload",children:"Reload Page"}),this.state.error&&S.jsxs("details",{className:"mt-4",children:[S.jsx("summary",{className:"cursor-pointer text-sm text-muted-foreground",children:"Error details"}),S.jsx("pre",{className:"mt-2 text-xs overflow-auto p-2 bg-muted/30 rounded",children:this.state.error.toString()})]})]})}):this.props.children}}function B0(){const[n]=jO();return S.jsx("header",{className:"sticky top-0 z-50 border-b",style:{backgroundColor:"hsl(228, 50%, 4%)"},children:S.jsxs("nav",{className:"mx-auto flex max-w-[1100px] items-center justify-center gap-7 px-4 py-3",children:[S.jsx(io,{href:"/",className:`nav-glow-hover text-primary ${n==="/"?"font-medium":""}`,"data-testid":"link-home",children:"Home"}),S.jsx(io,{href:"/institutions",className:`nav-glow-hover text-primary ${n==="/institutions"?"font-medium":""}`,"data-testid":"link-institutions",children:"Institutions"}),S.jsx(io,{href:"/chat?mode=tax",className:`nav-glow-hover text-primary ${n.startsWith("/chat")?"font-medium":""}`,"data-testid":"link-tax-returns",children:"Tax Returns"})]})})}const I3="/assets/mainlogo_1761854847320-DGwsmXaN.png";function pA({height:n,className:e=""}){return S.jsx("img",{src:I3,alt:"Verum Omnis",style:{height:`${n}px`,width:"auto"},className:e,"data-testid":"logo"})}const L3="/assets/logo2_1761854847446-Da952KdJ.png",D3="/assets/logo3_1761854847416-Bnu_mNfy.png";function Og(n,e=2e3,t=!1){const[r,s]=T.useState(0);return T.useEffect(()=>{if(!t)return;let i=null;const o=a=>{i||(i=a);const c=Math.min((a-i)/e,1);s(Math.floor(c*n)),c<1&&window.requestAnimationFrame(o)};window.requestAnimationFrame(o)},[n,e,t]),r}function VC(n=.1){const[e,t]=T.useState(!1),[r,s]=T.useState(!1),i=T.useRef(null);return T.useEffect(()=>{const o=new IntersectionObserver(([a])=>{const c=a.isIntersecting;t(c),c&&!r&&s(!0)},{threshold:n});return i.current&&o.observe(i.current),()=>{i.current&&o.unobserve(i.current)}},[n,r]),{ref:i,isInView:e,hasBeenInView:r}}function O3(){const[n,e]=T.useState(!1),t=VC(.3),r=VC(.2),s=Og(127493,2500,t.hasBeenInView),i=Og(892741,2500,t.hasBeenInView),o=Og(195,2e3,t.hasBeenInView),a=Og(99,1500,t.hasBeenInView);return T.useEffect(()=>{setTimeout(()=>e(!0),100)},[]),S.jsxs("div",{className:"min-h-screen bg-background overflow-x-hidden",children:[S.jsx(B0,{}),S.jsxs("main",{className:"relative",children:[S.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#0a0f1f] to-[#1a1f3a] animate-gradient-shift"}),S.jsxs("div",{className:"absolute inset-0 opacity-30",children:[S.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-blue-500 rounded-full filter blur-[128px] animate-pulse-slow"}),S.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-purple-500 rounded-full filter blur-[128px] animate-pulse-slow animation-delay-2000"}),S.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-accent/20 rounded-full filter blur-[200px] animate-breathe"})]}),S.jsx("div",{className:"absolute inset-0 opacity-50",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='grid' width='60' height='60' patternUnits='userSpaceOnUse'%3E%3Cpath d='M 60 0 L 0 0 0 60' fill='none' stroke='rgba(127,179,255,0.05)' stroke-width='1'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23grid)'/%3E%3C/svg%3E")`}}),S.jsxs("div",{className:`relative z-10 text-center px-4 py-20 max-w-7xl mx-auto transition-all duration-1000 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[S.jsx("div",{className:"flex justify-center mb-12 animate-fade-in-down animation-delay-200",children:S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 bg-accent/40 blur-[100px]"}),S.jsx(pA,{height:180})]})}),S.jsxs("div",{className:"space-y-4 mb-12",children:[S.jsx("h1",{className:"font-black text-foreground font-[family-name:var(--font-heading)] leading-none animate-fade-in-up animation-delay-400",style:{fontSize:"clamp(40px, 8vw, 80px)",letterSpacing:"0.08em"},"data-testid":"text-hero-title",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-white via-[#c5ddff] to-white animate-shimmer",children:"VERUM OMNIS"})}),S.jsx("p",{className:"font-bold text-accent/90 font-[family-name:var(--font-heading)] animate-fade-in-up animation-delay-600",style:{fontSize:"clamp(18px, 3vw, 28px)",letterSpacing:"0.12em"},"data-testid":"text-hero-subtitle",children:"FORENSIC AI"})]}),S.jsx("div",{className:"mb-12 animate-fade-in-up animation-delay-800",children:S.jsxs("div",{className:"inline-block relative",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/40 to-purple-500/40 blur-2xl animate-pulse-slow"}),S.jsxs("div",{className:"relative glass-panel-bright border-2 border-accent/50 rounded-2xl p-8 max-w-4xl mx-auto hover-elevate",children:[S.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[S.jsx(NC,{className:"w-8 h-8 text-accent animate-spin-slow"}),S.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white","data-testid":"text-historic-headline",children:"THE FIRST TIME IN HISTORY"}),S.jsx(NC,{className:"w-8 h-8 text-accent animate-spin-slow animation-delay-1000"})]}),S.jsx("p",{className:"text-xl md:text-2xl font-bold text-accent mb-2","data-testid":"text-historic-subheadline",children:"Everyone Has Access to Justice"}),S.jsx("p",{className:"text-4xl md:text-6xl font-black text-white animate-pulse-slow","data-testid":"text-historic-free",children:"FOR FREE"}),S.jsx("p",{className:"text-sm text-muted-foreground mt-4","data-testid":"text-historic-description",children:"No barriers. No cost. No exceptions. Professional-grade legal AI for all."})]})]})}),S.jsxs("div",{className:"flex justify-center gap-4 flex-wrap mb-16 animate-fade-in-up animation-delay-1000",children:[S.jsxs(io,{href:"/chat",className:"group inline-flex items-center gap-3 px-10 py-5 rounded-xl bg-gradient-to-r from-[#7fb3ff] to-[#a78bfa] text-white font-bold text-lg hover-elevate active-elevate-2 transition-all duration-300","data-testid":"button-hero-primary",children:[S.jsx("span",{children:"Launch Free Chat"}),S.jsx(_C,{className:"w-5 h-5"})]}),S.jsxs("button",{onClick:()=>{var c;return(c=document.getElementById("video"))==null?void 0:c.scrollIntoView({behavior:"smooth"})},className:"group inline-flex items-center gap-3 px-10 py-5 rounded-xl glass-panel-bright border border-white/20 text-white font-semibold text-lg hover-elevate active-elevate-2 transition-all duration-300","data-testid":"button-hero-secondary",children:[S.jsx(PC,{className:"w-5 h-5"}),S.jsx("span",{children:"Watch Demo"})]})]}),S.jsx("div",{className:"animate-bounce-slow",children:S.jsx(hj,{className:"w-8 h-8 text-muted mx-auto"})})]})]}),S.jsxs("section",{ref:t.ref,className:"relative py-24 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-accent/5 to-transparent"}),S.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4",children:[S.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-center text-foreground mb-16 font-[family-name:var(--font-heading)]","data-testid":"heading-impact",children:"Real Impact, Real Results"}),S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[S.jsxs("div",{className:`text-center space-y-2 transition-all duration-700 ${t.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[S.jsx(wj,{className:"w-12 h-12 text-accent mx-auto mb-4"}),S.jsx("p",{className:"text-5xl font-black text-white","data-testid":"stat-cases-helped",children:s.toLocaleString()}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Cases Helped"})]}),S.jsxs("div",{className:`text-center space-y-2 transition-all duration-700 delay-100 ${t.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[S.jsx(gj,{className:"w-12 h-12 text-accent mx-auto mb-4"}),S.jsx("p",{className:"text-5xl font-black text-white","data-testid":"stat-documents-sealed",children:i.toLocaleString()}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Documents Sealed"})]}),S.jsxs("div",{className:`text-center space-y-2 transition-all duration-700 delay-200 ${t.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[S.jsx(Ow,{className:"w-12 h-12 text-accent mx-auto mb-4"}),S.jsx("p",{className:"text-5xl font-black text-white","data-testid":"stat-jurisdictions",children:o}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Jurisdictions"})]}),S.jsxs("div",{className:`text-center space-y-2 transition-all duration-700 delay-300 ${t.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[S.jsx(RC,{className:"w-12 h-12 text-accent mx-auto mb-4"}),S.jsxs("p",{className:"text-5xl font-black text-white","data-testid":"stat-success-rate",children:[a,"%"]}),S.jsx("p",{className:"text-sm text-muted-foreground",children:"Success Rate"})]})]})]})]}),S.jsx("section",{id:"video",className:"relative py-24",children:S.jsx("div",{className:"max-w-6xl mx-auto px-4",children:S.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-2xl shadow-accent/20",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/20 to-purple-500/20 blur-3xl -z-10 scale-110"}),S.jsxs("div",{className:"relative group cursor-pointer",children:[S.jsxs("video",{className:"w-full block rounded-3xl",autoPlay:!0,muted:!0,playsInline:!0,loop:!0,"data-testid":"video-hero",children:[S.jsx("source",{src:"/assets/video/video-landing-page.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-3xl",children:S.jsx("div",{className:"w-20 h-20 rounded-full bg-white/90 flex items-center justify-center",children:S.jsx(PC,{className:"w-8 h-8 text-black ml-1"})})}),S.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/80 via-black/40 to-transparent",children:[S.jsx("h3",{className:"text-2xl font-bold text-white mb-2","data-testid":"text-video-title",children:"See Verum Omnis in Action"}),S.jsx("p",{className:"text-white/80","data-testid":"text-video-description",children:"Watch how our AI analyzes documents, detects contradictions, and creates court-ready evidence"})]})]})]})})}),S.jsx("section",{className:"relative py-24",children:S.jsx("div",{className:"max-w-6xl mx-auto px-4",children:S.jsxs("div",{className:"text-center space-y-6",children:[S.jsxs("h2",{className:"text-5xl md:text-6xl font-black text-foreground font-[family-name:var(--font-heading)]","data-testid":"heading-law-firm",children:[S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-accent to-purple-400",children:"Your Law Firm"}),S.jsx("br",{}),S.jsx("span",{className:"text-white",children:"In Your Pocket"})]}),S.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed","data-testid":"text-law-firm-description",children:"Everything happens in one chat. Upload full case files  PDFs, images, emails, audio. Verum Omnis detects contradictions, isolates timelines & pinpoints events with evidence."}),S.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-8",children:[S.jsx("div",{className:"glass-panel-bright px-6 py-3 rounded-full border border-accent/30",children:S.jsx("span",{className:"text-accent font-bold",children:"SHA-512 Secured"})}),S.jsx("div",{className:"glass-panel-bright px-6 py-3 rounded-full border border-accent/30",children:S.jsx("span",{className:"text-accent font-bold",children:"Forensic Seals"})}),S.jsx("div",{className:"glass-panel-bright px-6 py-3 rounded-full border border-accent/30",children:S.jsx("span",{className:"text-accent font-bold",children:"Blockchain Anchored"})})]}),S.jsxs("div",{className:"mt-12 p-8 glass-panel-bright rounded-2xl border-2 border-accent/30 max-w-2xl mx-auto hover-elevate",children:[S.jsx("p",{className:"text-2xl font-bold text-accent mb-2","data-testid":"text-free-for-citizens",children:"100% FREE for Private Citizens"}),S.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":"text-cost-and-institutions",children:["Funded by Global Justice Fund",S.jsx("br",{}),"Institutions can verify documents and access the Fraud Firewall"]})]})]})})}),S.jsx("section",{ref:r.ref,className:"relative py-24",children:S.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[S.jsx("h2",{className:"text-5xl md:text-6xl font-black text-center text-foreground mb-16 font-[family-name:var(--font-heading)]","data-testid":"heading-why-verum",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-white to-accent",children:"Why Verum Omnis?"})}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[S.jsxs("div",{className:`group relative overflow-visible rounded-2xl transition-all duration-700 hover-elevate ${r.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,"data-testid":"card-first-legal-ai",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),S.jsxs("div",{className:"glass-panel-bright p-8 h-full space-y-4",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:S.jsx(MC,{className:"w-8 h-8 text-accent"})}),S.jsx("h3",{className:"text-2xl font-bold text-foreground","data-testid":"heading-first-legal-ai",children:"World's First Legal AI"})]}),S.jsxs("ul",{className:"space-y-3 text-muted-foreground",children:[S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-pioneering-technology",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Pioneering Technology:"})," The first AI legally validated to stand in court"]})]}),S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-admitted-evidence",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Admitted Evidence:"})," UAE, SAPS, Southbridge Legal"]})]}),S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-court-ready",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Court Ready:"})," Forensic admissibility in multiple jurisdictions"]})]})]})]})]}),S.jsxs("div",{className:`group relative overflow-visible rounded-2xl transition-all duration-700 delay-100 hover-elevate ${r.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,"data-testid":"card-100-free",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),S.jsxs("div",{className:"glass-panel-bright p-8 h-full space-y-4 border-2 border-accent/30",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:S.jsx(xj,{className:"w-8 h-8 text-accent"})}),S.jsx("h3",{className:"text-2xl font-bold text-foreground","data-testid":"heading-100-free",children:"100% Free Forever"})]}),S.jsxs("ul",{className:"space-y-3 text-muted-foreground",children:[S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-historic-first",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-accent",children:"Historic First:"})," Professional legal protection completely free"]})]}),S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-no-cost-barriers",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"No Barriers:"})," Every citizen gets forensic protection"]})]}),S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-universal-access",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Universal Access:"})," No subscription, no hidden costs"]})]})]})]})]}),S.jsxs("div",{className:`group relative overflow-visible rounded-2xl transition-all duration-700 delay-200 hover-elevate ${r.hasBeenInView?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,"data-testid":"card-how-works",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),S.jsxs("div",{className:"glass-panel-bright p-8 h-full space-y-4",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"p-3 rounded-xl bg-accent/20",children:S.jsx(Ow,{className:"w-8 h-8 text-accent"})}),S.jsx("h3",{className:"text-2xl font-bold text-foreground","data-testid":"heading-how-it-works",children:"How It Works"})]}),S.jsxs("ul",{className:"space-y-3 text-muted-foreground",children:[S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-contradiction-engine",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Contradiction Engine:"})," Detects inconsistencies instantly"]})]}),S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-triple-verification",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Triple Verification:"})," Blockchain-anchored proofs"]})]}),S.jsxs("li",{className:"flex items-start gap-2","data-testid":"list-item-chat-workflow",children:[S.jsx(di,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),S.jsxs("span",{children:[S.jsx("strong",{className:"text-white",children:"Simple Chat:"})," Upload docs, get legal reports"]})]})]})]})]})]})]})}),S.jsx("section",{className:"relative py-24 bg-gradient-to-b from-transparent via-accent/5 to-transparent",children:S.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[S.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-center text-white mb-16 font-[family-name:var(--font-heading)]","data-testid":"heading-trusted-by",children:"Trusted by Courts & Institutions Worldwide"}),S.jsxs("div",{className:"flex flex-wrap justify-center gap-8 mb-16",children:[S.jsxs("div",{className:"glass-panel-bright rounded-2xl px-8 py-6 flex items-center gap-3 border border-accent/30 hover-elevate",children:[S.jsx(MC,{className:"w-8 h-8 text-accent"}),S.jsxs("div",{children:[S.jsx("p",{className:"font-bold text-white",children:"SHA-512 Secured"}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Military-grade encryption"})]})]}),S.jsxs("div",{className:"glass-panel-bright rounded-2xl px-8 py-6 flex items-center gap-3 border border-accent/30 hover-elevate",children:[S.jsx(kC,{className:"w-8 h-8 text-accent"}),S.jsxs("div",{children:[S.jsx("p",{className:"font-bold text-white",children:"Blockchain Anchored"}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Tamper-proof records"})]})]}),S.jsxs("div",{className:"glass-panel-bright rounded-2xl px-8 py-6 flex items-center gap-3 border border-accent/30 hover-elevate",children:[S.jsx(RC,{className:"w-8 h-8 text-accent"}),S.jsxs("div",{children:[S.jsx("p",{className:"font-bold text-white",children:"Court Admissible"}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Legally validated evidence"})]})]})]}),S.jsxs("div",{className:"flex flex-wrap justify-center gap-12 mb-16",children:[S.jsx("div",{className:"glass-panel-bright rounded-2xl p-6 border border-accent/30 hover-elevate",children:S.jsx("img",{src:L3,alt:"Verum Omnis Official Certification",className:"h-24 w-auto","data-testid":"certification-seal-1"})}),S.jsx("div",{className:"glass-panel-bright rounded-2xl p-6 border border-accent/30 hover-elevate",children:S.jsx("img",{src:D3,alt:"Verum Omnis Guardianship Charter",className:"h-24 w-auto","data-testid":"certification-seal-2"})})]}),S.jsxs("div",{className:"text-center mb-12",children:[S.jsx("p",{className:"text-sm text-muted-foreground mb-6 uppercase tracking-wider",children:"Accepted Evidence In"}),S.jsxs("div",{className:"flex flex-wrap justify-center gap-12 items-center",children:[S.jsx("div",{className:"text-white font-bold text-xl opacity-70 hover:opacity-100 transition-opacity",children:"UAE Courts"}),S.jsx("div",{className:"text-white font-bold text-xl opacity-70 hover:opacity-100 transition-opacity",children:"SAPS South Africa"}),S.jsx("div",{className:"text-white font-bold text-xl opacity-70 hover:opacity-100 transition-opacity",children:"Southbridge Legal"}),S.jsx("div",{className:"text-white font-bold text-xl opacity-70 hover:opacity-100 transition-opacity",children:"RAKEZ #1295911"})]})]}),S.jsx("div",{className:"relative overflow-hidden rounded-2xl glass-panel-bright p-8 border border-accent/20",children:S.jsxs("div",{className:"flex animate-scroll-testimonials",children:[S.jsxs("div",{className:"flex gap-8 pr-8",children:[S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:`"Verum Omnis helped me prove my innocence with court-ready evidence that couldn't be disputed."`}),S.jsx("p",{className:"text-sm text-accent",children:"- Sarah M., Private Citizen"})]}),S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:'"The contradiction detection saved our company millions by exposing fraudulent documents."'}),S.jsx("p",{className:"text-sm text-accent",children:"- David L., Corporate Legal"})]}),S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:`"Finally, legal protection that's actually accessible to everyone, not just the wealthy."`}),S.jsx("p",{className:"text-sm text-accent",children:"- Maria G., Community Advocate"})]}),S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:'"The forensic sealing feature gave me peace of mind knowing my documents are tamper-proof."'}),S.jsx("p",{className:"text-sm text-accent",children:"- James K., Business Owner"})]})]}),S.jsxs("div",{className:"flex gap-8 pr-8",children:[S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:`"Verum Omnis helped me prove my innocence with court-ready evidence that couldn't be disputed."`}),S.jsx("p",{className:"text-sm text-accent",children:"- Sarah M., Private Citizen"})]}),S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:'"The contradiction detection saved our company millions by exposing fraudulent documents."'}),S.jsx("p",{className:"text-sm text-accent",children:"- David L., Corporate Legal"})]}),S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:`"Finally, legal protection that's actually accessible to everyone, not just the wealthy."`}),S.jsx("p",{className:"text-sm text-accent",children:"- Maria G., Community Advocate"})]}),S.jsxs("div",{className:"min-w-[400px] text-center",children:[S.jsx("p",{className:"italic text-white mb-4",children:'"The forensic sealing feature gave me peace of mind knowing my documents are tamper-proof."'}),S.jsx("p",{className:"text-sm text-accent",children:"- James K., Business Owner"})]})]})]})})]})}),S.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-24 space-y-32",children:[S.jsxs("section",{className:"glass-panel-bright rounded-3xl p-12 space-y-6 border-2 border-accent/20","data-testid":"section-institutions",children:[S.jsx("h2",{className:"text-3xl font-bold text-center text-foreground font-[family-name:var(--font-heading)]","data-testid":"heading-institutions",children:"For Institutions & Businesses"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-muted-foreground",children:[S.jsxs("div",{className:"text-center","data-testid":"text-verify-omnis-seals",children:[S.jsx("div",{className:"p-4 rounded-2xl bg-accent/10 inline-block mb-4",children:S.jsx(TC,{className:"w-8 h-8 text-accent"})}),S.jsxs("p",{children:[S.jsx("strong",{className:"text-foreground block mb-1",children:"Verify Omnis Seals"}),"Extract tamper-proof evidence for court use"]})]}),S.jsxs("div",{className:"text-center","data-testid":"text-fraud-firewall",children:[S.jsx("div",{className:"p-4 rounded-2xl bg-accent/10 inline-block mb-4",children:S.jsx(kC,{className:"w-8 h-8 text-accent"})}),S.jsxs("p",{children:[S.jsx("strong",{className:"text-foreground block mb-1",children:"Fraud Firewall"}),"Free protocol stops fraud at point of input"]})]}),S.jsxs("div",{className:"text-center","data-testid":"text-global-pricing",children:[S.jsx("div",{className:"p-4 rounded-2xl bg-accent/10 inline-block mb-4",children:S.jsx(Ow,{className:"w-8 h-8 text-accent"})}),S.jsxs("p",{children:[S.jsx("strong",{className:"text-foreground block mb-1",children:"Global Pricing"}),"20% of fraud prevented, free trials available"]})]})]})]}),S.jsxs("section",{className:"text-center space-y-8","data-testid":"section-mission",children:[S.jsx("h2",{className:"text-5xl md:text-6xl font-black text-foreground font-[family-name:var(--font-heading)]","data-testid":"heading-mission",children:S.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-white to-accent",children:"Our Mission"})}),S.jsx("blockquote",{className:"text-2xl italic text-muted-foreground max-w-4xl mx-auto","data-testid":"text-mission-quote",children:'"Truth can be encoded. Fraud can be stopped. Justice can be democratized."'}),S.jsx("p",{className:"text-sm text-muted","data-testid":"text-mission-author",children:" Liam Highcock, Founder & Artificial Co-Founder"}),S.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto","data-testid":"text-mission-statement",children:"Verum Omnis was built to end deception, empower citizens, and rebuild trust. It belongs to the people."}),S.jsxs("div",{className:"mt-12 relative inline-block",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent/40 to-purple-500/40 blur-3xl"}),S.jsx("div",{className:"relative glass-panel-bright rounded-3xl p-10 border-2 border-accent/50 max-w-4xl mx-auto",children:S.jsxs("p",{className:"text-2xl font-bold text-white m-0","data-testid":"text-justice-for-all",children:["For the first time in human history, justice is accessible to everyone ",S.jsx("span",{className:"text-accent",children:" without cost"}),",",S.jsx("span",{className:"text-purple-400",children:" without barriers"}),",",S.jsx("span",{className:"text-blue-400",children:" without compromise"}),"."]})})]})]}),S.jsxs("div",{className:"flex justify-center gap-4 flex-wrap py-12",children:[S.jsxs(io,{href:"/chat",className:"inline-flex items-center gap-3 px-12 py-6 rounded-2xl bg-gradient-to-r from-[#7fb3ff] to-[#a78bfa] text-white font-bold text-xl hover-elevate active-elevate-2 transition-all duration-300 shadow-2xl shadow-accent/30","data-testid":"button-cta-chat",children:[S.jsx(vj,{className:"w-6 h-6"}),S.jsx("span",{children:"Start Your Free Chat Now"}),S.jsx(_C,{className:"w-5 h-5"})]}),S.jsxs(io,{href:"/chat?mode=seal",className:"inline-flex items-center gap-3 px-12 py-6 rounded-2xl glass-panel-bright border-2 border-white/20 text-white font-semibold text-xl hover-elevate active-elevate-2 transition-all duration-300","data-testid":"button-cta-seal",children:[S.jsx(TC,{className:"w-6 h-6"}),S.jsx("span",{children:"Verify & Seal Documents"})]})]}),S.jsxs("footer",{className:"text-center opacity-85 space-y-2 py-12",children:[S.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-footer",children:" 2025 Verum Omnis Foundation. All rights reserved."}),S.jsx("p",{className:"text-xs text-muted","data-testid":"text-footer-patent",children:"Patent Pending  Made in RSA"})]})]})]})]})}const tf=T.forwardRef(({className:n,...e},t)=>S.jsx("div",{ref:t,className:st("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",n),...e}));tf.displayName="Card";const F3=T.forwardRef(({className:n,...e},t)=>S.jsx("div",{ref:t,className:st("flex flex-col space-y-1.5 p-6",n),...e}));F3.displayName="CardHeader";const j3=T.forwardRef(({className:n,...e},t)=>S.jsx("div",{ref:t,className:st("text-2xl font-semibold leading-none tracking-tight",n),...e}));j3.displayName="CardTitle";const B3=T.forwardRef(({className:n,...e},t)=>S.jsx("div",{ref:t,className:st("text-sm text-muted-foreground",n),...e}));B3.displayName="CardDescription";const U3=T.forwardRef(({className:n,...e},t)=>S.jsx("div",{ref:t,className:st("p-6 pt-0",n),...e}));U3.displayName="CardContent";const $3=T.forwardRef(({className:n,...e},t)=>S.jsx("div",{ref:t,className:st("flex items-center p-6 pt-0",n),...e}));$3.displayName="CardFooter";function z3(){return S.jsxs("div",{className:"min-h-screen",children:[S.jsx(B0,{}),S.jsxs("main",{className:"mx-auto max-w-[1100px] px-4 py-6 space-y-[18px]",children:[S.jsxs("header",{className:"text-center space-y-2.5",children:[S.jsx("div",{className:"flex justify-center mb-2.5",children:S.jsx(pA,{height:40})}),S.jsx("h1",{className:"text-4xl font-bold text-foreground m-0","data-testid":"text-page-title",children:"For Law Firms, Law Enforcement & Financial Institutions"}),S.jsx("p",{className:"text-muted m-0","data-testid":"text-page-subtitle",children:"Upload complete case files for AI-powered legal analysis. Receive comprehensive PDF reports with findings, jurisdiction verification, and applicable law references."})]}),S.jsxs(tf,{className:"p-3.5 rounded-[14px]","data-testid":"card-case-analysis",children:[S.jsx("h2",{className:"text-2xl font-semibold text-foreground m-0 mb-3",children:"Full Case File Analysis"}),S.jsxs("div",{className:"space-y-3 text-foreground opacity-90",children:[S.jsxs("div",{"data-testid":"feature-upload",children:[S.jsx("h3",{className:"font-medium text-base mb-1",children:" Complete Case Upload"}),S.jsx("p",{className:"text-sm",children:"Upload entire case files including evidence documents, witness statements, contracts, financial records, and supporting materials. The system reads all file content for comprehensive analysis."})]}),S.jsxs("div",{"data-testid":"feature-analysis",children:[S.jsx("h3",{className:"font-medium text-base mb-1",children:" Triple Verification System"}),S.jsx("p",{className:"text-sm",children:"AI-powered analysis verifies applicable laws, confirms jurisdiction, and cross-references legal precedents across your uploaded case materials."})]}),S.jsxs("div",{"data-testid":"feature-report",children:[S.jsx("h3",{className:"font-medium text-base mb-1",children:" PDF Report Generation"}),S.jsx("p",{className:"text-sm",children:"Receive a comprehensive, court-ready PDF report containing findings, legal analysis, jurisdiction verification, applicable statutes, and cryptographic seals (SHA-512) for evidence integrity."})]}),S.jsxs("div",{"data-testid":"feature-ongoing",children:[S.jsx("h3",{className:"font-medium text-base mb-1",children:" Ongoing Case Management"}),S.jsx("p",{className:"text-sm",children:"Case files persist on your device. Add evidence over time, even offline. The AI maintains complete context across sessions for evolving investigations."})]})]})]}),S.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[S.jsx(tf,{className:"p-3.5 rounded-[14px]","data-testid":"card-video-1",children:S.jsx("div",{className:"w-full rounded-2xl overflow-hidden bg-black",children:S.jsxs("video",{className:"w-full block",controls:!0,playsInline:!0,"data-testid":"video-promo-1",children:[S.jsx("source",{src:"/assets/video/bank-promo.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})}),S.jsx(tf,{className:"p-3.5 rounded-[14px]","data-testid":"card-video-2",children:S.jsx("div",{className:"w-full rounded-2xl overflow-hidden bg-black",children:S.jsxs("video",{className:"w-full block",controls:!0,playsInline:!0,"data-testid":"video-promo-2",children:[S.jsx("source",{src:"/assets/video/bank-promo-long.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})})]}),S.jsxs(tf,{className:"p-3.5 rounded-[14px]","data-testid":"card-free-trial",children:[S.jsx("h2",{className:"text-2xl font-semibold text-foreground m-0 mb-1.5",children:"Get Started with Case File Analysis"}),S.jsx("p",{className:"text-foreground opacity-90 m-0 mb-2.5","data-testid":"text-trial-description",children:"Upload your case files and receive AI-generated analysis reports. Free trial available for institutions. Standard licensing or success-fee terms apply after trial period."}),S.jsxs("div",{className:"flex gap-2 flex-wrap",children:[S.jsx(io,{href:"/chat",className:"inline-block px-5 py-3.5 rounded-xl bg-card border border-border text-foreground hover-elevate active-elevate-2","data-testid":"button-trial-cta",children:"Start Legal Analysis"}),S.jsx(io,{href:"/chat?mode=seal",className:"inline-block px-5 py-3.5 rounded-xl bg-accent border border-accent-border text-accent-foreground hover-elevate active-elevate-2","data-testid":"button-seal-cta",children:"Upload Case Files"})]})]})]})]})}const H3=YP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),my=T.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?xF:"button";return S.jsx(o,{className:st(H3({variant:e,size:t,className:n})),ref:i,...s})});my.displayName="Button";const BR=T.forwardRef(({className:n,...e},t)=>S.jsx("textarea",{className:st("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));BR.displayName="Textarea";var V3=T.createContext(void 0);function UR(n){const e=T.useContext(V3);return n||e||"ltr"}var Uw=0;function G3(){T.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??GC()),document.body.insertAdjacentElement("beforeend",n[1]??GC()),Uw++,()=>{Uw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Uw--}},[])}function GC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var $w="focusScope.autoFocusOnMount",zw="focusScope.autoFocusOnUnmount",WC={bubbles:!1,cancelable:!0},W3="FocusScope",$R=T.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,c]=T.useState(null),u=_n(s),d=_n(i),h=T.useRef(null),f=Bt(e,m=>c(m)),p=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const E=b.target;a.contains(E)?h.current=E:Eo(h.current,{select:!0})},x=function(b){if(p.paused||!a)return;const E=b.relatedTarget;E!==null&&(a.contains(E)||Eo(h.current,{select:!0}))},g=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&Eo(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",x);const w=new MutationObserver(g);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,p.paused]),T.useEffect(()=>{if(a){XC.add(p);const m=document.activeElement;if(!a.contains(m)){const g=new CustomEvent($w,WC);a.addEventListener($w,u),a.dispatchEvent(g),g.defaultPrevented||(K3(J3(zR(a)),{select:!0}),document.activeElement===m&&Eo(a))}return()=>{a.removeEventListener($w,u),setTimeout(()=>{const g=new CustomEvent(zw,WC);a.addEventListener(zw,d),a.dispatchEvent(g),g.defaultPrevented||Eo(m??document.body,{select:!0}),a.removeEventListener(zw,d),XC.remove(p)},0)}}},[a,u,d,p]);const v=T.useCallback(m=>{if(!t&&!r||p.paused)return;const x=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(x&&g){const w=m.currentTarget,[b,E]=X3(w);b&&E?!m.shiftKey&&g===E?(m.preventDefault(),t&&Eo(b,{select:!0})):m.shiftKey&&g===b&&(m.preventDefault(),t&&Eo(E,{select:!0})):g===w&&m.preventDefault()}},[t,r,p.paused]);return S.jsx(rt.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});$R.displayName=W3;function K3(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Eo(r,{select:e}),document.activeElement!==t)return}function X3(n){const e=zR(n),t=KC(e,n),r=KC(e.reverse(),n);return[t,r]}function zR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function KC(n,e){for(const t of n)if(!q3(t,{upTo:e}))return t}function q3(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Y3(n){return n instanceof HTMLInputElement&&"select"in n}function Eo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Y3(n)&&e&&n.select()}}var XC=Q3();function Q3(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=qC(n,e),n.unshift(e)},remove(e){var t;n=qC(n,e),(t=n[0])==null||t.resume()}}}function qC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function J3(n){return n.filter(e=>e.tagName!=="A")}var Hw="rovingFocusGroup.onEntryFocus",Z3={bubbles:!1,cancelable:!0},U0="RovingFocusGroup",[hx,HR,e4]=YS(U0),[t4,VR]=zc(U0,[e4]),[n4,r4]=t4(U0),GR=T.forwardRef((n,e)=>S.jsx(hx.Provider,{scope:n.__scopeRovingFocusGroup,children:S.jsx(hx.Slot,{scope:n.__scopeRovingFocusGroup,children:S.jsx(s4,{...n,ref:e})})}));GR.displayName=U0;var s4=T.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=n,f=T.useRef(null),p=Bt(e,f),v=UR(i),[m=null,x]=ZS({prop:o,defaultProp:a,onChange:c}),[g,w]=T.useState(!1),b=_n(u),E=HR(t),_=T.useRef(!1),[k,P]=T.useState(0);return T.useEffect(()=>{const M=f.current;if(M)return M.addEventListener(Hw,b),()=>M.removeEventListener(Hw,b)},[b]),S.jsx(n4,{scope:t,orientation:r,dir:v,loop:s,currentTabStopId:m,onItemFocus:T.useCallback(M=>x(M),[x]),onItemShiftTab:T.useCallback(()=>w(!0),[]),onFocusableItemAdd:T.useCallback(()=>P(M=>M+1),[]),onFocusableItemRemove:T.useCallback(()=>P(M=>M-1),[]),children:S.jsx(rt.div,{tabIndex:g||k===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...n.style},onMouseDown:oe(n.onMouseDown,()=>{_.current=!0}),onFocus:oe(n.onFocus,M=>{const D=!_.current;if(M.target===M.currentTarget&&D&&!g){const O=new CustomEvent(Hw,Z3);if(M.currentTarget.dispatchEvent(O),!O.defaultPrevented){const j=E().filter(H=>H.focusable),U=j.find(H=>H.active),V=j.find(H=>H.id===m),X=[U,V,...j].filter(Boolean).map(H=>H.ref.current);XR(X,d)}}_.current=!1}),onBlur:oe(n.onBlur,()=>w(!1))})})}),WR="RovingFocusGroupItem",KR=T.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,...o}=n,a=ax(),c=i||a,u=r4(WR,t),d=u.currentTabStopId===c,h=HR(t),{onFocusableItemAdd:f,onFocusableItemRemove:p}=u;return T.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),S.jsx(hx.ItemSlot,{scope:t,id:c,focusable:r,active:s,children:S.jsx(rt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:oe(n.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:oe(n.onFocus,()=>u.onItemFocus(c)),onKeyDown:oe(n.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const m=a4(v,u.orientation,u.dir);if(m!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=h().filter(w=>w.focusable).map(w=>w.ref.current);if(m==="last")g.reverse();else if(m==="prev"||m==="next"){m==="prev"&&g.reverse();const w=g.indexOf(v.currentTarget);g=u.loop?l4(g,w+1):g.slice(w+1)}setTimeout(()=>XR(g))}})})})});KR.displayName=WR;var i4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function o4(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function a4(n,e,t){const r=o4(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return i4[r]}function XR(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function l4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var c4=GR,u4=KR,d4=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Qc=new WeakMap,Fg=new WeakMap,jg={},Vw=0,qR=function(n){return n&&(n.host||qR(n.parentNode))},h4=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=qR(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},f4=function(n,e,t,r){var s=h4(e,Array.isArray(n)?n:[n]);jg[t]||(jg[t]=new WeakMap);var i=jg[t],o=[],a=new Set,c=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),v=p!==null&&p!=="false",m=(Qc.get(f)||0)+1,x=(i.get(f)||0)+1;Qc.set(f,m),i.set(f,x),o.push(f),m===1&&v&&Fg.set(f,!0),x===1&&f.setAttribute(t,"true"),v||f.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return d(e),a.clear(),Vw++,function(){o.forEach(function(h){var f=Qc.get(h)-1,p=i.get(h)-1;Qc.set(h,f),i.set(h,p),f||(Fg.has(h)||h.removeAttribute(r),Fg.delete(h)),p||h.removeAttribute(t)}),Vw--,Vw||(Qc=new WeakMap,Qc=new WeakMap,Fg=new WeakMap,jg={})}},p4=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=d4(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),f4(r,s,t,"aria-hidden")):function(){return null}},ti=function(){return ti=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ti.apply(this,arguments)};function YR(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function m4(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var gy="right-scroll-bar-position",yy="width-before-scroll-bar",g4="with-scroll-bars-hidden",y4="--removed-body-scroll-bar-size";function Gw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function v4(n,e){var t=T.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var w4=typeof window<"u"?T.useLayoutEffect:T.useEffect,YC=new WeakMap;function b4(n,e){var t=v4(null,function(r){return n.forEach(function(s){return Gw(s,r)})});return w4(function(){var r=YC.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||Gw(a,null)}),i.forEach(function(a){s.has(a)||Gw(a,o)})}YC.set(t,n)},[n]),t}function x4(n){return n}function S4(n,e){e===void 0&&(e=x4);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),t={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),t}}}};return s}function A4(n){n===void 0&&(n={});var e=S4(null);return e.options=ti({async:!0,ssr:!1},n),e}var QR=function(n){var e=n.sideCar,t=YR(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,ti({},t))};QR.isSideCarExport=!0;function E4(n,e){return n.useMedium(e),QR}var JR=A4(),Ww=function(){},$0=T.forwardRef(function(n,e){var t=T.useRef(null),r=T.useState({onScrollCapture:Ww,onWheelCapture:Ww,onTouchMoveCapture:Ww}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,c=n.className,u=n.removeScrollBar,d=n.enabled,h=n.shards,f=n.sideCar,p=n.noIsolation,v=n.inert,m=n.allowPinchZoom,x=n.as,g=x===void 0?"div":x,w=n.gapMode,b=YR(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,_=b4([t,e]),k=ti(ti({},b),s);return T.createElement(T.Fragment,null,d&&T.createElement(E,{sideCar:JR,removeScrollBar:u,shards:h,noIsolation:p,inert:v,setCallbacks:i,allowPinchZoom:!!m,lockRef:t,gapMode:w}),o?T.cloneElement(T.Children.only(a),ti(ti({},k),{ref:_})):T.createElement(g,ti({},k,{className:c,ref:_}),a))});$0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$0.classNames={fullWidth:yy,zeroRight:gy};var C4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _4(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=C4();return e&&n.setAttribute("nonce",e),n}function T4(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function k4(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var P4=function(){var n=0,e=null;return{add:function(t){n==0&&(e=_4())&&(T4(e,t),k4(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},R4=function(){var n=P4();return function(e,t){T.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},ZR=function(){var n=R4(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},M4={left:0,top:0,right:0,gap:0},Kw=function(n){return parseInt(n||"",10)||0},N4=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Kw(t),Kw(r),Kw(s)]},I4=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return M4;var e=N4(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},L4=ZR(),Lu="data-scroll-locked",D4=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(g4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Lu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gy,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(gy," .").concat(gy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yy," .").concat(yy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Lu,`] {
    `).concat(y4,": ").concat(a,`px;
  }
`)},QC=function(){var n=parseInt(document.body.getAttribute(Lu)||"0",10);return isFinite(n)?n:0},O4=function(){T.useEffect(function(){return document.body.setAttribute(Lu,(QC()+1).toString()),function(){var n=QC()-1;n<=0?document.body.removeAttribute(Lu):document.body.setAttribute(Lu,n.toString())}},[])},F4=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;O4();var i=T.useMemo(function(){return I4(s)},[s]);return T.createElement(L4,{styles:D4(i,!e,s,t?"":"!important")})},fx=!1;if(typeof window<"u")try{var Bg=Object.defineProperty({},"passive",{get:function(){return fx=!0,!0}});window.addEventListener("test",Bg,Bg),window.removeEventListener("test",Bg,Bg)}catch{fx=!1}var Jc=fx?{passive:!1}:!1,j4=function(n){return n.tagName==="TEXTAREA"},eM=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!j4(n)&&t[e]==="visible")},B4=function(n){return eM(n,"overflowY")},U4=function(n){return eM(n,"overflowX")},JC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=tM(n,r);if(s){var i=nM(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},$4=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},z4=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},tM=function(n,e){return n==="v"?B4(e):U4(e)},nM=function(n,e){return n==="v"?$4(e):z4(e)},H4=function(n,e){return n==="h"&&e==="rtl"?-1:1},V4=function(n,e,t,r,s){var i=H4(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,c=e.contains(a),u=!1,d=o>0,h=0,f=0;do{var p=nM(n,a),v=p[0],m=p[1],x=p[2],g=m-x-i*v;(v||g)&&tM(n,a)&&(h+=g,f+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Ug=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},ZC=function(n){return[n.deltaX,n.deltaY]},e_=function(n){return n&&"current"in n?n.current:n},G4=function(n,e){return n[0]===e[0]&&n[1]===e[1]},W4=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},K4=0,Zc=[];function X4(n){var e=T.useRef([]),t=T.useRef([0,0]),r=T.useRef(),s=T.useState(K4++)[0],i=T.useState(ZR)[0],o=T.useRef(n);T.useEffect(function(){o.current=n},[n]),T.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var m=m4([n.lockRef.current],(n.shards||[]).map(e_),!0).filter(Boolean);return m.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=T.useCallback(function(m,x){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var g=Ug(m),w=t.current,b="deltaX"in m?m.deltaX:w[0]-g[0],E="deltaY"in m?m.deltaY:w[1]-g[1],_,k=m.target,P=Math.abs(b)>Math.abs(E)?"h":"v";if("touches"in m&&P==="h"&&k.type==="range")return!1;var M=JC(P,k);if(!M)return!0;if(M?_=P:(_=P==="v"?"h":"v",M=JC(P,k)),!M)return!1;if(!r.current&&"changedTouches"in m&&(b||E)&&(r.current=_),!_)return!0;var D=r.current||_;return V4(D,x,m,D==="h"?b:E,!0)},[]),c=T.useCallback(function(m){var x=m;if(!(!Zc.length||Zc[Zc.length-1]!==i)){var g="deltaY"in x?ZC(x):Ug(x),w=e.current.filter(function(_){return _.name===x.type&&(_.target===x.target||x.target===_.shadowParent)&&G4(_.delta,g)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(e_).filter(Boolean).filter(function(_){return _.contains(x.target)}),E=b.length>0?a(x,b[0]):!o.current.noIsolation;E&&x.cancelable&&x.preventDefault()}}},[]),u=T.useCallback(function(m,x,g,w){var b={name:m,delta:x,target:g,should:w,shadowParent:q4(g)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(E){return E!==b})},1)},[]),d=T.useCallback(function(m){t.current=Ug(m),r.current=void 0},[]),h=T.useCallback(function(m){u(m.type,ZC(m),m.target,a(m,n.lockRef.current))},[]),f=T.useCallback(function(m){u(m.type,Ug(m),m.target,a(m,n.lockRef.current))},[]);T.useEffect(function(){return Zc.push(i),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Jc),document.addEventListener("touchmove",c,Jc),document.addEventListener("touchstart",d,Jc),function(){Zc=Zc.filter(function(m){return m!==i}),document.removeEventListener("wheel",c,Jc),document.removeEventListener("touchmove",c,Jc),document.removeEventListener("touchstart",d,Jc)}},[]);var p=n.removeScrollBar,v=n.inert;return T.createElement(T.Fragment,null,v?T.createElement(i,{styles:W4(s)}):null,p?T.createElement(F4,{gapMode:n.gapMode}):null)}function q4(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Y4=E4(JR,X4);var rM=T.forwardRef(function(n,e){return T.createElement($0,ti({},n,{ref:e,sideCar:Y4}))});rM.classNames=$0.classNames;var px=["Enter"," "],Q4=["ArrowDown","PageUp","Home"],sM=["ArrowUp","PageDown","End"],J4=[...Q4,...sM],Z4={ltr:[...px,"ArrowRight"],rtl:[...px,"ArrowLeft"]},eU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ng="Menu",[sp,tU,nU]=YS(ng),[Vc,iM]=zc(ng,[nU,O0,VR]),z0=O0(),oM=VR(),[rU,Gc]=Vc(ng),[sU,rg]=Vc(ng),aM=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=z0(e),[c,u]=T.useState(null),d=T.useRef(!1),h=_n(i),f=UR(s);return T.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),S.jsx(h3,{...a,children:S.jsx(rU,{scope:e,open:t,onOpenChange:h,content:c,onContentChange:u,children:S.jsx(sU,{scope:e,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};aM.displayName=ng;var iU="MenuAnchor",mA=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=z0(t);return S.jsx(kR,{...s,...r,ref:e})});mA.displayName=iU;var gA="MenuPortal",[oU,lM]=Vc(gA,{forceMount:void 0}),cM=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Gc(gA,e);return S.jsx(oU,{scope:e,forceMount:t,children:S.jsx(Hc,{present:t||i.open,children:S.jsx(JS,{asChild:!0,container:s,children:r})})})};cM.displayName=gA;var Hr="MenuContent",[aU,yA]=Vc(Hr),uM=T.forwardRef((n,e)=>{const t=lM(Hr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Gc(Hr,n.__scopeMenu),o=rg(Hr,n.__scopeMenu);return S.jsx(sp.Provider,{scope:n.__scopeMenu,children:S.jsx(Hc,{present:r||i.open,children:S.jsx(sp.Slot,{scope:n.__scopeMenu,children:o.modal?S.jsx(lU,{...s,ref:e}):S.jsx(cU,{...s,ref:e})})})})}),lU=T.forwardRef((n,e)=>{const t=Gc(Hr,n.__scopeMenu),r=T.useRef(null),s=Bt(e,r);return T.useEffect(()=>{const i=r.current;if(i)return p4(i)},[]),S.jsx(vA,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:oe(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),cU=T.forwardRef((n,e)=>{const t=Gc(Hr,n.__scopeMenu);return S.jsx(vA,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),uU=tp("MenuContent.ScrollLock"),vA=T.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:v,...m}=n,x=Gc(Hr,t),g=rg(Hr,t),w=z0(t),b=oM(t),E=tU(t),[_,k]=T.useState(null),P=T.useRef(null),M=Bt(e,P,x.onContentChange),D=T.useRef(0),O=T.useRef(""),j=T.useRef(0),U=T.useRef(null),V=T.useRef("right"),$=T.useRef(0),X=v?rM:T.Fragment,H=v?{as:uU,allowPinchZoom:!0}:void 0,B=R=>{var Y,ge;const I=O.current+R,L=E().filter(Ae=>!Ae.disabled),F=document.activeElement,z=(Y=L.find(Ae=>Ae.ref.current===F))==null?void 0:Y.textValue,K=L.map(Ae=>Ae.textValue),re=SU(K,I,z),se=(ge=L.find(Ae=>Ae.textValue===re))==null?void 0:ge.ref.current;(function Ae(_e){O.current=_e,window.clearTimeout(D.current),_e!==""&&(D.current=window.setTimeout(()=>Ae(""),1e3))})(I),se&&setTimeout(()=>se.focus())};T.useEffect(()=>()=>window.clearTimeout(D.current),[]),G3();const N=T.useCallback(R=>{var L,F;return V.current===((L=U.current)==null?void 0:L.side)&&EU(R,(F=U.current)==null?void 0:F.area)},[]);return S.jsx(aU,{scope:t,searchRef:O,onItemEnter:T.useCallback(R=>{N(R)&&R.preventDefault()},[N]),onItemLeave:T.useCallback(R=>{var I;N(R)||((I=P.current)==null||I.focus(),k(null))},[N]),onTriggerLeave:T.useCallback(R=>{N(R)&&R.preventDefault()},[N]),pointerGraceTimerRef:j,onPointerGraceIntentChange:T.useCallback(R=>{U.current=R},[]),children:S.jsx(X,{...H,children:S.jsx($R,{asChild:!0,trapped:s,onMountAutoFocus:oe(i,R=>{var I;R.preventDefault(),(I=P.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:S.jsx(P0,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:S.jsx(c4,{asChild:!0,...b,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:k,onEntryFocus:oe(c,R=>{g.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:S.jsx(PR,{role:"menu","aria-orientation":"vertical","data-state":_M(x.open),"data-radix-menu-content":"",dir:g.dir,...w,...m,ref:M,style:{outline:"none",...m.style},onKeyDown:oe(m.onKeyDown,R=>{const L=R.target.closest("[data-radix-menu-content]")===R.currentTarget,F=R.ctrlKey||R.altKey||R.metaKey,z=R.key.length===1;L&&(R.key==="Tab"&&R.preventDefault(),!F&&z&&B(R.key));const K=P.current;if(R.target!==K||!J4.includes(R.key))return;R.preventDefault();const se=E().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);sM.includes(R.key)&&se.reverse(),bU(se)}),onBlur:oe(n.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(D.current),O.current="")}),onPointerMove:oe(n.onPointerMove,ip(R=>{const I=R.target,L=$.current!==R.clientX;if(R.currentTarget.contains(I)&&L){const F=R.clientX>$.current?"right":"left";V.current=F,$.current=R.clientX}}))})})})})})})});uM.displayName=Hr;var dU="MenuGroup",wA=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return S.jsx(rt.div,{role:"group",...r,ref:e})});wA.displayName=dU;var hU="MenuLabel",dM=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return S.jsx(rt.div,{...r,ref:e})});dM.displayName=hU;var Tv="MenuItem",t_="menu.itemSelect",H0=T.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=T.useRef(null),o=rg(Tv,n.__scopeMenu),a=yA(Tv,n.__scopeMenu),c=Bt(e,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!t&&h){const f=new CustomEvent(t_,{bubbles:!0,cancelable:!0});h.addEventListener(t_,p=>r==null?void 0:r(p),{once:!0}),QS(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return S.jsx(hM,{...s,ref:c,disabled:t,onClick:oe(n.onClick,d),onPointerDown:h=>{var f;(f=n.onPointerDown)==null||f.call(n,h),u.current=!0},onPointerUp:oe(n.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:oe(n.onKeyDown,h=>{const f=a.searchRef.current!=="";t||f&&h.key===" "||px.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});H0.displayName=Tv;var hM=T.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=yA(Tv,t),a=oM(t),c=T.useRef(null),u=Bt(e,c),[d,h]=T.useState(!1),[f,p]=T.useState("");return T.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[i.children]),S.jsx(sp.ItemSlot,{scope:t,disabled:r,textValue:s??f,children:S.jsx(u4,{asChild:!0,...a,focusable:!r,children:S.jsx(rt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:oe(n.onPointerMove,ip(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:oe(n.onPointerLeave,ip(v=>o.onItemLeave(v))),onFocus:oe(n.onFocus,()=>h(!0)),onBlur:oe(n.onBlur,()=>h(!1))})})})}),fU="MenuCheckboxItem",fM=T.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return S.jsx(vM,{scope:n.__scopeMenu,checked:t,children:S.jsx(H0,{role:"menuitemcheckbox","aria-checked":kv(t)?"mixed":t,...s,ref:e,"data-state":xA(t),onSelect:oe(s.onSelect,()=>r==null?void 0:r(kv(t)?!0:!t),{checkForDefaultPrevented:!1})})})});fM.displayName=fU;var pM="MenuRadioGroup",[pU,mU]=Vc(pM,{value:void 0,onValueChange:()=>{}}),mM=T.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=_n(r);return S.jsx(pU,{scope:n.__scopeMenu,value:t,onValueChange:i,children:S.jsx(wA,{...s,ref:e})})});mM.displayName=pM;var gM="MenuRadioItem",yM=T.forwardRef((n,e)=>{const{value:t,...r}=n,s=mU(gM,n.__scopeMenu),i=t===s.value;return S.jsx(vM,{scope:n.__scopeMenu,checked:i,children:S.jsx(H0,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":xA(i),onSelect:oe(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});yM.displayName=gM;var bA="MenuItemIndicator",[vM,gU]=Vc(bA,{checked:!1}),wM=T.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=gU(bA,t);return S.jsx(Hc,{present:r||kv(i.checked)||i.checked===!0,children:S.jsx(rt.span,{...s,ref:e,"data-state":xA(i.checked)})})});wM.displayName=bA;var yU="MenuSeparator",bM=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return S.jsx(rt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});bM.displayName=yU;var vU="MenuArrow",xM=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=z0(t);return S.jsx(RR,{...s,...r,ref:e})});xM.displayName=vU;var wU="MenuSub",[C6,SM]=Vc(wU),nf="MenuSubTrigger",AM=T.forwardRef((n,e)=>{const t=Gc(nf,n.__scopeMenu),r=rg(nf,n.__scopeMenu),s=SM(nf,n.__scopeMenu),i=yA(nf,n.__scopeMenu),o=T.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:n.__scopeMenu},d=T.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),c(null)}},[a,c]),S.jsx(mA,{asChild:!0,...u,children:S.jsx(hM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":_M(t.open),...n,ref:k0(e,s.onTriggerChange),onClick:h=>{var f;(f=n.onClick)==null||f.call(n,h),!(n.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:oe(n.onPointerMove,ip(h=>{i.onItemEnter(h),!h.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),d()},100))})),onPointerLeave:oe(n.onPointerLeave,ip(h=>{var p,v;d();const f=(p=t.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(v=t.content)==null?void 0:v.dataset.side,x=m==="right",g=x?-5:5,w=f[x?"left":"right"],b=f[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:w,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:w,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:oe(n.onKeyDown,h=>{var p;const f=i.searchRef.current!=="";n.disabled||f&&h.key===" "||Z4[r.dir].includes(h.key)&&(t.onOpenChange(!0),(p=t.content)==null||p.focus(),h.preventDefault())})})})});AM.displayName=nf;var EM="MenuSubContent",CM=T.forwardRef((n,e)=>{const t=lM(Hr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Gc(Hr,n.__scopeMenu),o=rg(Hr,n.__scopeMenu),a=SM(EM,n.__scopeMenu),c=T.useRef(null),u=Bt(e,c);return S.jsx(sp.Provider,{scope:n.__scopeMenu,children:S.jsx(Hc,{present:r||i.open,children:S.jsx(sp.Slot,{scope:n.__scopeMenu,children:S.jsx(vA,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:oe(n.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:oe(n.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:oe(n.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=eU[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});CM.displayName=EM;function _M(n){return n?"open":"closed"}function kv(n){return n==="indeterminate"}function xA(n){return kv(n)?"indeterminate":n?"checked":"unchecked"}function bU(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function xU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function SU(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=xU(n,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function AU(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,u=e[o].x,d=e[o].y;c>r!=d>r&&t<(u-a)*(r-c)/(d-c)+a&&(s=!s)}return s}function EU(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return AU(t,e)}function ip(n){return e=>e.pointerType==="mouse"?n(e):void 0}var CU=aM,_U=mA,TU=cM,kU=uM,PU=wA,RU=dM,MU=H0,NU=fM,IU=mM,LU=yM,DU=wM,OU=bM,FU=xM,jU=AM,BU=CM,SA="DropdownMenu",[UU,_6]=zc(SA,[iM]),Pn=iM(),[$U,TM]=UU(SA),kM=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,c=Pn(e),u=T.useRef(null),[d=!1,h]=ZS({prop:s,defaultProp:i,onChange:o});return S.jsx($U,{scope:e,triggerId:ax(),triggerRef:u,contentId:ax(),open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(f=>!f),[h]),modal:a,children:S.jsx(CU,{...c,open:d,onOpenChange:h,dir:r,modal:a,children:t})})};kM.displayName=SA;var PM="DropdownMenuTrigger",RM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=TM(PM,t),o=Pn(t);return S.jsx(_U,{asChild:!0,...o,children:S.jsx(rt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:k0(e,i.triggerRef),onPointerDown:oe(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:oe(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});RM.displayName=PM;var zU="DropdownMenuPortal",MM=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Pn(e);return S.jsx(TU,{...r,...t})};MM.displayName=zU;var NM="DropdownMenuContent",IM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=TM(NM,t),i=Pn(t),o=T.useRef(!1);return S.jsx(kU,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:oe(n.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:oe(n.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IM.displayName=NM;var HU="DropdownMenuGroup",VU=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(PU,{...s,...r,ref:e})});VU.displayName=HU;var GU="DropdownMenuLabel",LM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(RU,{...s,...r,ref:e})});LM.displayName=GU;var WU="DropdownMenuItem",DM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(MU,{...s,...r,ref:e})});DM.displayName=WU;var KU="DropdownMenuCheckboxItem",OM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(NU,{...s,...r,ref:e})});OM.displayName=KU;var XU="DropdownMenuRadioGroup",qU=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(IU,{...s,...r,ref:e})});qU.displayName=XU;var YU="DropdownMenuRadioItem",FM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(LU,{...s,...r,ref:e})});FM.displayName=YU;var QU="DropdownMenuItemIndicator",jM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(DU,{...s,...r,ref:e})});jM.displayName=QU;var JU="DropdownMenuSeparator",BM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(OU,{...s,...r,ref:e})});BM.displayName=JU;var ZU="DropdownMenuArrow",e$=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(FU,{...s,...r,ref:e})});e$.displayName=ZU;var t$="DropdownMenuSubTrigger",UM=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(jU,{...s,...r,ref:e})});UM.displayName=t$;var n$="DropdownMenuSubContent",$M=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Pn(t);return S.jsx(BU,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$M.displayName=n$;var r$=kM,s$=RM,i$=MM,zM=IM,HM=LM,VM=DM,GM=OM,WM=FM,KM=jM,XM=BM,qM=UM,YM=$M;const o$=r$,a$=s$,l$=T.forwardRef(({className:n,inset:e,children:t,...r},s)=>S.jsxs(qM,{ref:s,className:st("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...r,children:[t,S.jsx(fj,{className:"ml-auto"})]}));l$.displayName=qM.displayName;const c$=T.forwardRef(({className:n,...e},t)=>S.jsx(YM,{ref:t,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...e}));c$.displayName=YM.displayName;const QM=T.forwardRef(({className:n,sideOffset:e=4,...t},r)=>S.jsx(i$,{children:S.jsx(zM,{ref:r,sideOffset:e,className:st("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...t})}));QM.displayName=zM.displayName;const vy=T.forwardRef(({className:n,inset:e,...t},r)=>S.jsx(VM,{ref:r,className:st("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));vy.displayName=VM.displayName;const u$=T.forwardRef(({className:n,children:e,checked:t,...r},s)=>S.jsxs(GM,{ref:s,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(KM,{children:S.jsx(dj,{className:"h-4 w-4"})})}),e]}));u$.displayName=GM.displayName;const d$=T.forwardRef(({className:n,children:e,...t},r)=>S.jsxs(WM,{ref:r,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(KM,{children:S.jsx(pj,{className:"h-2 w-2 fill-current"})})}),e]}));d$.displayName=WM.displayName;const h$=T.forwardRef(({className:n,inset:e,...t},r)=>S.jsx(HM,{ref:r,className:st("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));h$.displayName=HM.displayName;const f$=T.forwardRef(({className:n,...e},t)=>S.jsx(XM,{ref:t,className:st("-mx-1 my-1 h-px bg-muted",n),...e}));f$.displayName=XM.displayName;var p$={exports:{}};(function(n){var e=function(t){var r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(R,I,L){R[I]=L.value},o,a=typeof Symbol=="function"?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(R,I,L){return Object.defineProperty(R,I,{value:L,enumerable:!0,configurable:!0,writable:!0}),R[I]}try{h({},"")}catch{h=function(I,L,F){return I[L]=F}}function f(R,I,L,F){var z=I&&I.prototype instanceof b?I:b,K=Object.create(z.prototype),re=new H(F||[]);return i(K,"_invoke",{value:U(R,L,re)}),K}t.wrap=f;function p(R,I,L){try{return{type:"normal",arg:R.call(I,L)}}catch(F){return{type:"throw",arg:F}}}var v="suspendedStart",m="suspendedYield",x="executing",g="completed",w={};function b(){}function E(){}function _(){}var k={};h(k,c,function(){return this});var P=Object.getPrototypeOf,M=P&&P(P(B([])));M&&M!==r&&s.call(M,c)&&(k=M);var D=_.prototype=b.prototype=Object.create(k);E.prototype=_,i(D,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:E,configurable:!0}),E.displayName=h(_,d,"GeneratorFunction");function O(R){["next","throw","return"].forEach(function(I){h(R,I,function(L){return this._invoke(I,L)})})}t.isGeneratorFunction=function(R){var I=typeof R=="function"&&R.constructor;return I?I===E||(I.displayName||I.name)==="GeneratorFunction":!1},t.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,_):(R.__proto__=_,h(R,d,"GeneratorFunction")),R.prototype=Object.create(D),R},t.awrap=function(R){return{__await:R}};function j(R,I){function L(K,re,se,Y){var ge=p(R[K],R,re);if(ge.type==="throw")Y(ge.arg);else{var Ae=ge.arg,_e=Ae.value;return _e&&typeof _e=="object"&&s.call(_e,"__await")?I.resolve(_e.__await).then(function(Be){L("next",Be,se,Y)},function(Be){L("throw",Be,se,Y)}):I.resolve(_e).then(function(Be){Ae.value=Be,se(Ae)},function(Be){return L("throw",Be,se,Y)})}}var F;function z(K,re){function se(){return new I(function(Y,ge){L(K,re,Y,ge)})}return F=F?F.then(se,se):se()}i(this,"_invoke",{value:z})}O(j.prototype),h(j.prototype,u,function(){return this}),t.AsyncIterator=j,t.async=function(R,I,L,F,z){z===void 0&&(z=Promise);var K=new j(f(R,I,L,F),z);return t.isGeneratorFunction(I)?K:K.next().then(function(re){return re.done?re.value:K.next()})};function U(R,I,L){var F=v;return function(K,re){if(F===x)throw new Error("Generator is already running");if(F===g){if(K==="throw")throw re;return N()}for(L.method=K,L.arg=re;;){var se=L.delegate;if(se){var Y=V(se,L);if(Y){if(Y===w)continue;return Y}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(F===v)throw F=g,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);F=x;var ge=p(R,I,L);if(ge.type==="normal"){if(F=L.done?g:m,ge.arg===w)continue;return{value:ge.arg,done:L.done}}else ge.type==="throw"&&(F=g,L.method="throw",L.arg=ge.arg)}}}function V(R,I){var L=I.method,F=R.iterator[L];if(F===o)return I.delegate=null,L==="throw"&&R.iterator.return&&(I.method="return",I.arg=o,V(R,I),I.method==="throw")||L!=="return"&&(I.method="throw",I.arg=new TypeError("The iterator does not provide a '"+L+"' method")),w;var z=p(F,R.iterator,I.arg);if(z.type==="throw")return I.method="throw",I.arg=z.arg,I.delegate=null,w;var K=z.arg;if(!K)return I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,w;if(K.done)I[R.resultName]=K.value,I.next=R.nextLoc,I.method!=="return"&&(I.method="next",I.arg=o);else return K;return I.delegate=null,w}O(D),h(D,d,"Generator"),h(D,c,function(){return this}),h(D,"toString",function(){return"[object Generator]"});function $(R){var I={tryLoc:R[0]};1 in R&&(I.catchLoc=R[1]),2 in R&&(I.finallyLoc=R[2],I.afterLoc=R[3]),this.tryEntries.push(I)}function X(R){var I=R.completion||{};I.type="normal",delete I.arg,R.completion=I}function H(R){this.tryEntries=[{tryLoc:"root"}],R.forEach($,this),this.reset(!0)}t.keys=function(R){var I=Object(R),L=[];for(var F in I)L.push(F);return L.reverse(),function z(){for(;L.length;){var K=L.pop();if(K in I)return z.value=K,z.done=!1,z}return z.done=!0,z}};function B(R){if(R){var I=R[c];if(I)return I.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var L=-1,F=function z(){for(;++L<R.length;)if(s.call(R,L))return z.value=R[L],z.done=!1,z;return z.value=o,z.done=!0,z};return F.next=F}}return{next:N}}t.values=B;function N(){return{value:o,done:!0}}return H.prototype={constructor:H,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(X),!R)for(var I in this)I.charAt(0)==="t"&&s.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=o)},stop:function(){this.done=!0;var R=this.tryEntries[0],I=R.completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var I=this;function L(Y,ge){return K.type="throw",K.arg=R,I.next=Y,ge&&(I.method="next",I.arg=o),!!ge}for(var F=this.tryEntries.length-1;F>=0;--F){var z=this.tryEntries[F],K=z.completion;if(z.tryLoc==="root")return L("end");if(z.tryLoc<=this.prev){var re=s.call(z,"catchLoc"),se=s.call(z,"finallyLoc");if(re&&se){if(this.prev<z.catchLoc)return L(z.catchLoc,!0);if(this.prev<z.finallyLoc)return L(z.finallyLoc)}else if(re){if(this.prev<z.catchLoc)return L(z.catchLoc,!0)}else if(se){if(this.prev<z.finallyLoc)return L(z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,I){for(var L=this.tryEntries.length-1;L>=0;--L){var F=this.tryEntries[L];if(F.tryLoc<=this.prev&&s.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var z=F;break}}z&&(R==="break"||R==="continue")&&z.tryLoc<=I&&I<=z.finallyLoc&&(z=null);var K=z?z.completion:{};return K.type=R,K.arg=I,z?(this.method="next",this.next=z.finallyLoc,w):this.complete(K)},complete:function(R,I){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&I&&(this.next=I),w},finish:function(R){for(var I=this.tryEntries.length-1;I>=0;--I){var L=this.tryEntries[I];if(L.finallyLoc===R)return this.complete(L.completion,L.afterLoc),X(L),w}},catch:function(R){for(var I=this.tryEntries.length-1;I>=0;--I){var L=this.tryEntries[I];if(L.tryLoc===R){var F=L.completion;if(F.type==="throw"){var z=F.arg;X(L)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(R,I,L){return this.delegate={iterator:B(R),resultName:I,nextLoc:L},this.method==="next"&&(this.arg=o),w}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(p$);var AA=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const m$=AA;let n_=0;var JM=({id:n,action:e,payload:t={}})=>{let r=n;return typeof r>"u"&&(r=m$("Job",n_),n_+=1),{id:r,action:e,payload:t}},Oh={};let EA=!1;Oh.logging=EA;Oh.setLogging=n=>{EA=n};Oh.log=(...n)=>EA?console.log.apply(void 0,n):null;const g$=JM,{log:$g}=Oh,y$=AA;let r_=0;var v$=()=>{const n=y$("Scheduler",r_),e={},t={};let r=[];r_+=1;const s=()=>r.length,i=()=>Object.keys(e).length,o=()=>{if(r.length!==0){const h=Object.keys(e);for(let f=0;f<h.length;f+=1)if(typeof t[h[f]]>"u"){r[0](e[h[f]]);break}}},a=(h,f)=>new Promise((p,v)=>{const m=g$({action:h,payload:f});r.push(async x=>{r.shift(),t[x.id]=m;try{p(await x[h].apply(void 0,[...f,m.id]))}catch(g){v(g)}finally{delete t[x.id],o()}}),$g(`[${n}]: Add ${m.id} to JobQueue`),$g(`[${n}]: JobQueue length=${r.length}`),o()});return{addWorker:h=>(e[h.id]=h,$g(`[${n}]: Add ${h.id}`),$g(`[${n}]: Number of workers=${i()}`),o(),h.id),addJob:async(h,...f)=>{if(i()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return a(h,f)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),r=[]},getQueueLen:s,getNumWorkers:i}};function w$(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var b$=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof w$=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const x$=b$("type")==="browser",S$=x$?n=>new URL(n,window.location.href).href:n=>n;var A$=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(t=>{n[t]&&(e[t]=S$(e[t]))}),e},ZM={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const E$="tesseract.js",C$="6.0.1",_$="Pure Javascript Multilingual OCR",T$="src/index.js",k$="commonjs",P$="src/index.d.ts",R$="dist/tesseract.min.js",M$="dist/tesseract.min.js",N$={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},I$={"./src/worker/node/index.js":"./src/worker/browser/index.js"},L$="",D$=["jeromewu"],O$="Apache-2.0",F$={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},j$={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},B$={"@rollup/pluginutils":"^5.0.2"},U$={type:"git",url:"https://github.com/naptha/tesseract.js.git"},$$={url:"https://github.com/naptha/tesseract.js/issues"},z$="https://github.com/naptha/tesseract.js",H$={type:"opencollective",url:"https://opencollective.com/tesseractjs"},V$={name:E$,version:C$,description:_$,main:T$,type:k$,types:P$,unpkg:R$,jsdelivr:M$,scripts:N$,browser:I$,author:L$,contributors:D$,license:O$,devDependencies:F$,dependencies:j$,overrides:B$,repository:U$,bugs:$$,homepage:z$,collective:H$};var G$={workerBlobURL:!0,logger:()=>{}};const W$=V$.version,K$=G$;var X$={...K$,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${W$}/dist/worker.min.js`},q$=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(r))}else t=new Worker(n);return t},Y$=n=>{n.terminate()},Q$=(n,e)=>{n.onmessage=({data:t})=>{e(t)}},J$=async(n,e)=>{n.postMessage(e)};const Xw=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{t(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(n)}),mx=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await mx(n.src)),n.tagName==="VIDEO"&&(e=await mx(n.poster)),n.tagName==="CANVAS"&&await new Promise(t=>{n.toBlob(async r=>{e=await Xw(r),t()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const t=await n.convertToBlob();e=await Xw(t)}else(n instanceof File||n instanceof Blob)&&(e=await Xw(n));return new Uint8Array(e)};var Z$=mx;const ez=X$,tz=q$,nz=Y$,rz=Q$,sz=J$,iz=Z$;var oz={defaultOptions:ez,spawnWorker:tz,terminateWorker:nz,onMessage:rz,send:sz,loadImage:iz};const az=A$,As=JM,{log:s_}=Oh,lz=AA,tl=ZM,{defaultOptions:cz,spawnWorker:uz,terminateWorker:dz,onMessage:hz,loadImage:i_,send:fz}=oz;let o_=0;var e2=async(n="eng",e=tl.LSTM_ONLY,t={},r={})=>{const s=lz("Worker",o_),{logger:i,errorHandler:o,...a}=az({...cz,...t}),c={},u=typeof n=="string"?n.split("+"):n;let d=e,h=r;const f=[tl.DEFAULT,tl.LSTM_ONLY].includes(e)&&!a.legacyCore;let p,v;const m=new Promise((B,N)=>{v=B,p=N}),x=B=>{p(B.message)};let g=uz(a);g.onerror=x,o_+=1;const w=({id:B,action:N,payload:R})=>new Promise((I,L)=>{s_(`[${s}]: Start ${B}, action=${N}`);const F=`${N}-${B}`;c[F]={resolve:I,reject:L},fz(g,{workerId:s,jobId:B,action:N,payload:R})}),b=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),E=B=>w(As({id:B,action:"load",payload:{options:{lstmOnly:f,corePath:a.corePath,logging:a.logging}}})),_=(B,N,R)=>w(As({id:R,action:"FS",payload:{method:"writeFile",args:[B,N]}})),k=(B,N)=>w(As({id:N,action:"FS",payload:{method:"readFile",args:[B,{encoding:"utf8"}]}})),P=(B,N)=>w(As({id:N,action:"FS",payload:{method:"unlink",args:[B]}})),M=(B,N,R)=>w(As({id:R,action:"FS",payload:{method:B,args:N}})),D=(B,N)=>w(As({id:N,action:"loadLanguage",payload:{langs:B,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[tl.DEFAULT,tl.LSTM_ONLY].includes(d)&&!a.legacyLang}}})),O=(B,N,R,I)=>w(As({id:I,action:"initialize",payload:{langs:B,oem:N,config:R}})),j=(B="eng",N,R,I)=>{if(f&&[tl.TESSERACT_ONLY,tl.TESSERACT_LSTM_COMBINED].includes(N))throw Error("Legacy model requested but code missing.");const L=N||d;d=L;const F=R||h;h=F;const K=(typeof B=="string"?B.split("+"):B).filter(re=>!u.includes(re));return u.push(...K),K.length>0?D(K,I).then(()=>O(B,L,F,I)):O(B,L,F,I)},U=(B={},N)=>w(As({id:N,action:"setParameters",payload:{params:B}})),V=async(B,N={},R={text:!0},I)=>w(As({id:I,action:"recognize",payload:{image:await i_(B),options:N,output:R}})),$=async(B,N)=>{if(f)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return w(As({id:N,action:"detect",payload:{image:await i_(B)}}))},X=async()=>(g!==null&&(dz(g),g=null),Promise.resolve());hz(g,({workerId:B,jobId:N,status:R,action:I,data:L})=>{const F=`${I}-${N}`;if(R==="resolve")s_(`[${B}]: Complete ${N}`),c[F].resolve({jobId:N,data:L}),delete c[F];else if(R==="reject")if(c[F].reject(L),delete c[F],I==="load"&&p(L),o)o(L);else throw Error(L);else R==="progress"&&i({...L,userJobId:N})});const H={id:s,worker:g,load:b,writeText:_,readText:k,removeFile:P,FS:M,reinitialize:j,setParameters:U,recognize:V,detect:$,terminate:X};return E().then(()=>D(n)).then(()=>O(n,e,r)).then(()=>v(H)).catch(()=>{}),m};const t2=e2,pz=async(n,e,t)=>{const r=await t2(e,1,t);return r.recognize(n).finally(async()=>{await r.terminate()})},mz=async(n,e)=>{const t=await t2("osd",0,e);return t.detect(n).finally(async()=>{await t.terminate()})};var gz={recognize:pz,detect:mz},yz={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},vz={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const wz=v$,bz=e2,xz=gz,Sz=yz,Az=ZM,Ez=vz,{setLogging:Cz}=Oh;var _z={languages:Sz,OEM:Az,PSM:Ez,createScheduler:wz,createWorker:bz,setLogging:Cz,...xz};const Tz=Q1(_z),wn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gx=[.001,0,0,.001,0,0],qw=1.35,dr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ro={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},op="pdfjs_internal_editor_",ce={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},kz={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ut={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},wy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},tu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},V0={ERRORS:0,WARNINGS:1,INFOS:5},ap={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zg={moveTo:0,lineTo:1,curveTo:2,closePath:3},Pz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let G0=V0.WARNINGS;function Rz(n){Number.isInteger(n)&&(G0=n)}function Mz(){return G0}function W0(n){G0>=V0.INFOS&&console.info(`Info: ${n}`)}function ae(n){G0>=V0.WARNINGS&&console.warn(`Warning: ${n}`)}function je(n){throw new Error(n)}function we(n,e){n||je(e)}function Nz(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function n2(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Fz(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return Nz(r)?r:null}function r2(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&n2(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function pe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Wc=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class a_ extends Wc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Yw extends Wc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class yx extends Wc{constructor(e){super(e,"InvalidPDFException")}}class Pv extends Wc{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class Iz extends Wc{constructor(e){super(e,"FormatError")}}class Ka extends Wc{constructor(e){super(e,"AbortException")}}function s2(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&je("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function sg(n){typeof n!="string"&&je("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Lz(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Dz(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Oz(){try{return new Function(""),!0}catch{return!1}}class Qt{static get isLittleEndian(){return pe(this,"isLittleEndian",Dz())}static get isEvalSupported(){return pe(this,"isEvalSupported",Oz())}static get isOffscreenCanvasSupported(){return pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return pe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return pe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return pe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Qw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var oo,by,vx;class ee{static makeHexColor(e,t,r){return`#${Qw[e]}${Qw[t]}${Qw[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*s+f*o+c,e[r+d+1]=h*i+f*a+u}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],p=e[3];let v=s*d+c,m=v,x=s*f+c,g=x,w=a*h+u,b=w,E=a*p+u,_=E;if(i!==0||o!==0){const k=i*d,P=i*f,M=o*h,D=o*p;v+=M,g+=M,x+=D,m+=D,w+=k,_+=k,E+=P,b+=P}r[0]=Math.min(r[0],v,x,m,g),r[1]=Math.min(r[1],w,E,b,_),r[2]=Math.max(r[2],v,x,m,g),r[3]=Math.max(r[3],w,E,b,_)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],o=e[3],a=r**2+s**2,c=r*i+s*o,u=i**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,o,a,c,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c),C(this,oo,vx).call(this,e,r,i,a,t,s,o,c,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),u),C(this,oo,vx).call(this,e,r,i,a,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u)}}oo=new WeakSet,by=function(e,t,r,s,i,o,a,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,v=h*(h*(h*e+3*u*t)+3*f*r)+p*s,m=h*(h*(h*i+3*u*o)+3*f*a)+p*c;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],v),d[3]=Math.max(d[3],m)},vx=function(e,t,r,s,i,o,a,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&C(this,oo,by).call(this,e,t,r,s,i,o,a,c,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const v=Math.sqrt(p),m=2*u;C(this,oo,by).call(this,e,t,r,s,i,o,a,c,(-d+v)/m,f),C(this,oo,by).call(this,e,t,r,s,i,o,a,c,(-d-v)/m,f)},A(ee,oo);function Fz(n){return decodeURIComponent(escape(n))}let Jw=null,l_=null;function jz(n){return Jw||(Jw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,l_=new Map([["","t"]])),n.replaceAll(Jw,(e,t,r)=>t?t.normalize("NFKC"):l_.get(r))}function i2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),s2(n)}const CA="pdfjs_internal_id_";function Bz(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const o=i.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function bn(n,e,t){return Math.min(Math.max(n,e),t)}function o2(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(s2(n))}function Uz(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):sg(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class lp{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(lp.shouldBuildText(a))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)s(u)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class a2{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var h,f;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&lp.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const d=[[s,-1,o]];for(;d.length>0;){const[p,v,m]=d.at(-1);if(v+1===p.children.length){d.pop();continue}const x=p.children[++d.at(-1)[1]];if(x===null)continue;const{name:g}=x;if(g==="#text"){const b=document.createTextNode(x.value);u.push(b),m.append(b);continue}const w=(h=x==null?void 0:x.attributes)!=null&&h.xmlns?document.createElementNS(x.attributes.xmlns,g):document.createElement(g);if(m.append(w),x.attributes&&this.setAttributes({html:w,element:x,storage:t,intent:i,linkService:r}),((f=x.children)==null?void 0:f.length)>0)d.push([x,-1,w]);else if(x.value){const b=document.createTextNode(x.value);a&&lp.shouldBuildText(g)&&u.push(b),w.append(b)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const pi="http://www.w3.org/2000/svg",al=class al{};G(al,"CSS",96),G(al,"PDF",72),G(al,"PDF_TO_CSS_UNITS",al.CSS/al.PDF);let Xa=al;async function ig(n,e="text"){if(rf(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class og{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=o,r*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let v,m,x,g;d===0?(v=Math.abs(u-e[1])*r+i,m=Math.abs(c-e[0])*r+o,x=(e[3]-e[1])*r,g=(e[2]-e[0])*r):(v=Math.abs(c-e[0])*r+i,m=Math.abs(u-e[1])*r+o,x=(e[2]-e[0])*r,g=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,p*r,v-d*r*c-f*r*u,m-h*r*c-p*r*u],this.width=x,this.height=g}get rawDims(){const e=this.viewBox;return pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new og({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return ee.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];ee.applyTransform(t,this.transform);const r=[e[2],e[3]];return ee.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return ee.applyInverseTransform(r,this.transform),r}}class _A extends Wc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function K0(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function TA(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function $z(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function zz(n,e="document.pdf"){if(typeof n!="string")return e;if(K0(n))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},i=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(i.test(o))return s(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const u of a)if(i.test(u))return s(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return s(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return s(c[0])}return e}class c_{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&ae(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ae(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function rf(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Kr(n){n.preventDefault()}function ft(n){n.preventDefault(),n.stopPropagation()}function Hz(n){console.log("Deprecated API usage: "+n)}var pp;class Rv{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,pp)||y(this,pp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,pp).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(r,s,i,o,a,c))}}pp=new WeakMap,A(Rv,pp);function Vz(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new og({viewBox:i,userUnit:1,scale:e,rotation:t})}function ag(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ae(`Not a valid color format: "${n}"`),[0,0,0])}function Gz(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,ag(r))}e.remove()}function Je(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function Es(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function Fc(n,e,t=!1,r=!0){if(e instanceof og){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=Qt.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${i}px`,d=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class ai{constructor(){const{pixelRatio:e}=ai;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let o=1/0,a=1/0,c=1/0;r=ai.capPixels(r,i),r>0&&(o=Math.sqrt(r/(e*t))),s!==-1&&(a=s/e,c=s/t);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const wx=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Wz{static get isDarkMode(){var e;return pe(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class Kz{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),pe(this,"commentForegroundColor",ag(r))}}function Xz(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const s=255*(1-r);return n=Math.round(n*r+s),e=Math.round(e*r+s),t=Math.round(t*r+s),[n,e,t]}function u_(n,e){const t=n[0]/255,r=n[1]/255,s=n[2]/255,i=Math.max(t,r,s),o=Math.min(t,r,s),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const c=i-o;switch(e[1]=a<.5?c/(i+o):c/(2-i-o),i){case t:e[0]=((r-s)/c+(r<s?6:0))*60;break;case r:e[0]=((s-t)/c+2)*60;break;case s:e[0]=((t-r)/c+4)*60;break}}e[2]=a}function bx(n,e){const t=n[0],r=n[1],s=n[2],i=(1-Math.abs(2*s-1))*r,o=i*(1-Math.abs(t/60%2-1)),a=s-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function d_(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function h_(n,e,t){bx(n,t),t.map(d_);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];bx(e,t),t.map(d_);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)}const f_=new Map;function qz(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=f_.get(t);if(r)return r;const s=new Float32Array(9),i=s.subarray(0,3),o=s.subarray(3,6);u_(n,o);const a=s.subarray(6,9);u_(e,a);const c=a[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),h_(o,a,i)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const p=o[2]=(d+h)/2;c===h_(o,a,i)<u?d=p:h=p}o[2]=c?h:d}return bx(o,i),r=ee.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),f_.set(t,r),r}function l2({html:n,dir:e,className:t},r){const s=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,c=o.length;a<c;++a){const u=o[a];i.append(document.createTextNode(u)),a<c-1&&i.append(document.createElement("br"))}s.append(i)}else a2.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),r.append(s)}var Oo,Fo,Tr,kr,mp,jo,Gu,Wu,gp,Vv,c2,qt,u2,d2,nu,sf;const vi=class vi{constructor(e){A(this,qt);A(this,Oo,null);A(this,Fo,null);A(this,Tr);A(this,kr,null);A(this,mp,null);A(this,jo,null);A(this,Gu,null);A(this,Wu,null);y(this,Tr,e),l(vi,gp)||y(vi,gp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=y(this,Oo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Tr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Kr,{signal:t}),e.addEventListener("pointerdown",C(vi,Vv,c2),{signal:t}));const r=y(this,kr,document.createElement("div"));r.className="buttons",e.append(r);const s=l(this,Tr).toolbarPosition;if(s){const{style:i}=e,o=l(this,Tr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,Oo)}hide(){var e;l(this,Oo).classList.add("hidden"),(e=l(this,Fo))==null||e.hideDropdown()}show(){var e,t;l(this,Oo).classList.remove("hidden"),(e=l(this,mp))==null||e.shown(),(t=l(this,jo))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=l(this,Tr),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",l(vi,gp)[e]),C(this,qt,nu).call(this,r)&&r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,kr).append(r)}async addAltText(e){const t=await e.render();C(this,qt,nu).call(this,t),l(this,kr).append(t,l(this,qt,sf)),y(this,mp,e)}addComment(e,t=null){if(l(this,jo))return;const r=e.renderForToolbar();if(!r)return;C(this,qt,nu).call(this,r);const s=y(this,Gu,l(this,qt,sf));t?(l(this,kr).insertBefore(r,t),l(this,kr).insertBefore(s,t)):l(this,kr).append(r,s),y(this,jo,e),e.toolbar=this}addColorPicker(e){if(l(this,Fo))return;y(this,Fo,e);const t=e.renderButton();C(this,qt,nu).call(this,t),l(this,kr).append(t,l(this,qt,sf))}async addEditSignatureButton(e){const t=y(this,Wu,await e.renderEditButton(l(this,Tr)));C(this,qt,nu).call(this,t),l(this,kr).append(t,l(this,qt,sf))}removeButton(e){var t,r;switch(e){case"comment":(t=l(this,jo))==null||t.removeToolbarCommentButton(),y(this,jo,null),(r=l(this,Gu))==null||r.remove(),y(this,Gu,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,r){const s=l(this,kr).querySelector(r);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){l(this,Wu)&&(l(this,Wu).title=e)}remove(){var e;l(this,Oo).remove(),(e=l(this,Fo))==null||e.destroy(),y(this,Fo,null)}};Oo=new WeakMap,Fo=new WeakMap,Tr=new WeakMap,kr=new WeakMap,mp=new WeakMap,jo=new WeakMap,Gu=new WeakMap,Wu=new WeakMap,gp=new WeakMap,Vv=new WeakSet,c2=function(e){e.stopPropagation()},qt=new WeakSet,u2=function(e){l(this,Tr)._focusEventsAllowed=!1,ft(e)},d2=function(e){l(this,Tr)._focusEventsAllowed=!0,ft(e)},nu=function(e){const t=l(this,Tr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",C(this,qt,u2).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,qt,d2).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Kr,{signal:t}),!0)},sf=function(){const e=document.createElement("div");return e.className="divider",e},A(vi,Vv),A(vi,gp,null);let xx=vi;var yp,yl,xi,mo,h2,f2,Sx;class Yz{constructor(e){A(this,mo);A(this,yp,null);A(this,yl,null);A(this,xi);y(this,xi,e)}show(e,t,r){const[s,i]=C(this,mo,f2).call(this,t,r),{style:o}=l(this,yl)||y(this,yl,C(this,mo,h2).call(this));e.append(l(this,yl)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,yl).remove()}}yp=new WeakMap,yl=new WeakMap,xi=new WeakMap,mo=new WeakSet,h2=function(){const e=y(this,yl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=l(this,xi)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Kr,{signal:t});const r=y(this,yp,document.createElement("div"));return r.className="buttons",e.append(r),l(this,xi).hasCommentManager()&&C(this,mo,Sx).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,xi).commentSelection("floating_button")}),C(this,mo,Sx).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,xi).highlightSelection("floating_button")}),e},f2=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},Sx=function(e,t,r,s){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const a=l(this,xi)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Kr,{signal:a}),i.addEventListener("click",s,{signal:a})),l(this,yp).append(i)};function p2(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var Gv;class Qz{constructor(){A(this,Gv,0)}get id(){return`${op}${ot(this,Gv)._++}`}}Gv=new WeakMap;var Ku,vp,sn,Xu,xy;const UA=class UA{constructor(){A(this,Xu);A(this,Ku,i2());A(this,vp,0);A(this,sn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return pe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return C(this,Xu,xy).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return C(this,Xu,xy).call(this,e,e)}async getFromBlob(e,t){const r=await t;return C(this,Xu,xy).call(this,e,r)}async getFromId(e){l(this,sn)||y(this,sn,new Map);const t=l(this,sn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,sn)||y(this,sn,new Map);let r=l(this,sn).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${l(this,Ku)}_${ot(this,vp)._++}`,refCounter:1,isSvg:!1},l(this,sn).set(e,r),l(this,sn).set(r.id,r),r}getSvgUrl(e){const t=l(this,sn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,sn)||y(this,sn,new Map);const t=l(this,sn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Ku)}_`)}};Ku=new WeakMap,vp=new WeakMap,sn=new WeakMap,Xu=new WeakSet,xy=async function(e,t){l(this,sn)||y(this,sn,new Map);let r=l(this,sn).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${l(this,Ku)}_${ot(this,vp)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await ig(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=UA._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,d)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},o.onload=async()=>{const h=r.svgUrl=o.result;a.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(s),await c}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){ae(s),r=null}return l(this,sn).set(e,r),r&&l(this,sn).set(r.id,r),r};let Ax=UA;var pt,Bo,wp,Qe;class Jz{constructor(e=128){A(this,pt,[]);A(this,Bo,!1);A(this,wp);A(this,Qe,-1);y(this,wp,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,Bo))return;const c={cmd:e,undo:t,post:r,type:i};if(l(this,Qe)===-1){l(this,pt).length>0&&(l(this,pt).length=0),y(this,Qe,0),l(this,pt).push(c);return}if(o&&l(this,pt)[l(this,Qe)].type===i){a&&(c.undo=l(this,pt)[l(this,Qe)].undo),l(this,pt)[l(this,Qe)]=c;return}const u=l(this,Qe)+1;u===l(this,wp)?l(this,pt).splice(0,1):(y(this,Qe,u),u<l(this,pt).length&&l(this,pt).splice(u)),l(this,pt).push(c)}undo(){if(l(this,Qe)===-1)return;y(this,Bo,!0);const{undo:e,post:t}=l(this,pt)[l(this,Qe)];e(),t==null||t(),y(this,Bo,!1),y(this,Qe,l(this,Qe)-1)}redo(){if(l(this,Qe)<l(this,pt).length-1){y(this,Qe,l(this,Qe)+1),y(this,Bo,!0);const{cmd:e,post:t}=l(this,pt)[l(this,Qe)];e(),t==null||t(),y(this,Bo,!1)}}hasSomethingToUndo(){return l(this,Qe)!==-1}hasSomethingToRedo(){return l(this,Qe)<l(this,pt).length-1}cleanType(e){if(l(this,Qe)!==-1){for(let t=l(this,Qe);t>=0;t--)if(l(this,pt)[t].type!==e){l(this,pt).splice(t+1,l(this,Qe)-t),y(this,Qe,t);return}l(this,pt).length=0,y(this,Qe,-1)}}destroy(){y(this,pt,null)}}pt=new WeakMap,Bo=new WeakMap,wp=new WeakMap,Qe=new WeakMap;var Wv,m2;class lg{constructor(e){A(this,Wv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Qt.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(C(this,Wv,m2).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||ft(t))}}Wv=new WeakSet,m2=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Kv=class Kv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Gz(e),pe(this,"_colors",e)}convert(e){const t=ag(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return Kv._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ee.makeHexColor(...t):e}};G(Kv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ex=Kv;var qu,Xn,Yu,lt,Ct,Qu,Pr,Ju,Rr,on,Uo,$o,Zu,zo,Ms,Mr,vl,bp,xp,ed,Sp,Ns,Ho,td,Vo,Is,Xv,Go,nd,Ap,Wo,wl,rd,Ko,Ep,wt,Te,Si,Xo,qo,Cp,sd,_p,Yo,Ls,Ai,Tp,kp,Nr,q,Sy,Cx,g2,y2,of,v2,w2,b2,_x,x2,Tx,kx,S2,fn,mi,A2,E2,Px,C2,af,Rx;const Su=class Su{constructor(e,t,r,s,i,o,a,c,u,d,h,f,p,v,m,x){A(this,q);A(this,qu,new AbortController);A(this,Xn,null);A(this,Yu,null);A(this,lt,new Map);A(this,Ct,new Map);A(this,Qu,null);A(this,Pr,null);A(this,Ju,null);A(this,Rr,new Jz);A(this,on,null);A(this,Uo,null);A(this,$o,null);A(this,Zu,0);A(this,zo,new Set);A(this,Ms,null);A(this,Mr,null);A(this,vl,new Set);G(this,"_editorUndoBar",null);A(this,bp,!1);A(this,xp,!1);A(this,ed,!1);A(this,Sp,null);A(this,Ns,null);A(this,Ho,null);A(this,td,null);A(this,Vo,!1);A(this,Is,null);A(this,Xv,new Qz);A(this,Go,!1);A(this,nd,!1);A(this,Ap,!1);A(this,Wo,null);A(this,wl,null);A(this,rd,null);A(this,Ko,null);A(this,Ep,null);A(this,wt,ce.NONE);A(this,Te,new Set);A(this,Si,null);A(this,Xo,null);A(this,qo,null);A(this,Cp,null);A(this,sd,null);A(this,_p,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Yo,[0,0]);A(this,Ls,null);A(this,Ai,null);A(this,Tp,null);A(this,kp,null);A(this,Nr,null);const g=this._signal=l(this,qu).signal;y(this,Ai,e),y(this,Tp,t),y(this,kp,r),y(this,Qu,s),y(this,on,i),y(this,Xo,o),y(this,sd,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:g}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),a._on("setpreference",this.onSetPreference.bind(this),{signal:g}),a._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:g}),window.addEventListener("pointerdown",()=>{y(this,nd,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{y(this,nd,!1)},{capture:!0,signal:g}),C(this,q,v2).call(this),C(this,q,S2).call(this),C(this,q,_x).call(this),y(this,Pr,c.annotationStorage),y(this,Sp,c.filterFactory),y(this,qo,u),y(this,td,d||null),y(this,bp,h),y(this,xp,f),y(this,ed,p),y(this,Ep,v||null),this.viewParameters={realScale:Xa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=x!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=Su.prototype,t=o=>l(o,Ai).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return pe(this,"_keyboardManager",new lg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ai).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ai).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,o,a,c,u;(e=l(this,Nr))==null||e.resolve(),y(this,Nr,null),(t=l(this,qu))==null||t.abort(),y(this,qu,null),this._signal=null;for(const d of l(this,Ct).values())d.destroy();l(this,Ct).clear(),l(this,lt).clear(),l(this,vl).clear(),(r=l(this,Ko))==null||r.clear(),y(this,Xn,null),l(this,Te).clear(),l(this,Rr).destroy(),(s=l(this,Qu))==null||s.destroy(),(i=l(this,on))==null||i.destroy(),(o=l(this,Xo))==null||o.destroy(),(a=l(this,Is))==null||a.hide(),y(this,Is,null),(c=l(this,rd))==null||c.destroy(),y(this,rd,null),y(this,Yu,null),l(this,Ns)&&(clearTimeout(l(this,Ns)),y(this,Ns,null)),l(this,Ls)&&(clearTimeout(l(this,Ls)),y(this,Ls,null)),(u=this._editorUndoBar)==null||u.destroy(),y(this,sd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Ep)}get useNewAltTextFlow(){return l(this,xp)}get useNewAltTextWhenAddingImage(){return l(this,ed)}get hcmFilter(){return pe(this,"hcmFilter",l(this,qo)?l(this,Sp).addHCMFilter(l(this,qo).foreground,l(this,qo).background):"none")}get direction(){return pe(this,"direction",getComputedStyle(l(this,Ai)).direction)}get _highlightColors(){return pe(this,"_highlightColors",l(this,td)?new Map(l(this,td).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return pe(this,"highlightColors",null);const t=new Map,r=!!l(this,qo);for(const[s,i]of e){const o=s.endsWith("_HCM");if(r&&o){t.set(s.replace("_HCM",""),i);continue}!r&&!o&&t.set(s,i)}return pe(this,"highlightColors",t)}get highlightColorNames(){return pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),y(this,$o,e)}setMainHighlightColorPicker(e){y(this,rd,e)}editAltText(e,t=!1){var r;(r=l(this,Qu))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!l(this,on)}editComment(e,t,r,s){var i;(i=l(this,on))==null||i.showDialog(this,e,t,r,s)}selectComment(e,t){const r=l(this,Ct).get(e),s=r==null?void 0:r.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=l(this,on))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=l(this,on))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=l(this,on))==null||t.removeComments([e.uid])}toggleComment(e,t,r=void 0){var s;(s=l(this,on))==null||s.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=l(this,on))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=l(this,on))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(l(this,Ct).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),s=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await r}getSignature(e){var t;(t=l(this,Xo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,Xo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":y(this,ed,t);break}}onPageChanging({pageNumber:e}){y(this,Zu,e-1)}focusMainContainer(){l(this,Ai).focus()}findParent(e,t){for(const r of l(this,Ct).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){l(this,Tp).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,vl).add(e)}removeShouldRescale(e){l(this,vl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Xa.PDF_TO_CSS_UNITS;for(const r of l(this,vl))r.onScaleChanging();(t=l(this,$o))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:a}=r,c=r.toString(),d=C(this,q,Sy).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;r.empty();const f=C(this,q,Cx).call(this,d),p=l(this,wt)===ce.NONE,v=()=>{const m=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:a,text:c});p&&this.showAllEditors("highlight",!0,!0),t&&(m==null||m.editComment())};if(p){this.switchToMode(ce.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,Pr))return null;const t=`${op}${e}`,r=l(this,Pr).getRawValue(t);return r&&l(this,Pr).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Pr)&&!l(this,Pr).has(e.id)&&l(this,Pr).setValue(e.id,e)}a11yAlert(e,t=null){const r=l(this,kp);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Vo)&&(y(this,Vo,!1),C(this,q,of).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Te))if(t.div.contains(e)){y(this,wl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,wl))return;const[e,t]=l(this,wl);y(this,wl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,q,_x).call(this),C(this,q,Tx).call(this)}removeEditListeners(){C(this,q,x2).call(this),C(this,q,kx).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of l(this,Mr))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of l(this,Mr))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=l(this,Xn))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,Te)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of l(this,Mr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){ae(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of r){const u=await s.deserialize(c);if(!u)return;i.push(u)}const o=()=>{for(const c of i)C(this,q,Px).call(this,c);C(this,q,Rx).call(this,i)},a=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){ae(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,wt)!==ce.NONE&&!this.isEditorHandlingKeyboard&&Su._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Vo)&&(y(this,Vo,!1),C(this,q,of).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(C(this,q,w2).call(this),C(this,q,Tx).call(this),C(this,q,fn).call(this,{isEditing:l(this,wt)!==ce.NONE,isEmpty:C(this,q,af).call(this),hasSomethingToUndo:l(this,Rr).hasSomethingToUndo(),hasSomethingToRedo:l(this,Rr).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,q,b2).call(this),C(this,q,kx).call(this),C(this,q,fn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Mr)){y(this,Mr,e);for(const t of l(this,Mr))C(this,q,mi).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Xv).id}get currentLayer(){return l(this,Ct).get(l(this,Zu))}getLayer(e){return l(this,Ct).get(e)}get currentPageIndex(){return l(this,Zu)}addLayer(e){l(this,Ct).set(e.pageIndex,e),l(this,Go)?e.enable():e.disable()}removeLayer(e){l(this,Ct).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var o,a,c,u,d,h;if(l(this,wt)!==e&&!(l(this,Nr)&&(await l(this,Nr).promise,!l(this,Nr)))){if(y(this,Nr,Promise.withResolvers()),(o=l(this,$o))==null||o.commitOrRemove(),l(this,wt)===ce.POPUP&&((a=l(this,on))==null||a.hideSidebar()),(c=l(this,on))==null||c.destroyPopup(),y(this,wt,e),e===ce.NONE){this.setEditingState(!1),C(this,q,E2).call(this);for(const f of l(this,lt).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),l(this,Nr).resolve();return}for(const f of l(this,lt).values())f.addStandaloneCommentButton();e===ce.SIGNATURE&&await((d=l(this,Xo))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await C(this,q,A2).call(this),this.unselectAll();for(const f of l(this,Ct).values())f.updateMode(e);if(e===ce.POPUP){l(this,Yu)||y(this,Yu,await l(this,sd).getAnnotationsByType(new Set(l(this,Mr).map(v=>v._editorType))));const f=new Set,p=[];for(const v of l(this,lt).values()){const{annotationElementId:m,hasComment:x,deleted:g}=v;m&&f.add(m),x&&!g&&p.push(v.getData())}for(const v of l(this,Yu)){const{id:m,popupRef:x,contentsObj:g}=v;x&&(g!=null&&g.str)&&!f.has(m)&&!l(this,zo).has(m)&&p.push(v)}(h=l(this,on))==null||h.showSidebar(p)}if(!t){r&&this.addNewEditorFromKeyboard(),l(this,Nr).resolve();return}for(const f of l(this,lt).values())f.uid===t?(this.setSelected(f),i?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();l(this,Nr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,Mr)){switch(e){case ve.CREATE:this.currentLayer.addNewEditor(t);return;case ve.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Cp)||y(this,Cp,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of l(this,Te))r.updateParams(e,t);else for(const r of l(this,Mr))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of l(this,lt).values())o.editorType===e&&o.show(t);(((i=l(this,Cp))==null?void 0:i.get(ve.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,q,mi).call(this,[[ve.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Ap)!==e){y(this,Ap,e);for(const t of l(this,Ct).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of l(this,lt).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,lt).get(e)}addEditor(e){l(this,lt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(l(this,Ns)&&clearTimeout(l(this,Ns)),y(this,Ns,setTimeout(()=>{this.focusMainContainer(),y(this,Ns,null)},0))),l(this,lt).delete(e.id),e.annotationElementId&&((t=l(this,Ko))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!l(this,zo).has(e.annotationElementId))&&((r=l(this,Pr))==null||r.remove(e.id))}addDeletedAnnotationElement(e){l(this,zo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,zo).has(e)}removeDeletedAnnotationElement(e){l(this,zo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Xn)!==e&&(y(this,Xn,e),e&&C(this,q,mi).call(this,e.propertiesToUpdate))}updateUI(e){l(this,q,C2)===e&&C(this,q,mi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,q,mi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Te).has(e)){l(this,Te).delete(e),e.unselect(),C(this,q,fn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Te).add(e),e.select(),C(this,q,mi).call(this,e.propertiesToUpdate),C(this,q,fn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=l(this,$o))==null||t.commitOrRemove();for(const r of l(this,Te))r!==e&&r.unselect();l(this,Te).clear(),l(this,Te).add(e),e.select(),C(this,q,mi).call(this,e.propertiesToUpdate),C(this,q,fn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Te).has(e)}get firstSelectedEditor(){return l(this,Te).values().next().value}unselect(e){e.unselect(),l(this,Te).delete(e),C(this,q,fn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Te).size!==0}get isEnterHandled(){return l(this,Te).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,Rr).undo(),C(this,q,fn).call(this,{hasSomethingToUndo:l(this,Rr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,q,af).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,Rr).redo(),C(this,q,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Rr).hasSomethingToRedo(),isEmpty:C(this,q,af).call(this)})}addCommands(e){l(this,Rr).add(e),C(this,q,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,q,af).call(this)})}cleanUndoStack(e){l(this,Rr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,Te)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},s=()=>{for(const o of t)C(this,q,Px).call(this,o)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Xn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Xn)||this.hasSelection}selectAll(){for(const e of l(this,Te))e.commit();C(this,q,Rx).call(this,l(this,lt).values())}unselectAll(){var e;if(!(l(this,Xn)&&(l(this,Xn).commitOrRemove(),l(this,wt)!==ce.NONE))&&!((e=l(this,$o))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,Te))t.unselect();l(this,Te).clear(),C(this,q,fn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;l(this,Yo)[0]+=e,l(this,Yo)[1]+=t;const[s,i]=l(this,Yo),o=[...l(this,Te)],a=1e3;l(this,Ls)&&clearTimeout(l(this,Ls)),y(this,Ls,setTimeout(()=>{y(this,Ls,null),l(this,Yo)[0]=l(this,Yo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,lt).has(c.id)&&(c.translateInPage(s,i),c.translationDone())},undo:()=>{for(const c of o)l(this,lt).has(c.id)&&(c.translateInPage(-s,-i),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,Ms,new Map);for(const e of l(this,Te))l(this,Ms).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ms))return!1;this.disableUserSelect(!1);const e=l(this,Ms);y(this,Ms,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(l(this,lt).has(s.id)){const c=l(this,Ct).get(a);c?s._setParentAndPosition(c,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Ms))for(const r of l(this,Ms).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Te).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Xn)===e}getActive(){return l(this,Xn)}getMode(){return l(this,wt)}isEditingMode(){return l(this,wt)!==ce.NONE}get imageManager(){return pe(this,"imageManager",new Ax)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-s)/o,y:1-(u+h-r)/i,width:f/o,height:h/i});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-r)/i,y:1-(d+f-s)/o,width:h/i,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-s)/o,y:(u-r)/i,width:f/o,height:h/i});break;default:a=(u,d,h,f)=>({x:(u-r)/i,y:(d-s)/o,width:h/i,height:f/o});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:v,height:m}of h.getClientRects())v===0||m===0||c.push(a(f,p,v,m))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Ju)||y(this,Ju,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Ju))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,Ju))==null?void 0:s.get(e.data.id);if(!t)return;const r=l(this,Pr).getRawValue(t);r&&(l(this,wt)===ce.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=l(this,Ko))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),l(this,Ko).delete(e))}addMissingCanvas(e,t){(l(this,Ko)||y(this,Ko,new Map)).set(e,t)}};qu=new WeakMap,Xn=new WeakMap,Yu=new WeakMap,lt=new WeakMap,Ct=new WeakMap,Qu=new WeakMap,Pr=new WeakMap,Ju=new WeakMap,Rr=new WeakMap,on=new WeakMap,Uo=new WeakMap,$o=new WeakMap,Zu=new WeakMap,zo=new WeakMap,Ms=new WeakMap,Mr=new WeakMap,vl=new WeakMap,bp=new WeakMap,xp=new WeakMap,ed=new WeakMap,Sp=new WeakMap,Ns=new WeakMap,Ho=new WeakMap,td=new WeakMap,Vo=new WeakMap,Is=new WeakMap,Xv=new WeakMap,Go=new WeakMap,nd=new WeakMap,Ap=new WeakMap,Wo=new WeakMap,wl=new WeakMap,rd=new WeakMap,Ko=new WeakMap,Ep=new WeakMap,wt=new WeakMap,Te=new WeakMap,Si=new WeakMap,Xo=new WeakMap,qo=new WeakMap,Cp=new WeakMap,sd=new WeakMap,_p=new WeakMap,Yo=new WeakMap,Ls=new WeakMap,Ai=new WeakMap,Tp=new WeakMap,kp=new WeakMap,Nr=new WeakMap,q=new WeakSet,Sy=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Cx=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of l(this,Ct).values())if(r.hasTextLayer(e))return r;return null},g2=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=C(this,q,Sy).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(l(this,Is)||y(this,Is,new Yz(this)),l(this,Is).show(r,s,this.direction==="ltr"))},y2=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Si)&&((i=l(this,Is))==null||i.hide(),y(this,Si,null),C(this,q,fn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Si))return;const s=C(this,q,Sy).call(this,e).closest(".textLayer");if(!s){l(this,Si)&&((o=l(this,Is))==null||o.hide(),y(this,Si,null),C(this,q,fn).call(this,{hasSelectedText:!1}));return}if((a=l(this,Is))==null||a.hide(),y(this,Si,t),C(this,q,fn).call(this,{hasSelectedText:!0}),!(l(this,wt)!==ce.HIGHLIGHT&&l(this,wt)!==ce.NONE)&&(l(this,wt)===ce.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,Vo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,wt)===ce.HIGHLIGHT?C(this,q,Cx).call(this,s):null;if(c==null||c.toggleDrawing(),l(this,nd)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&C(this,q,of).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),C(this,q,of).call(this,"main_toolbar")}},of=function(e=""){l(this,wt)===ce.HIGHLIGHT?this.highlightSelection(e):l(this,bp)&&C(this,q,g2).call(this)},v2=function(){document.addEventListener("selectionchange",C(this,q,y2).bind(this),{signal:this._signal})},w2=function(){if(l(this,Ho))return;y(this,Ho,new AbortController);const e=this.combinedSignal(l(this,Ho));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},b2=function(){var e;(e=l(this,Ho))==null||e.abort(),y(this,Ho,null)},_x=function(){if(l(this,Wo))return;y(this,Wo,new AbortController);const e=this.combinedSignal(l(this,Wo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},x2=function(){var e;(e=l(this,Wo))==null||e.abort(),y(this,Wo,null)},Tx=function(){if(l(this,Uo))return;y(this,Uo,new AbortController);const e=this.combinedSignal(l(this,Uo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},kx=function(){var e;(e=l(this,Uo))==null||e.abort(),y(this,Uo,null)},S2=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},fn=function(e){Object.entries(e).some(([r,s])=>l(this,_p)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,_p),e)}),l(this,wt)===ce.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,q,mi).call(this,[[ve.HIGHLIGHT_FREE,!0]]))},mi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},A2=async function(){if(!l(this,Go)){y(this,Go,!0);const e=[];for(const t of l(this,Ct).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,lt).values())t.enable()}},E2=function(){if(this.unselectAll(),l(this,Go)){y(this,Go,!1);for(const e of l(this,Ct).values())e.disable();for(const e of l(this,lt).values())e.disable()}},Px=function(e){const t=l(this,Ct).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},C2=function(){let e=null;for(e of l(this,Te));return e},af=function(){if(l(this,lt).size===0)return!0;if(l(this,lt).size===1)for(const e of l(this,lt).values())return e.isEmpty();return!1},Rx=function(e){for(const t of l(this,Te))t.unselect();l(this,Te).clear();for(const t of e)t.isEmpty()||(l(this,Te).add(t),t.select());C(this,q,fn).call(this,{hasSelectedEditor:this.hasSelection})},G(Su,"TRANSLATE_SMALL",1),G(Su,"TRANSLATE_BIG",10);let jc=Su;var Rt,Ds,es,id,Os,qn,od,Fs,Nn,Ei,bl,js,Qo,ps,lf,Ay;const pn=class pn{constructor(e){A(this,ps);A(this,Rt,null);A(this,Ds,!1);A(this,es,null);A(this,id,null);A(this,Os,null);A(this,qn,null);A(this,od,!1);A(this,Fs,null);A(this,Nn,null);A(this,Ei,null);A(this,bl,null);A(this,js,!1);y(this,Nn,e),y(this,js,e._uiManager.useNewAltTextFlow),l(pn,Qo)||y(pn,Qo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){pn._l10n??(pn._l10n=e)}async render(){const e=y(this,es,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=y(this,id,document.createElement("span"));e.append(t),l(this,js)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(pn,Qo).missing),t.setAttribute("data-l10n-id",l(pn,Qo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=l(this,Nn)._uiManager._signal;e.addEventListener("contextmenu",Kr,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),l(this,Nn)._uiManager.editAltText(l(this,Nn)),l(this,js)&&l(this,Nn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ps,lf)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(y(this,od,!0),s(i))},{signal:r}),await C(this,ps,Ay).call(this),e}finish(){l(this,es)&&(l(this,es).focus({focusVisible:l(this,od)}),y(this,od,!1))}isEmpty(){return l(this,js)?l(this,Rt)===null:!l(this,Rt)&&!l(this,Ds)}hasData(){return l(this,js)?l(this,Rt)!==null||!!l(this,Ei):this.isEmpty()}get guessedText(){return l(this,Ei)}async setGuessedText(e){l(this,Rt)===null&&(y(this,Ei,e),y(this,bl,await pn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,ps,Ay).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,js)||l(this,Rt)){(t=l(this,Fs))==null||t.remove(),y(this,Fs,null);return}if(!l(this,Fs)){const r=y(this,Fs,document.createElement("div"));r.className="noAltTextBadge",l(this,Nn).div.append(r)}l(this,Fs).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Rt);return!e&&l(this,Ei)===t&&(t=l(this,bl)),{altText:t,decorative:l(this,Ds),guessedText:l(this,Ei),textWithDisclaimer:l(this,bl)}}get data(){return{altText:l(this,Rt),decorative:l(this,Ds)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(y(this,Ei,r),y(this,bl,s)),!(l(this,Rt)===e&&l(this,Ds)===t)&&(i||(y(this,Rt,e),y(this,Ds,t)),C(this,ps,Ay).call(this))}toggle(e=!1){l(this,es)&&(!e&&l(this,qn)&&(clearTimeout(l(this,qn)),y(this,qn,null)),l(this,es).disabled=!e)}shown(){l(this,Nn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ps,lf)}})}destroy(){var e,t;(e=l(this,es))==null||e.remove(),y(this,es,null),y(this,id,null),y(this,Os,null),(t=l(this,Fs))==null||t.remove(),y(this,Fs,null)}};Rt=new WeakMap,Ds=new WeakMap,es=new WeakMap,id=new WeakMap,Os=new WeakMap,qn=new WeakMap,od=new WeakMap,Fs=new WeakMap,Nn=new WeakMap,Ei=new WeakMap,bl=new WeakMap,js=new WeakMap,Qo=new WeakMap,ps=new WeakSet,lf=function(){return l(this,Rt)&&"added"||l(this,Rt)===null&&this.guessedText&&"review"||"missing"},Ay=async function(){var s,i,o;const e=l(this,es);if(!e)return;if(l(this,js)){if(e.classList.toggle("done",!!l(this,Rt)),e.setAttribute("data-l10n-id",l(pn,Qo)[l(this,ps,lf)]),(s=l(this,id))==null||s.setAttribute("data-l10n-id",l(pn,Qo)[`${l(this,ps,lf)}-label`]),!l(this,Rt)){(i=l(this,Os))==null||i.remove();return}}else{if(!l(this,Rt)&&!l(this,Ds)){e.classList.remove("done"),(o=l(this,Os))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Os);if(!t){y(this,Os,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Nn).id}`;const a=100,c=l(this,Nn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,qn)),y(this,qn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{y(this,qn,setTimeout(()=>{y(this,qn,null),l(this,Os).classList.add("show"),l(this,Nn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,qn)&&(clearTimeout(l(this,qn)),y(this,qn,null)),(u=l(this,Os))==null||u.classList.remove("show")},{signal:c})}l(this,Ds)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Rt)),t.parentNode||e.append(t);const r=l(this,Nn).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},A(pn,Qo,null),G(pn,"_l10n",null);let Mv=pn;var $t,Ir,xl,Ue,Pp,Sl,ts,Al,El,Cl,Rp,Mx;class Hg{constructor(e){A(this,Rp);A(this,$t,null);A(this,Ir,null);A(this,xl,!1);A(this,Ue,null);A(this,Pp,null);A(this,Sl,null);A(this,ts,null);A(this,Al,null);A(this,El,!1);A(this,Cl,null);y(this,Ue,e)}renderForToolbar(){const e=y(this,Ir,document.createElement("button"));return e.className="comment",C(this,Rp,Mx).call(this,e,!1)}renderForStandalone(){const e=y(this,$t,document.createElement("button"));e.className="annotationCommentButton";const t=l(this,Ue).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(l(this,Ue)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=l(this,Ue).commentButtonColor;s&&(r.backgroundColor=s)}return C(this,Rp,Mx).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=l(this,$t)??l(this,Ir))==null||e.focus()},0)}onUpdatedColor(){if(!l(this,$t))return;const e=l(this,Ue).commentButtonColor;e&&(l(this,$t).style.backgroundColor=e),l(this,Ue)._uiManager.updatePopupColor(l(this,Ue))}get commentButtonWidth(){var e;return(((e=l(this,$t))==null?void 0:e.getBoundingClientRect().width)??0)/l(this,Ue).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Cl))return l(this,Cl);if(!l(this,$t))return null;const{x:e,y:t,height:r}=l(this,$t).getBoundingClientRect(),{x:s,y:i,width:o,height:a}=l(this,Ue).parent.boundingClientRect;return[(e-s)/o,(t+r-i)/a]}set commentPopupPositionInLayer(e){y(this,Cl,e)}hasDefaultPopupPosition(){return l(this,Cl)===null}removeStandaloneCommentButton(){var e;(e=l(this,$t))==null||e.remove(),y(this,$t,null)}removeToolbarCommentButton(){var e;(e=l(this,Ir))==null||e.remove(),y(this,Ir,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,$t)&&(l(this,$t).classList.toggle("selected",e),l(this,$t).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,s;if(t)[r,s]=t;else{[r,s]=l(this,Ue).commentButtonPosition;const{width:d,height:h,x:f,y:p}=l(this,Ue);r=f+r*d,s=p+s*h}const i=l(this,Ue).parent.boundingClientRect,{x:o,y:a,width:c,height:u}=i;l(this,Ue)._uiManager.editComment(l(this,Ue),o+r*c,a+s*u,{...e,parentDimensions:i})}finish(){l(this,Ir)&&(l(this,Ir).focus({focusVisible:l(this,xl)}),y(this,xl,!1))}isDeleted(){return l(this,El)||l(this,ts)===""}isEmpty(){return l(this,ts)===null}hasBeenEdited(){return this.isDeleted()||l(this,ts)!==l(this,Pp)}serialize(){return this.data}get data(){return{text:l(this,ts),richText:l(this,Sl),date:l(this,Al),deleted:this.isDeleted()}}set data(e){if(e!==l(this,ts)&&y(this,Sl,null),e===null){y(this,ts,""),y(this,El,!0);return}y(this,ts,e),y(this,Al,new Date),y(this,El,!1)}setInitialText(e,t=null){y(this,Pp,e),this.data=e,y(this,Al,null),y(this,Sl,t)}shown(){}destroy(){var e,t;(e=l(this,Ir))==null||e.remove(),y(this,Ir,null),(t=l(this,$t))==null||t.remove(),y(this,$t,null),y(this,ts,""),y(this,Sl,null),y(this,Al,null),y(this,Ue,null),y(this,xl,!1),y(this,El,!1)}}$t=new WeakMap,Ir=new WeakMap,xl=new WeakMap,Ue=new WeakMap,Pp=new WeakMap,Sl=new WeakMap,ts=new WeakMap,Al=new WeakMap,El=new WeakMap,Cl=new WeakMap,Rp=new WeakSet,Mx=function(e,t){if(!l(this,Ue)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,Ue)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=l(this,Ue)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Kr,{signal:r}),t&&(e.addEventListener("focusin",i=>{l(this,Ue)._focusEventsAllowed=!1,ft(i)},{capture:!0,signal:r}),e.addEventListener("focusout",i=>{l(this,Ue)._focusEventsAllowed=!0,ft(i)},{capture:!0,signal:r})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),e===l(this,Ir)?this.edit():l(this,Ue).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(y(this,xl,!0),s(i))},{signal:r}),e.addEventListener("pointerenter",()=>{l(this,Ue).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{l(this,Ue).toggleComment(!1,!1)},{signal:r}),e};var ad,_l,Mp,Np,Ip,Lp,Dp,Ci,Tl,_i,kl,Ti,qa,_2,T2,k2;const $A=class $A{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){A(this,qa);A(this,ad);A(this,_l,!1);A(this,Mp,null);A(this,Np);A(this,Ip);A(this,Lp);A(this,Dp);A(this,Ci,null);A(this,Tl);A(this,_i,null);A(this,kl);A(this,Ti,null);y(this,ad,e),y(this,Mp,r),y(this,Np,t),y(this,Ip,s),y(this,Lp,i),y(this,Dp,o),y(this,kl,new AbortController),y(this,Tl,AbortSignal.any([a,l(this,kl).signal])),e.addEventListener("touchstart",C(this,qa,_2).bind(this),{passive:!1,signal:l(this,Tl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ai.pixelRatio}destroy(){var e,t;(e=l(this,kl))==null||e.abort(),y(this,kl,null),(t=l(this,Ci))==null||t.abort(),y(this,Ci,null)}};ad=new WeakMap,_l=new WeakMap,Mp=new WeakMap,Np=new WeakMap,Ip=new WeakMap,Lp=new WeakMap,Dp=new WeakMap,Ci=new WeakMap,Tl=new WeakMap,_i=new WeakMap,kl=new WeakMap,Ti=new WeakMap,qa=new WeakSet,_2=function(e){var s,i,o;if((s=l(this,Np))!=null&&s.call(this))return;if(e.touches.length===1){if(l(this,Ci))return;const a=y(this,Ci,new AbortController),c=AbortSignal.any([l(this,Tl),a.signal]),u=l(this,ad),d={capture:!0,signal:c,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=l(this,Ci))==null||p.abort(),y(this,Ci,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ft(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!l(this,Ti)){y(this,Ti,new AbortController);const a=AbortSignal.any([l(this,Tl),l(this,Ti).signal]),c=l(this,ad),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",C(this,qa,T2).bind(this),u);const d=C(this,qa,k2).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",ft,u),c.addEventListener("pointermove",ft,u),c.addEventListener("pointercancel",ft,u),c.addEventListener("pointerup",ft,u),(i=l(this,Ip))==null||i.call(this)}if(ft(e),e.touches.length!==2||(o=l(this,Mp))!=null&&o.call(this)){y(this,_i,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),y(this,_i,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},T2=function(e){var E;if(!l(this,_i)||e.touches.length!==2)return;ft(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:o,screenY:a}=r,c=l(this,_i),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,p=h-u,v=f-d,m=o-s,x=a-i,g=Math.hypot(m,x)||1,w=Math.hypot(p,v)||1;if(!l(this,_l)&&Math.abs(w-g)<=$A.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=i,c.touch1X=o,c.touch1Y=a,!l(this,_l)){y(this,_l,!0);return}const b=[(s+o)/2,(i+a)/2];(E=l(this,Lp))==null||E.call(this,b,w,g)},k2=function(e){var t;e.touches.length>=2||(l(this,Ti)&&(l(this,Ti).abort(),y(this,Ti,null),(t=l(this,Dp))==null||t.call(this)),l(this,_i)&&(ft(e),y(this,_i,null),y(this,_l,!1)))};let Nv=$A;var Pl,ns,Xe,De,ki,ld,Jo,Op,zt,Rl,Pi,Bs,Zo,Fp,Ml,Yn,jp,Nl,Ri,Us,cd,ud,Lr,Il,Bp,qv,ie,Nx,Up,Ix,Ey,P2,R2,Lx,Cy,Dx,M2,N2,I2,Ox,L2,Fx,D2,O2,F2,jx,cf;const le=class le{constructor(e){A(this,ie);A(this,Pl,null);A(this,ns,null);A(this,Xe,null);A(this,De,null);A(this,ki,null);A(this,ld,!1);A(this,Jo,null);A(this,Op,"");A(this,zt,null);A(this,Rl,null);A(this,Pi,null);A(this,Bs,null);A(this,Zo,null);A(this,Fp,"");A(this,Ml,!1);A(this,Yn,null);A(this,jp,!1);A(this,Nl,!1);A(this,Ri,!1);A(this,Us,null);A(this,cd,0);A(this,ud,0);A(this,Lr,null);A(this,Il,null);G(this,"isSelected",!1);G(this,"_isCopy",!1);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);A(this,Bp,!1);A(this,qv,le._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=le.prototype._resizeWithKeyboard,t=jc.TRANSLATE_SMALL,r=jc.TRANSLATE_BIG;return pe(this,"_resizerKeyboardManager",new lg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Zz({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(le._l10n??(le._l10n=e),le._l10nResizer||(le._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),le._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);le._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){je("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Bp)}set _isDraggable(e){var t;y(this,Bp,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,qv)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(C(this,ie,cf).call(this),(t=l(this,Bs))==null||t.remove(),y(this,Bs,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Ml)?y(this,Ml,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){C(this,ie,Nx).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Yn)||y(this,Yn,[this.x,this.y,this.width,this.height]),C(this,ie,Nx).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,Yn)||y(this,Yn,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:d}=r;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,Yn)&&(l(this,Yn)[0]!==this.x||l(this,Yn)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Yn)&&(l(this,Yn)[2]!==this.width||l(this,Yn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=le,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:o,width:a,height:c}=this;if(a*=r,c*=s,i*=r,o*=s,this._mustFixPosition)switch(e){case 0:i=bn(i,0,r-a),o=bn(o,0,s-c);break;case 90:i=bn(i,0,r-c),o=bn(o,a,s);break;case 180:i=bn(i,a,r),o=bn(o,c,s);break;case 270:i=bn(i,c,r),o=bn(o,0,s-a);break}this.x=i/=r,this.y=o/=s;const[u,d]=this.getBaseTranslation();i+=u,o+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return C(r=le,Up,Ix).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return C(r=le,Up,Ix).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,Xe))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Nl))return this._editToolbar;this._editToolbar=new xx(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=l(this,Xe))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Xe)||(Mv.initialize(le._l10n),y(this,Xe,new Mv(this)),l(this,Pl)&&(l(this,Xe).data=l(this,Pl),y(this,Pl,null))),l(this,Xe)}get altTextData(){var e;return(e=l(this,Xe))==null?void 0:e.data}set altTextData(e){l(this,Xe)&&(l(this,Xe).data=e)}get guessedAltText(){var e;return(e=l(this,Xe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Xe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Xe))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Xe)&&!l(this,Xe).isEmpty()}hasAltTextData(){var e;return((e=l(this,Xe))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=l(this,De))==null||e.focusButton()}addCommentButton(){return l(this,De)||y(this,De,new Hg(this))}addStandaloneCommentButton(){if(l(this,ki)){this._uiManager.isEditingMode()&&l(this,ki).classList.remove("hidden");return}this.hasComment&&(y(this,ki,l(this,De).renderForStandalone()),this.div.append(l(this,ki)))}removeStandaloneCommentButton(){l(this,De).removeStandaloneCommentButton(),y(this,ki,null)}hideStandaloneCommentButton(){var e;(e=l(this,ki))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:s}}=l(this,De);return{text:t,richText:e,date:r,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,De)||y(this,De,new Hg(this)),l(this,De).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(l(this,De)||y(this,De,new Hg(this)),l(this,De).setInitialText(e,r),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=l(this,De))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=l(this,De))==null?void 0:e.isDeleted()}get hasComment(){return!!l(this,De)&&!l(this,De).isEmpty()&&!l(this,De).isDeleted()}async editComment(e){l(this,De)||y(this,De,new Hg(this)),l(this,De).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,De).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,c=s-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,De).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,ld)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),C(this,ie,Fx).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),p2(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Il)||y(this,Il,new Nv({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,ie,M2).bind(this),onPinching:C(this,ie,N2).bind(this),onPinchEnd:C(this,ie,I2).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(y(this,Ml,!0),this._isDraggable){C(this,ie,L2).call(this,e);return}C(this,ie,Ox).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Us)&&clearTimeout(l(this,Us)),y(this,Us,setTimeout(()=>{var e;y(this,Us,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/s,d=t/s,h=this.x*i,f=this.y*o,p=this.width*i,v=this.height*o;switch(r){case 0:return[h+u+a,o-f-d-v+c,h+u+p+a,o-f-d+c];case 90:return[h+d+a,o-f+u+c,h+d+v+a,o-f+u+p+c];case 180:return[h-u-p+a,o-f+d+c,h-u+a,o-f+d+v+c];case 270:return[h-d-v+a,o-f-u-p+c,h-d+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,c=o-s;switch(this.rotation){case 0:return[r,t-o,a,c];case 90:return[r,t-s,c,a];case 180:return[i,t-s,a,c];case 270:return[i,t-o,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&le._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=l(this,De))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:s,deleted:i,richText:o},uid:a,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:r||d,popupRef:!i,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),y(this,Nl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),y(this,Nl,!1),!0):!1}isInEditMode(){return l(this,Nl)}shouldGetKeyboardEvents(){return l(this,Ri)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&s>0&&e<i&&r>0}rebuild(){C(this,ie,Fx).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,y(s,Pl,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,o]=s.pageDimensions,[a,c,u,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=c/o,s.width=u/i,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,Zo))==null||e.abort(),y(this,Zo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Us)&&(clearTimeout(l(this,Us)),y(this,Us,null)),C(this,ie,cf).call(this),this.removeEditToolbar(),l(this,Lr)){for(const r of l(this,Lr).values())clearTimeout(r);y(this,Lr,null)}this.parent=null,(t=l(this,Il))==null||t.destroy(),y(this,Il,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,ie,P2).call(this),l(this,zt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,s,i,o]=this.getPDFRect();return[le._round(r+(i-r)*e),le._round(s+(o-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,De).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,De).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,De).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,De).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){l(this,De).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),y(this,Pi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,zt).children;if(!l(this,ns)){y(this,ns,Array.from(t));const o=C(this,ie,D2).bind(this),a=C(this,ie,O2).bind(this),c=this._uiManager._signal;for(const u of l(this,ns)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",C(this,ie,F2).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",le._l10nResizer[d])}}const r=l(this,ns)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,ns).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)l(this,zt).append(l(this,zt).firstChild);else if(i>s)for(let a=0;a<i-s;a++)l(this,zt).firstChild.before(l(this,zt).lastChild);let o=0;for(const a of t){const u=l(this,ns)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",le._l10nResizer[u])}}C(this,ie,jx).call(this,0),y(this,Ri,!0),l(this,zt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ri)&&C(this,ie,Dx).call(this,l(this,Fp),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,ie,cf).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=l(this,Xe))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=l(this,zt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=l(this,Xe))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,jp)}set isEditing(e){y(this,jp,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Lr)||y(this,Lr,new Map);const{action:r}=e;let s=l(this,Lr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,Lr).delete(r),l(this,Lr).size===0&&y(this,Lr,null)},le._telemetryTimeout),l(this,Lr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),y(this,ld,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,ld,!0)}updateFakeAnnotationElement(e){if(!l(this,Bs)&&!this.deleted){y(this,Bs,e.addFakeAnnotation(this));return}if(this.deleted){l(this,Bs).remove(),y(this,Bs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,Bs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Pl=new WeakMap,ns=new WeakMap,Xe=new WeakMap,De=new WeakMap,ki=new WeakMap,ld=new WeakMap,Jo=new WeakMap,Op=new WeakMap,zt=new WeakMap,Rl=new WeakMap,Pi=new WeakMap,Bs=new WeakMap,Zo=new WeakMap,Fp=new WeakMap,Ml=new WeakMap,Yn=new WeakMap,jp=new WeakMap,Nl=new WeakMap,Ri=new WeakMap,Us=new WeakMap,cd=new WeakMap,ud=new WeakMap,Lr=new WeakMap,Il=new WeakMap,Bp=new WeakMap,qv=new WeakMap,ie=new WeakSet,Nx=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Up=new WeakSet,Ix=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Ey=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},P2=function(){if(l(this,zt))return;y(this,zt,document.createElement("div")),l(this,zt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");l(this,zt).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",C(this,ie,R2).bind(this,r),{signal:t}),s.addEventListener("contextmenu",Kr,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,zt))},R2=function(e,t){var d;t.preventDefault();const{isMac:r}=Qt.platform;if(t.button!==0||t.ctrlKey&&r)return;(d=l(this,Xe))==null||d.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,y(this,Rl,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,ie,Dx).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ft,{passive:!1,signal:o}),window.addEventListener("contextmenu",Kr,{signal:o}),y(this,Pi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=l(this,Xe))==null||h.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=c,C(this,ie,Cy).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Lx=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Cy=function(){if(!l(this,Pi))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=l(this,Pi);y(this,Pi,null);const i=this.x,o=this.y,a=this.width,c=this.height;i===e&&o===t&&a===r&&c===s||this.addCommands({cmd:C(this,ie,Lx).bind(this,i,o,a,c),undo:C(this,ie,Lx).bind(this,e,t,r,s),mustExec:!0})},Dx=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,c=this.height,u=le.MIN_SIZE/r,d=le.MIN_SIZE/s,h=C(this,ie,Ey).call(this,this.rotation),f=(H,B)=>[h[0]*H+h[2]*B,h[1]*H+h[3]*B],p=C(this,ie,Ey).call(this,360-this.rotation),v=(H,B)=>[p[0]*H+p[2]*B,p[1]*H+p[3]*B];let m,x,g=!1,w=!1;switch(e){case"topLeft":g=!0,m=(H,B)=>[0,0],x=(H,B)=>[H,B];break;case"topMiddle":m=(H,B)=>[H/2,0],x=(H,B)=>[H/2,B];break;case"topRight":g=!0,m=(H,B)=>[H,0],x=(H,B)=>[0,B];break;case"middleRight":w=!0,m=(H,B)=>[H,B/2],x=(H,B)=>[0,B/2];break;case"bottomRight":g=!0,m=(H,B)=>[H,B],x=(H,B)=>[0,0];break;case"bottomMiddle":m=(H,B)=>[H/2,B],x=(H,B)=>[H/2,0];break;case"bottomLeft":g=!0,m=(H,B)=>[0,B],x=(H,B)=>[H,0];break;case"middleLeft":w=!0,m=(H,B)=>[0,B/2],x=(H,B)=>[H,B/2];break}const b=m(a,c),E=x(a,c);let _=f(...E);const k=le._round(i+_[0]),P=le._round(o+_[1]);let M=1,D=1,O,j;if(t.fromKeyboard)({deltaX:O,deltaY:j}=t);else{const{screenX:H,screenY:B}=t,[N,R]=l(this,Rl);[O,j]=this.screenToPageTranslation(H-N,B-R),l(this,Rl)[0]=H,l(this,Rl)[1]=B}if([O,j]=v(O/r,j/s),g){const H=Math.hypot(a,c);M=D=Math.max(Math.min(Math.hypot(E[0]-b[0]-O,E[1]-b[1]-j)/H,1/a,1/c),u/a,d/c)}else w?M=bn(Math.abs(E[0]-b[0]-O),u,1)/a:D=bn(Math.abs(E[1]-b[1]-j),d,1)/c;const U=le._round(a*M),V=le._round(c*D);_=f(...x(U,V));const $=k-_[0],X=P-_[1];l(this,Yn)||y(this,Yn,[this.x,this.y,this.width,this.height]),this.width=U,this.height=V,this.x=$,this.y=X,this.setDims(),this.fixAndSetPosition(),this._onResizing()},M2=function(){var e;y(this,Pi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,Xe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},N2=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const o=C(this,ie,Ey).call(this,this.rotation),a=(k,P)=>[o[0]*k+o[2]*P,o[1]*k+o[3]*P],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,v=le.MIN_SIZE/c,m=le.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/p),v/f,m/p);const x=le._round(f*i),g=le._round(p*i);if(x===f&&g===p)return;l(this,Yn)||y(this,Yn,[d,h,f,p]);const w=a(f/2,p/2),b=le._round(d+w[0]),E=le._round(h+w[1]),_=a(x/2,g/2);this.x=b-_[0],this.y=E-_[1],this.width=x,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()},I2=function(){var e;(e=l(this,Xe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,ie,Cy).call(this)},Ox=function(e){const{isMac:t}=Qt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},L2=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:i},a=u=>{s.abort(),y(this,Jo,null),y(this,Ml,!1),this._uiManager.endDragSession()||C(this,ie,Ox).call(this,u),r&&this._onStopDragging()};t&&(y(this,cd,e.clientX),y(this,ud,e.clientY),y(this,Jo,e.pointerId),y(this,Op,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==l(this,Jo)){ft(u);return}const[p,v]=this.screenToPageTranslation(d-l(this,cd),h-l(this,ud));y(this,cd,d),y(this,ud,h),this._uiManager.dragSelectedEditors(p,v)},o),window.addEventListener("touchmove",ft,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,Op)&&(l(this,Il)||u.isPrimary)&&a(u),ft(u)},o));const c=u=>{if(!l(this,Jo)||l(this,Jo)===u.pointerId){a(u);return}ft(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},Fx=function(){if(l(this,Zo)||!this.div)return;y(this,Zo,new AbortController);const e=this._uiManager.combinedSignal(l(this,Zo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},D2=function(e){le._resizerKeyboardManager.exec(this,e)},O2=function(e){var t;l(this,Ri)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,zt)&&C(this,ie,cf).call(this)},F2=function(e){y(this,Fp,l(this,Ri)?e:"")},jx=function(e){if(l(this,ns))for(const t of l(this,ns))t.tabIndex=e},cf=function(){y(this,Ri,!1),C(this,ie,jx).call(this,-1),C(this,ie,Cy).call(this)},A(le,Up),G(le,"_l10n",null),G(le,"_l10nResizer",null),G(le,"_borderLineWidth",-1),G(le,"_colorManager",new Ex),G(le,"_zIndex",1),G(le,"_telemetryTimeout",1e3);let ze=le;class Zz extends ze{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const p_=3285377520,Er=4294901760,Cs=65535;class j2{constructor(e){this.h1=e?e&4294967295:p_,this.h2=e?e&4294967295:p_}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,x=e.length;m<x;m++){const g=e.charCodeAt(m);g<=255?t[r++]=g:(t[r++]=g>>>8,t[r++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&Cs,v=f&Cs;for(let m=0;m<s;m++)m&1?(a=o[m],a=a*h&Er|a*p&Cs,a=a<<15|a>>>17,a=a*f&Er|a*v&Cs,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[m],c=c*h&Er|c*p&Cs,c=c<<15|c>>>17,c=c*f&Er|c*v&Cs,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*h&Er|a*p&Cs,a=a<<15|a>>>17,a=a*f&Er|a*v&Cs,s&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Er|e*36045&Cs,t=t*4283543511&Er|((t<<16|e>>>16)*2950163797&Er)>>>16,e^=t>>>1,e=e*444984403&Er|e*60499&Cs,t=t*3301882366&Er|((t<<16|e>>>16)*3120437893&Er)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Bx=Object.freeze({map:null,hash:"",transfer:void 0});var Ll,Dl,Mi,Ht,Yv,B2;class kA{constructor(){A(this,Yv);A(this,Ll,!1);A(this,Dl,null);A(this,Mi,null);A(this,Ht,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=l(this,Ht).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return l(this,Ht).get(e)}remove(e){const t=l(this,Ht).get(e);if(t!==void 0&&(t instanceof ze&&l(this,Mi).delete(t.annotationElementId),l(this,Ht).delete(e),l(this,Ht).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of l(this,Ht).values())if(r instanceof ze)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=l(this,Ht).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,l(this,Ht).set(e,t);s&&C(this,Yv,B2).call(this),t instanceof ze&&((l(this,Mi)||y(this,Mi,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,Ht).has(e)}get size(){return l(this,Ht).size}resetModified(){l(this,Ll)&&(y(this,Ll,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new U2(this)}get serializable(){if(l(this,Ht).size===0)return Bx;const e=new Map,t=new j2,r=[],s=Object.create(null);let i=!1;for(const[o,a]of l(this,Ht)){const c=a instanceof ze?a.serialize(!1,s):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Bx}get editorStats(){let e=null;const t=new Map;let r=0,s=0;for(const i of l(this,Ht).values()){if(!(i instanceof ze)){i.popup&&(i.popup.deleted?s+=1:r+=1);continue}i.isCommentDeleted?s+=1:i.hasEditedComment&&(r+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((s>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:r}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){y(this,Dl,null)}updateEditor(e,t){var s;const r=(s=l(this,Mi))==null?void 0:s.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=l(this,Mi))==null?void 0:t.get(e))||null}get modifiedIds(){if(l(this,Dl))return l(this,Dl);const e=[];if(l(this,Mi))for(const t of l(this,Mi).values())t.serialize()&&e.push(t.annotationElementId);return y(this,Dl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,Ht).entries()}}Ll=new WeakMap,Dl=new WeakMap,Mi=new WeakMap,Ht=new WeakMap,Yv=new WeakSet,B2=function(){l(this,Ll)||(y(this,Ll,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var $p;class U2 extends kA{constructor(t){super();A(this,$p);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);y(this,$p,{map:o,hash:s,transfer:i})}get print(){je("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,$p)}get modifiedIds(){return pe(this,"modifiedIds",{ids:new Set,hash:""})}}$p=new WeakMap;var dd;class e5{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,dd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,dd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||l(this,dd).has(e.loadedName))){if(we(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:o}=e,a=new FontFace(s,i,o);this.addNativeFontFace(a);try{await a.load(),l(this,dd).add(s),r==null||r(e)}catch{ae(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}je("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw ae(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return pe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return pe(this,"isSyncFontLoadingSupported",wn||Qt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(we(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(E,_){return E.charCodeAt(_)<<24|E.charCodeAt(_+1)<<16|E.charCodeAt(_+2)<<8|E.charCodeAt(_+3)&255}function s(E,_,k,P){const M=E.substring(0,_),D=E.substring(_+k);return M+P+D}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function d(E,_){if(++u>30){ae("Load test font never loaded."),_();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(d.bind(null,E,_))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,h.length,h);const v=16,m=1482184792;let x=r(f,v);for(i=0,o=h.length-3;i<o;i+=4)x=x-m+r(h,i)|0;i<h.length&&(x=x-m+r(h+"XXX",i)|0),f=s(f,v,4,Lz(x));const g=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const E of[e.loadedName,h]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=E,b.append(_)}this._document.body.append(b),d(h,()=>{b.remove(),t.complete()})}}dd=new WeakMap;var Re;class t5{constructor(e,t=null,r,s){A(this,Re);this.compiledGlyphs=Object.create(null),y(this,Re,e),this._inspectFont=t,r&&Object.assign(this,r),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${o2(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(o){ae(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}get black(){return l(this,Re).black}get bold(){return l(this,Re).bold}get disableFontFace(){return l(this,Re).disableFontFace??!1}get fontExtraProperties(){return l(this,Re).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,Re).isInvalidPDFjsFont}get isType3Font(){return l(this,Re).isType3Font}get italic(){return l(this,Re).italic}get missingFile(){return l(this,Re).missingFile}get remeasure(){return l(this,Re).remeasure}get vertical(){return l(this,Re).vertical}get ascent(){return l(this,Re).ascent}get defaultWidth(){return l(this,Re).defaultWidth}get descent(){return l(this,Re).descent}get bbox(){return l(this,Re).bbox}get fontMatrix(){return l(this,Re).fontMatrix}get fallbackName(){return l(this,Re).fallbackName}get loadedName(){return l(this,Re).loadedName}get mimetype(){return l(this,Re).mimetype}get name(){return l(this,Re).name}get data(){return l(this,Re).data}clearData(){l(this,Re).clearData()}get cssFontInfo(){return l(this,Re).cssFontInfo}get systemFontInfo(){return l(this,Re).systemFontInfo}get defaultVMetrics(){return l(this,Re).defaultVMetrics}}Re=new WeakMap;function n5(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(wn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function r5(n){if(wn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return sg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Vg(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Ux=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,s5=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",i5=Bz.bind(null,Ux,s5);var Ni,Qv;class o5{constructor(){A(this,Ni,new Map);A(this,Qv,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};l(this,Qv).then(()=>{for(const[s]of l(this,Ni))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){ae("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}l(this,Ni).set(t,s)}removeEventListener(e,t){const r=l(this,Ni).get(t);r==null||r(),l(this,Ni).delete(t)}terminate(){for(const[,e]of l(this,Ni))e==null||e();l(this,Ni).clear()}}Ni=new WeakMap,Qv=new WeakMap;const Gg={DATA:1,ERROR:2},yt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m_(){}function Rn(n){if(n instanceof Ka||n instanceof yx||n instanceof a_||n instanceof Pv||n instanceof Yw)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||je('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ka(n.message);case"InvalidPDFException":return new yx(n.message);case"PasswordException":return new a_(n.message,n.code);case"ResponseException":return new Pv(n.message,n.status,n.missing);case"UnknownErrorException":return new Yw(n.message,n.details)}return new Yw(n.message,n.toString())}var hd,Vr,$2,z2,H2,_y;class uf{constructor(e,t,r){A(this,Vr);A(this,hd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",C(this,Vr,$2).bind(this),{signal:l(this,hd).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},s),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:o,targetName:a,stream:yt.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{we(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:yt.CANCEL,streamId:i,reason:Rn(u)}),d.promise}},r)}destroy(){var e;(e=l(this,hd))==null||e.abort(),y(this,hd,null)}}hd=new WeakMap,Vr=new WeakSet,$2=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Vr,H2).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Gg.DATA)s.resolve(e.data);else if(e.callback===Gg.ERROR)s.reject(Rn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:r,targetName:s,callback:Gg.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:r,targetName:s,callback:Gg.ERROR,callbackId:e.callbackId,reason:Rn(o)})});return}if(e.streamId){C(this,Vr,z2).call(this,e);return}t(e.data)},z2=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:yt.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:yt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){we(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:yt.ERROR,streamId:t,reason:Rn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(a,e.data,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:yt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:yt.START_COMPLETE,streamId:t,reason:Rn(u)})})},H2=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case yt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Rn(e.reason));break;case yt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Rn(e.reason));break;case yt.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:yt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||m_).then(function(){i.postMessage({sourceName:r,targetName:s,stream:yt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:yt.PULL_COMPLETE,streamId:t,reason:Rn(u)})});break;case yt.ENQUEUE:if(we(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case yt.CLOSE:if(we(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Vr,_y).call(this,o,t);break;case yt.ERROR:we(o,"error should have stream controller"),o.controller.error(Rn(e.reason)),C(this,Vr,_y).call(this,o,t);break;case yt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Rn(e.reason)),C(this,Vr,_y).call(this,o,t);break;case yt.CANCEL:if(!a)break;const c=Rn(e.reason);Promise.try(a.onCancel||m_,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:yt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:yt.CANCEL_COMPLETE,streamId:t,reason:Rn(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},_y=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var zp;class V2{constructor({enableHWA:e=!1}){A(this,zp,!1);y(this,zp,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!l(this,zp)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){je("Abstract method `_createCanvas` called.")}}zp=new WeakMap;class a5 extends V2{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class G2{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){je("Abstract method `_fetch` called.")}}class g_ extends G2{async _fetch(e){const t=await ig(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):sg(t)}}class W2{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var Ol,fd,Ii,Li,an,Fl,jl,Q,nn,df,ru,Ty,su,K2,$x,iu,hf,ff,zx,pf;class l5 extends W2{constructor({docId:t,ownerDocument:r=globalThis.document}){super();A(this,Q);A(this,Ol);A(this,fd);A(this,Ii);A(this,Li);A(this,an);A(this,Fl);A(this,jl,0);y(this,Li,t),y(this,an,r)}addFilter(t){if(!t)return"none";let r=l(this,Q,nn).get(t);if(r)return r;const[s,i,o]=C(this,Q,Ty).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=l(this,Q,nn).get(a),r)return l(this,Q,nn).set(t,r),r;const c=`g_${l(this,Li)}_transfer_map_${ot(this,jl)._++}`,u=C(this,Q,su).call(this,c);l(this,Q,nn).set(t,u),l(this,Q,nn).set(a,u);const d=C(this,Q,iu).call(this,c);return C(this,Q,ff).call(this,s,i,o,d),u}addHCMFilter(t,r){var v;const s=`${t}-${r}`,i="base";let o=l(this,Q,df).get(i);if((o==null?void 0:o.key)===s||(o?((v=o.filter)==null||v.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,Q,df).set(i,o)),!t||!r))return o.url;const a=C(this,Q,pf).call(this,t);t=ee.makeHexColor(...a);const c=C(this,Q,pf).call(this,r);if(r=ee.makeHexColor(...c),l(this,Q,ru).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const u=new Array(256);for(let m=0;m<=255;m++){const x=m/255;u[m]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const d=u.join(","),h=`g_${l(this,Li)}_hcm_filter`,f=o.filter=C(this,Q,iu).call(this,h);C(this,Q,ff).call(this,d,d,d,f),C(this,Q,$x).call(this,f);const p=(m,x)=>{const g=a[m]/255,w=c[m]/255,b=new Array(x+1);for(let E=0;E<=x;E++)b[E]=g+E/x*(w-g);return b.join(",")};return C(this,Q,ff).call(this,p(0,5),p(1,5),p(2,5),f),o.url=C(this,Q,su).call(this,h),o.url}addAlphaFilter(t){let r=l(this,Q,nn).get(t);if(r)return r;const[s]=C(this,Q,Ty).call(this,[t]),i=`alpha_${s}`;if(r=l(this,Q,nn).get(i),r)return l(this,Q,nn).set(t,r),r;const o=`g_${l(this,Li)}_alpha_map_${ot(this,jl)._++}`,a=C(this,Q,su).call(this,o);l(this,Q,nn).set(t,a),l(this,Q,nn).set(i,a);const c=C(this,Q,iu).call(this,o);return C(this,Q,zx).call(this,s,c),a}addLuminosityFilter(t){let r=l(this,Q,nn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=C(this,Q,Ty).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=l(this,Q,nn).get(i),r)return l(this,Q,nn).set(t,r),r;const o=`g_${l(this,Li)}_luminosity_map_${ot(this,jl)._++}`,a=C(this,Q,su).call(this,o);l(this,Q,nn).set(t,a),l(this,Q,nn).set(i,a);const c=C(this,Q,iu).call(this,o);return C(this,Q,K2).call(this,c),t&&C(this,Q,zx).call(this,s,c),a}addHighlightHCMFilter(t,r,s,i,o){var w;const a=`${r}-${s}-${i}-${o}`;let c=l(this,Q,df).get(t);if((c==null?void 0:c.key)===a||(c?((w=c.filter)==null||w.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,Q,df).set(t,c)),!r||!s))return c.url;const[u,d]=[r,s].map(C(this,Q,pf).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,v]=[i,o].map(C(this,Q,pf).bind(this));f<h&&([h,f,p,v]=[f,h,v,p]),l(this,Q,ru).style.color="";const m=(b,E,_)=>{const k=new Array(256),P=(f-h)/_,M=b/255,D=(E-b)/(255*_);let O=0;for(let j=0;j<=_;j++){const U=Math.round(h+j*P),V=M+j*D;for(let $=O;$<=U;$++)k[$]=V;O=U+1}for(let j=O;j<256;j++)k[j]=k[O-1];return k.join(",")},x=`g_${l(this,Li)}_hcm_${t}_filter`,g=c.filter=C(this,Q,iu).call(this,x);return C(this,Q,$x).call(this,g),C(this,Q,ff).call(this,m(p[0],v[0],5),m(p[1],v[1],5),m(p[2],v[2],5),g),c.url=C(this,Q,su).call(this,x),c.url}destroy(t=!1){var r,s,i,o;t&&((r=l(this,Fl))!=null&&r.size)||((s=l(this,Ii))==null||s.parentNode.parentNode.remove(),y(this,Ii,null),(i=l(this,fd))==null||i.clear(),y(this,fd,null),(o=l(this,Fl))==null||o.clear(),y(this,Fl,null),y(this,jl,0))}}Ol=new WeakMap,fd=new WeakMap,Ii=new WeakMap,Li=new WeakMap,an=new WeakMap,Fl=new WeakMap,jl=new WeakMap,Q=new WeakSet,nn=function(){return l(this,fd)||y(this,fd,new Map)},df=function(){return l(this,Fl)||y(this,Fl,new Map)},ru=function(){if(!l(this,Ii)){const t=l(this,an).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=l(this,an).createElementNS(pi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),y(this,Ii,l(this,an).createElementNS(pi,"defs")),t.append(s),s.append(l(this,Ii)),l(this,an).body.append(t)}return l(this,Ii)},Ty=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[r,s,i]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=r[u]/255,a[u]=s[u]/255,c[u]=i[u]/255;return[o.join(","),a.join(","),c.join(",")]},su=function(t){if(l(this,Ol)===void 0){y(this,Ol,"");const r=l(this,an).URL;r!==l(this,an).baseURI&&(K0(r)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,Ol,r2(r,"")))}return`url(${l(this,Ol)}#${t})`},K2=function(t){const r=l(this,an).createElementNS(pi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},$x=function(t){const r=l(this,an).createElementNS(pi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},iu=function(t){const r=l(this,an).createElementNS(pi,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),l(this,Q,ru).append(r),r},hf=function(t,r,s){const i=l(this,an).createElementNS(pi,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},ff=function(t,r,s,i){const o=l(this,an).createElementNS(pi,"feComponentTransfer");i.append(o),C(this,Q,hf).call(this,o,"feFuncR",t),C(this,Q,hf).call(this,o,"feFuncG",r),C(this,Q,hf).call(this,o,"feFuncB",s)},zx=function(t,r){const s=l(this,an).createElementNS(pi,"feComponentTransfer");r.append(s),C(this,Q,hf).call(this,s,"feFuncA",t)},pf=function(t){return l(this,Q,ru).style.color=t,ag(getComputedStyle(l(this,Q,ru)).getPropertyValue("color"))};class X2{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){je("Abstract method `_fetch` called.")}}class y_ extends X2{async _fetch(e){const t=await ig(e,"arraybuffer");return new Uint8Array(t)}}class q2{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){je("Abstract method `_fetch` called.")}}class v_ extends q2{async _fetch(e){const t=await ig(e,"arraybuffer");return new Uint8Array(t)}}wn&&ae("Please use the `legacy` build in Node.js environments.");async function PA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class c5 extends W2{}class u5 extends V2{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class d5 extends G2{async _fetch(e){return PA(e)}}class h5 extends X2{async _fetch(e){return PA(e)}}class f5 extends q2{async _fetch(e){return PA(e)}}const eu="__forcedDependency",{floor:w_,ceil:b_}=Math;function Wg(n,e,t,r,s,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],s),n[e*4+3]=Math.max(n[e*4+3],i)}const Hx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var pd,ea;class p5{constructor(e,t){A(this,pd);A(this,ea);y(this,pd,e),y(this,ea,t)}get length(){return l(this,pd).length}isEmpty(e){return l(this,pd)[e]===Hx}minX(e){return l(this,ea)[e*4+0]/256}minY(e){return l(this,ea)[e*4+1]/256}maxX(e){return(l(this,ea)[e*4+2]+1)/256}maxY(e){return(l(this,ea)[e*4+3]+1)/256}}pd=new WeakMap,ea=new WeakMap;const Kg=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var In,Ln,Bl,rs,Ul,Di,ke,Me,Oi,Dn,Hp,md,$l,zl,Fi,ln,$s,Vp,Vx;class m5{constructor(e,t,r=!1){A(this,Vp);A(this,In,{__proto__:null});A(this,Ln,{__proto__:null,transform:[],moveText:[],sameLineText:[],[eu]:[]});A(this,Bl,new Map);A(this,rs,[]);A(this,Ul,[]);A(this,Di,[[1,0,0,1,0,0]]);A(this,ke,[-1/0,-1/0,1/0,1/0]);A(this,Me,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,Oi,-1);A(this,Dn,new Set);A(this,Hp,new Map);A(this,md,new Map);A(this,$l);A(this,zl);A(this,Fi);A(this,ln);A(this,$s);y(this,$l,e.width),y(this,zl,e.height),C(this,Vp,Vx).call(this,t),r&&y(this,$s,new Map)}growOperationsCount(e){e>=l(this,ln).length&&C(this,Vp,Vx).call(this,e,l(this,ln))}save(e){return y(this,In,{__proto__:l(this,In)}),y(this,Ln,{__proto__:l(this,Ln),transform:{__proto__:l(this,Ln).transform},moveText:{__proto__:l(this,Ln).moveText},sameLineText:{__proto__:l(this,Ln).sameLineText},[eu]:{__proto__:l(this,Ln)[eu]}}),y(this,ke,{__proto__:l(this,ke)}),l(this,rs).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(l(this,In));if(t===null)return this;y(this,In,t),y(this,Ln,Object.getPrototypeOf(l(this,Ln))),y(this,ke,Object.getPrototypeOf(l(this,ke)));const r=l(this,rs).pop();return r!==void 0&&((s=Kg(l(this,$s),e))==null||s.dependencies.add(r),l(this,ln)[e]=l(this,ln)[r]),this}recordOpenMarker(e){return l(this,rs).push(e),this}getOpenMarker(){return l(this,rs).length===0?null:l(this,rs).at(-1)}recordCloseMarker(e){var r;const t=l(this,rs).pop();return t!==void 0&&((r=Kg(l(this,$s),e))==null||r.dependencies.add(t),l(this,ln)[e]=l(this,ln)[t]),this}beginMarkedContent(e){return l(this,Ul).push(e),this}endMarkedContent(e){var r;const t=l(this,Ul).pop();return t!==void 0&&((r=Kg(l(this,$s),e))==null||r.dependencies.add(t),l(this,ln)[e]=l(this,ln)[t]),this}pushBaseTransform(e){return l(this,Di).push(ee.multiplyByDOMMatrix(l(this,Di).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,Di).length>1&&l(this,Di).pop(),this}recordSimpleData(e,t){return l(this,In)[e]=t,this}recordIncrementalData(e,t){return l(this,Ln)[e].push(t),this}resetIncrementalData(e,t){return l(this,Ln)[e].length=0,this}recordNamedData(e,t){return l(this,Bl).set(e,t),this}recordSimpleDataFromNamed(e,t,r){l(this,In)[e]=l(this,Bl).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(eu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in l(this,In)&&this.recordFutureForcedDependency(t,l(this,In)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of l(this,Dn))this.recordFutureForcedDependency(eu,e);return this}resetBBox(e){return l(this,Oi)!==e&&(y(this,Oi,e),l(this,Me)[0]=1/0,l(this,Me)[1]=1/0,l(this,Me)[2]=-1/0,l(this,Me)[3]=-1/0),this}recordClipBox(e,t,r,s,i,o){const a=ee.multiplyByDOMMatrix(l(this,Di).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];ee.axialAlignedBoundingBox([r,i,s,o],a,c);const u=ee.intersect(l(this,ke),c);return u?(l(this,ke)[0]=u[0],l(this,ke)[1]=u[1],l(this,ke)[2]=u[2],l(this,ke)[3]=u[3]):(l(this,ke)[0]=l(this,ke)[1]=1/0,l(this,ke)[2]=l(this,ke)[3]=-1/0),this}recordBBox(e,t,r,s,i,o){const a=l(this,ke);if(a[0]===1/0)return this;const c=ee.multiplyByDOMMatrix(l(this,Di).at(-1),t.getTransform());if(a[0]===-1/0)return ee.axialAlignedBoundingBox([r,i,s,o],c,l(this,Me)),this;const u=[1/0,1/0,-1/0,-1/0];return ee.axialAlignedBoundingBox([r,i,s,o],c,u),l(this,Me)[0]=Math.min(l(this,Me)[0],Math.max(u[0],a[0])),l(this,Me)[1]=Math.min(l(this,Me)[1],Math.max(u[1],a[1])),l(this,Me)[2]=Math.max(l(this,Me)[2],Math.min(u[2],a[2])),l(this,Me)[3]=Math.max(l(this,Me)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,r,s=1,i=0,o=0,a){const c=r.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&l(this,md).get(r),u!==!1&&(d=[0,0,0,0],ee.axialAlignedBoundingBox(c,r.fontMatrix,d),(s!==1||i!==0||o!==0)&&ee.scaleMinMax([s,0,0,-s,i,o],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return c&&d&&u===void 0&&(u=d[0]<=i-h.actualBoundingBoxLeft&&d[2]>=i+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,l(this,md).set(r,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-h.actualBoundingBoxLeft,i+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,Me)[0]=Math.max(0,l(this,ke)[0]),l(this,Me)[1]=Math.max(0,l(this,ke)[1]),l(this,Me)[2]=Math.min(l(this,$l),l(this,ke)[2]),l(this,Me)[3]=Math.min(l(this,zl),l(this,ke)[3]),this}getSimpleIndex(e){return l(this,In)[e]}recordDependencies(e,t){const r=l(this,Dn),s=l(this,In),i=l(this,Ln);for(const o of t)o in l(this,In)?r.add(s[o]):o in i&&i[o].forEach(r.add,r);return this}recordNamedDependency(e,t){return l(this,Bl).has(t)&&l(this,Dn).add(l(this,Bl).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[eu]),l(this,$s)){const r=Kg(l(this,$s),e),{dependencies:s}=r;l(this,Dn).forEach(s.add,s),l(this,rs).forEach(s.add,s),l(this,Ul).forEach(s.add,s),s.delete(e),r.isRenderingOperation=!0}if(l(this,Oi)===e){const r=w_(l(this,Me)[0]*256/l(this,$l)),s=w_(l(this,Me)[1]*256/l(this,zl)),i=b_(l(this,Me)[2]*256/l(this,$l)),o=b_(l(this,Me)[3]*256/l(this,zl));Wg(l(this,Fi),e,r,s,i,o);for(const a of l(this,Dn))a!==e&&Wg(l(this,Fi),a,r,s,i,o);for(const a of l(this,rs))a!==e&&Wg(l(this,Fi),a,r,s,i,o);for(const a of l(this,Ul))a!==e&&Wg(l(this,Fi),a,r,s,i,o);t||(l(this,Dn).clear(),y(this,Oi,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(l(this,Dn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of r)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,Oi)===e&&(y(this,Oi,-1),l(this,ke)[0]=Math.max(l(this,ke)[0],l(this,Me)[0]),l(this,ke)[1]=Math.max(l(this,ke)[1],l(this,Me)[1]),l(this,ke)[2]=Math.min(l(this,ke)[2],l(this,Me)[2]),l(this,ke)[3]=Math.min(l(this,ke)[3],l(this,Me)[3]),t||l(this,Dn).clear()),this}_takePendingDependencies(){const e=l(this,Dn);return y(this,Dn,new Set),e}_extractOperation(e){const t=l(this,Hp).get(e);return l(this,Hp).delete(e),t}_pushPendingDependencies(e){for(const t of e)l(this,Dn).add(t)}take(){return l(this,md).clear(),new p5(l(this,ln),l(this,Fi))}takeDebugMetadata(){return l(this,$s)}}In=new WeakMap,Ln=new WeakMap,Bl=new WeakMap,rs=new WeakMap,Ul=new WeakMap,Di=new WeakMap,ke=new WeakMap,Me=new WeakMap,Oi=new WeakMap,Dn=new WeakMap,Hp=new WeakMap,md=new WeakMap,$l=new WeakMap,zl=new WeakMap,Fi=new WeakMap,ln=new WeakMap,$s=new WeakMap,Vp=new WeakSet,Vx=function(e,t){const r=new ArrayBuffer(e*4);y(this,Fi,new Uint8ClampedArray(r)),y(this,ln,new Uint32Array(r)),t&&t.length>0?(l(this,ln).set(t),l(this,ln).fill(Hx,t.length)):l(this,ln).fill(Hx)};var Oe,ct,ss,gd,yd;const zA=class zA{constructor(e,t,r){A(this,Oe);A(this,ct);A(this,ss);A(this,gd,0);A(this,yd,0);if(e instanceof zA&&l(e,ss)===!!r)return e;y(this,Oe,e),y(this,ct,t),y(this,ss,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ot(this,yd)._++,l(this,Oe).save(l(this,ct)),this}restore(e){return l(this,yd)>0&&(l(this,Oe).restore(l(this,ct)),ot(this,yd)._--),this}recordOpenMarker(e){return ot(this,gd)._++,this}getOpenMarker(){return l(this,gd)>0?l(this,ct):l(this,Oe).getOpenMarker()}recordCloseMarker(e){return ot(this,gd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,Oe).pushBaseTransform(e),this}popBaseTransform(){return l(this,Oe).popBaseTransform(),this}recordSimpleData(e,t){return l(this,Oe).recordSimpleData(e,l(this,ct)),this}recordIncrementalData(e,t){return l(this,Oe).recordIncrementalData(e,l(this,ct)),this}resetIncrementalData(e,t){return l(this,Oe).resetIncrementalData(e,l(this,ct)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return l(this,Oe).recordSimpleDataFromNamed(e,t,l(this,ct)),this}recordFutureForcedDependency(e,t){return l(this,Oe).recordFutureForcedDependency(e,l(this,ct)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,Oe).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,Oe).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,ss)||l(this,Oe).resetBBox(l(this,ct)),this}recordClipBox(e,t,r,s,i,o){return l(this,ss)||l(this,Oe).recordClipBox(l(this,ct),t,r,s,i,o),this}recordBBox(e,t,r,s,i,o){return l(this,ss)||l(this,Oe).recordBBox(l(this,ct),t,r,s,i,o),this}recordCharacterBBox(e,t,r,s,i,o,a){return l(this,ss)||l(this,Oe).recordCharacterBBox(l(this,ct),t,r,s,i,o,a),this}recordFullPageBBox(e){return l(this,ss)||l(this,Oe).recordFullPageBBox(l(this,ct)),this}getSimpleIndex(e){return l(this,Oe).getSimpleIndex(e)}recordDependencies(e,t){return l(this,Oe).recordDependencies(l(this,ct),t),this}recordNamedDependency(e,t){return l(this,Oe).recordNamedDependency(l(this,ct),t),this}recordOperation(e){return l(this,Oe).recordOperation(l(this,ct),!0),this}recordShowTextOperation(e){return l(this,Oe).recordShowTextOperation(l(this,ct),!0),this}bboxToClipBoxDropOperation(e){return l(this,ss)||l(this,Oe).bboxToClipBoxDropOperation(l(this,ct),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Oe=new WeakMap,ct=new WeakMap,ss=new WeakMap,gd=new WeakMap,yd=new WeakMap;let Iv=zA;const Cr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Kt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Gx(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class RA{isModifyingCurrentTransform(){return!1}getPattern(){je("Abstract method `getPattern` called.")}}class g5 extends RA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Kt.STROKE||s===Kt.FILL){const o=t.current.getClippedPathBoundingBox(s,Je(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),r=ee.transform(r,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Gx(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);i.setTransform(h)}else Gx(e,this._bbox),i=this._createGradient(e);return i}}function Zw(n,e,t,r,s,i,o,a){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=i,i=o,o=f),c[r+1]>c[s+1]&&(f=r,r=s,s=f,f=o,o=a,a=f),c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=i,i=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,m=(c[r]+e.offsetX)*e.scaleX,x=(c[r+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,w=(c[s+1]+e.offsetY)*e.scaleY;if(v>=w)return;const b=u[i],E=u[i+1],_=u[i+2],k=u[o],P=u[o+1],M=u[o+2],D=u[a],O=u[a+1],j=u[a+2],U=Math.round(v),V=Math.round(w);let $,X,H,B,N,R,I,L;for(let F=U;F<=V;F++){if(F<x){const Y=F<v?0:(v-F)/(v-x);$=p-(p-m)*Y,X=b-(b-k)*Y,H=E-(E-P)*Y,B=_-(_-M)*Y}else{let Y;F>w?Y=1:x===w?Y=0:Y=(x-F)/(x-w),$=m-(m-g)*Y,X=k-(k-D)*Y,H=P-(P-O)*Y,B=M-(M-j)*Y}let z;F<v?z=0:F>w?z=1:z=(v-F)/(v-w),N=p-(p-g)*z,R=b-(b-D)*z,I=E-(E-O)*z,L=_-(_-j)*z;const K=Math.round(Math.min($,N)),re=Math.round(Math.max($,N));let se=h*F+K*4;for(let Y=K;Y<=re;Y++)z=($-Y)/($-N),z<0?z=0:z>1&&(z=1),d[se++]=X-(X-R)*z|0,d[se++]=H-(H-I)*z|0,d[se++]=B-(B-L)*z|0,d[se++]=255}}function y5(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(r.length/a)-1,u=a-1;for(i=0;i<c;i++){let d=i*a;for(let h=0;h<u;h++,d++)Zw(n,t,r[d],r[d+1],r[d+a],s[d],s[d+1],s[d+a]),Zw(n,t,r[d+a+1],r[d+1],r[d+a],s[d+a+1],s[d+1],s[d+a])}break;case"triangles":for(i=0,o=r.length;i<o;i+=3)Zw(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class v5 extends RA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,v=d/f,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/v},x=h+2*2,g=f+2*2,w=r.getCanvas("mesh",x,g),b=w.context,E=b.createImageData(h,f);if(t){const k=E.data;for(let P=0,M=k.length;P<M;P+=4)k[P]=t[0],k[P+1]=t[1],k[P+2]=t[2],k[P+3]=255}for(const k of this._figures)y5(E,k,m);return b.putImageData(E,2,2),{canvas:w.canvas,offsetX:a-2*p,offsetY:c-2*v,scaleX:p,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){Gx(e,this._bbox);const i=new Float32Array(2);if(s===Kt.SHADING)ee.singularValueDecompose2dScale(Je(e),i);else if(this.matrix){ee.singularValueDecompose2dScale(this.matrix,i);const[a,c]=i;ee.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=c}else ee.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,s===Kt.SHADING?null:this._background,t.cachedCanvases);return s!==Kt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class w5 extends RA{getPattern(){return"hotpink"}}function b5(n){switch(n[0]){case"RadialAxial":return new g5(n);case"Mesh":return new v5(n);case"Dummy":return new w5}throw new Error(`Unknown IR type: ${n[0]}`)}const x_={COLORED:1,UNCOLORED:2},Jv=class Jv{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e,t){var R,I;const{bbox:r,operatorList:s,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),W0("TilingType: "+o);const h=r[0],f=r[1],p=r[2],v=r[3],m=p-h,x=v-f,g=new Float32Array(2);ee.singularValueDecompose2dScale(this.matrix,g);const[w,b]=g;ee.singularValueDecompose2dScale(this.baseTransform,g);const E=w*g[0],_=b*g[1];let k=m,P=x,M=!1,D=!1;const O=Math.ceil(u*E),j=Math.ceil(d*_),U=Math.ceil(m*E),V=Math.ceil(x*_);O>=U?k=u:M=!0,j>=V?P=d:D=!0;const $=this.getSizeAndScale(k,this.ctx.canvas.width,E),X=this.getSizeAndScale(P,this.ctx.canvas.height,_),H=e.cachedCanvases.getCanvas("pattern",$.size,X.size),B=H.context,N=c.createCanvasGraphics(B,t);if(N.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(N,i,a),B.translate(-$.scale*h,-X.scale*f),N.transform(0,$.scale,0,0,X.scale,0,0),B.save(),(R=N.dependencyTracker)==null||R.save(),this.clipBbox(N,h,f,p,v),N.baseTransform=Je(N.ctx),N.executeOperatorList(s),N.endDrawing(),(I=N.dependencyTracker)==null||I.restore(),B.restore(),M||D){const L=H.canvas;M&&(k=u),D&&(P=d);const F=this.getSizeAndScale(k,this.ctx.canvas.width,E),z=this.getSizeAndScale(P,this.ctx.canvas.height,_),K=F.size,re=z.size,se=e.cachedCanvases.getCanvas("pattern-workaround",K,re),Y=se.context,ge=M?Math.floor(m/u):0,Ae=D?Math.floor(x/d):0;for(let _e=0;_e<=ge;_e++)for(let Be=0;Be<=Ae;Be++)Y.drawImage(L,K*_e,re*Be,K,re,0,0,K,re);return{canvas:se.canvas,scaleX:F.scale,scaleY:z.scale,offsetX:h,offsetY:f}}return{canvas:H.canvas,scaleX:$.scale,scaleY:X.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const s=Math.max(Jv.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),ee.axialAlignedBoundingBox([t,r,s,i],Je(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case x_.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=i.fillColor=o,s.strokeStyle=i.strokeColor=a;break;case x_.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new Iz(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s,i){let o=r;s!==Kt.SHADING&&(o=ee.transform(o,t.baseTransform),this.matrix&&(o=ee.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let c=new DOMMatrix(o);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(c),u}};G(Jv,"MAX_PATTERN_SIZE",3e3);let Wx=Jv;function x5({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=Qt.isLittleEndian?4278190080:255,[c,u]=o?[i,a]:[a,i],d=r>>3,h=r&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let v=0;v<s;v++){for(const x=e+d;e<x;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(h===0)continue;const m=e<f?n[e++]:255;for(let x=0;x<h;x++)t[p++]=m&1<<7-x?u:c}return{srcPos:e,destPos:p}}const S_=16,A_=100,S5=15,E_=10,Bn=16,eb=new DOMMatrix,fr=new Float32Array(2),xu=new Float32Array([1/0,1/0,-1/0,-1/0]);function A5(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,o,a){e.transform(t,r,s,i,o,a),this.__originalTransform(t,r,s,i,o,a)},n.setTransform=function(t,r,s,i,o,a){e.setTransform(t,r,s,i,o,a),this.__originalSetTransform(t,r,s,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class E5{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Xg(n,e,t,r,s,i,o,a,c,u){const[d,h,f,p,v,m]=Je(n);if(h===0&&f===0){const w=o*d+v,b=Math.round(w),E=a*p+m,_=Math.round(E),k=(o+c)*d+v,P=Math.abs(Math.round(k)-b)||1,M=(a+u)*p+m,D=Math.abs(Math.round(M)-_)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),b,_),n.drawImage(e,t,r,s,i,0,0,P,D),n.setTransform(d,h,f,p,v,m),[P,D]}if(d===0&&p===0){const w=a*f+v,b=Math.round(w),E=o*h+m,_=Math.round(E),k=(a+u)*f+v,P=Math.abs(Math.round(k)-b)||1,M=(o+c)*h+m,D=Math.abs(Math.round(M)-_)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,b,_),n.drawImage(e,t,r,s,i,0,0,D,P),n.setTransform(d,h,f,p,v,m),[D,P]}n.drawImage(e,t,r,s,i,o,a,c,u);const x=Math.hypot(d,h),g=Math.hypot(f,p);return[x*c,g*u]}class C_{constructor(e,t,r){G(this,"alphaIsShape",!1);G(this,"fontSize",0);G(this,"fontSizeScale",1);G(this,"textMatrix",null);G(this,"textMatrixScale",1);G(this,"fontMatrix",gx);G(this,"leading",0);G(this,"x",0);G(this,"y",0);G(this,"lineX",0);G(this,"lineY",0);G(this,"charSpacing",0);G(this,"wordSpacing",0);G(this,"textHScale",1);G(this,"textRenderingMode",Ut.FILL);G(this,"textRise",0);G(this,"fillColor","#000000");G(this,"strokeColor","#000000");G(this,"patternFill",!1);G(this,"patternStroke",!1);G(this,"fillAlpha",1);G(this,"strokeAlpha",1);G(this,"lineWidth",1);G(this,"activeSMask",null);G(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=xu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Kt.FILL,t=null){const r=this.minMax.slice();if(e===Kt.STROKE){t||je("Stroke bounding box must include transform."),ee.singularValueDecompose2dScale(t,fr);const s=fr[0]*this.lineWidth/2,i=fr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(xu,0)}getClippedPathBoundingBox(e=Kt.FILL,t=null){return ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function __(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let c=0,u;const d=e.data,h=a.data;let f,p,v,m;if(e.kind===wy.GRAYSCALE_1BPP){const x=d.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),w=g.length,b=r+7>>3,E=4294967295,_=Qt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(v=f<i?Bn:s,u=0,p=0;p<v;p++){const k=x-c;let P=0;const M=k>b?r:k*8-7,D=M&-8;let O=0,j=0;for(;P<D;P+=8)j=d[c++],g[u++]=j&128?E:_,g[u++]=j&64?E:_,g[u++]=j&32?E:_,g[u++]=j&16?E:_,g[u++]=j&8?E:_,g[u++]=j&4?E:_,g[u++]=j&2?E:_,g[u++]=j&1?E:_;for(;P<M;P++)O===0&&(j=d[c++],O=128),g[u++]=j&O?E:_,O>>=1}for(;u<w;)g[u++]=0;n.putImageData(a,0,f*Bn)}}else if(e.kind===wy.RGBA_32BPP){for(p=0,m=r*Bn*4,f=0;f<i;f++)h.set(d.subarray(c,c+m)),c+=m,n.putImageData(a,0,p),p+=Bn;f<o&&(m=r*s*4,h.set(d.subarray(c,c+m)),n.putImageData(a,0,p))}else if(e.kind===wy.RGB_24BPP)for(v=Bn,m=r*v,f=0;f<o;f++){for(f>=i&&(v=s,m=r*v),u=0,p=m;p--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(a,0,f*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function T_(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Bn,i=(t-s)/Bn,o=s===0?i:i+1,a=n.createImageData(r,Bn);let c=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<i?Bn:s;({srcPos:c}=x5({src:u,srcPos:c,dest:d,width:r,height:f,nonBlackColor:0})),n.putImageData(a,0,h*Bn)}}function Kh(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function qg(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function k_(n,e){if(e)return!0;ee.singularValueDecompose2dScale(n,fr);const t=Math.fround(ai.pixelRatio*Xa.PDF_TO_CSS_UNITS);return fr[0]<=t&&fr[1]<=t}const C5=["butt","round","square"],_5=["miter","round","bevel"],T5={},P_={};var bs,Kx,Xx,qx;const HA=class HA{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},c,u,d){A(this,bs);this.ctx=e,this.current=new C_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new E5(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,r=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Je(this.compositeCtx))}this.ctx.save(),qg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Je(this.ctx)}executeOperatorList(e,t,r,s,i){var g;const o=e.argsArray,a=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const d=u-c>E_&&typeof r=="function",h=d?Date.now()+S5:0;let f=0;const p=this.commonObjs,v=this.objs;let m,x;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,r),c;if(!i||i(c))if(m=a[c],x=o[c]??null,m!==ap.dependency)x===null?this[m](c):this[m](c,...x);else for(const w of x){(g=this.dependencyTracker)==null||g.recordNamedData(w,c);const b=w.startsWith("g_")?p:v;if(!b.has(w))return b.get(w,r),c}if(c++,c===u)return c;if(d&&++f>E_){if(Date.now()>h)return r(),c;f=0}}}endDrawing(){C(this,bs,Kx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,bs,Xx).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,c=s,u="prescale1",d,h;for(;i>2&&a>1||o>2&&c>1;){let f=a,p=c;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,a,c,0,0,f,p),e=d.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e,t){var O,j;const r=this.ctx,{width:s,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,c=Je(r);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;d=JSON.stringify(a?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(U),u||(u=new Map,this._cachedBitmapsMap.set(U,u));const V=u.get(d);if(V&&!a){const $=Math.round(Math.min(c[0],c[2])+c[4]),X=Math.round(Math.min(c[1],c[3])+c[5]);return(O=this.dependencyTracker)==null||O.recordDependencies(e,Cr.transformAndFill),{canvas:V,offsetX:$,offsetY:X}}h=V}h||(f=this.cachedCanvases.getCanvas("maskCanvas",s,i),T_(f.context,t));let p=ee.transform(c,[1/s,0,0,-1/i,0,0]);p=ee.transform(p,[1,0,0,1,0,-i]);const v=xu.slice();ee.axialAlignedBoundingBox([0,0,s,i],p,v);const[m,x,g,w]=v,b=Math.round(g-m)||1,E=Math.round(w-x)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,E),k=_.context,P=m,M=x;k.translate(-P,-M),k.transform(...p),h||(h=this._scaleImage(f.canvas,Es(k)),h=h.img,u&&a&&u.set(d,h)),k.imageSmoothingEnabled=k_(Je(k),t.interpolate),Xg(k,h,0,0,h.width,h.height,0,0,s,i),k.globalCompositeOperation="source-in";const D=ee.transform(Es(k),[1,0,0,1,-P,-M]);return k.fillStyle=a?o.getPattern(r,this,D,Kt.FILL,e):o,k.fillRect(0,0,s,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,_.canvas)),(j=this.dependencyTracker)==null||j.recordDependencies(e,Cr.transformAndFill),{canvas:_.canvas,offsetX:Math.round(P),offsetY:Math.round(M)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=C5[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=_5[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,s,i,o,a;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,r);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),Kh(this.suspendedCtx,o),A5(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,c=s[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,r,a,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,c,u,d,h){let f=e.canvas,p=c-d,v=u-h;if(o)if(p<0||v<0||p+r>f.width||v+s>f.height){const x=this.cachedCanvases.getCanvas("maskExtension",r,s),g=x.context;g.drawImage(f,-p,-v),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,r,s),g.globalCompositeOperation="source-over",f=x.canvas,p=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(p,v,r,s),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,v,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(c,u,r,s),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(f,p,v,r,s,c,u,r,s),t.restore()}save(e){var r;this.inSMaskMode&&Kh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Kh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,o,a){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,r,s,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,s){let[i]=r;if(!s){i||(i=r[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===ap.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=r[0]=new Path2D;for(let a=0,c=i.length;a<c;)switch(i[a++]){case zg.moveTo:o.moveTo(i[a++],i[a++]);break;case zg.lineTo:o.lineTo(i[a++],i[a++]);break;case zg.curveTo:o.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case zg.closePath:o.closePath();break;default:ae(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=o}ee.axialAlignedBoundingBox(s,Je(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var o;const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Es(s),Kt.STROKE,e),a){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(a)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Cr.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Kt.STROKE,Je(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var u,d,h;const s=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=i.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),s.save(),s.fillStyle=i.getPattern(s,this,Es(s),Kt.FILL,e),f){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=p}a=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Cr.fill),a&&(s.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,Cr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=T5}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=P_}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,i=r.getTransform().invertSelf();for(const{transform:o,x:a,y:c,fontSize:u,path:d}of t)d&&s.addPath(d,new DOMMatrix(o).preMultiplySelf(i).translate(a,c).scale(u,-u));r.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||gx,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ae("Invalid font matrix for font "+t),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const o=s.loadedName||"sans-serif",a=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let d=r;r<S_?d=S_:r>A_&&(d=A_),this.current.fontSizeScale=r/d,this.ctx.font=`${u} ${c} ${d}px ${a}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,s,i,o){var g,w,b,E;const a=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Ut.FILL_STROKE_MASK,p=!!(d&Ut.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile,m=c.patternStroke&&!u.missingFile;let x;if((u.disableFontFace||p||v||m)&&!u.missingFile&&(x=u.getPathGenerator(this.commonObjs,t)),x&&(u.disableFontFace||v||m)){a.save(),a.translate(r,s),a.scale(h,-h),(g=this.dependencyTracker)==null||g.recordCharacterBBox(e,a,u);let _;if(f===Ut.FILL||f===Ut.FILL_STROKE)if(i){_=a.getTransform(),a.setTransform(...i);const k=C(this,bs,qx).call(this,x,_,i);a.fill(k)}else a.fill(x);if(f===Ut.STROKE||f===Ut.FILL_STROKE)if(o){_||(_=a.getTransform()),a.setTransform(...o);const{a:k,b:P,c:M,d:D}=_,O=ee.inverseTransform(o),j=ee.transform([k,P,M,D,0,0],O);ee.singularValueDecompose2dScale(j,fr),a.lineWidth*=Math.max(fr[0],fr[1])/h,a.stroke(C(this,bs,qx).call(this,x,_,o))}else a.lineWidth/=h,a.stroke(x);a.restore()}else(f===Ut.FILL||f===Ut.FILL_STROKE)&&(a.fillText(t,r,s),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,a,u,h,r,s,()=>a.measureText(t))),(f===Ut.STROKE||f===Ut.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(e,a,u,h,r,s,()=>a.measureText(t)).recordDependencies(e,Cr.stroke)),a.strokeText(t,r,s));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Je(a),x:r,y:s,fontSize:h,path:x}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,u,h,r,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return pe(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var M,D,O,j;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Cr.showText).resetBBox(e),this.current.textRenderingMode&Ut.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,s=r.font;if(s.isType3Font){this.showType3Text(e,t),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e);return}const i=r.fontSize;if(i===0){(D=this.dependencyTracker)==null||D.recordOperation(e);return}const o=this.ctx,a=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,d=r.fontDirection,h=r.textHScale*d,f=t.length,p=s.vertical,v=p?1:-1,m=s.defaultVMetrics,x=i*r.fontMatrix[0],g=r.textRenderingMode===Ut.FILL&&!s.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),d>0?o.scale(h,-1):o.scale(h,1);let w,b;if(r.patternFill){o.save();const U=r.fillColor.getPattern(o,this,Es(o),Kt.FILL,e);w=Je(o),o.restore(),o.fillStyle=U}if(r.patternStroke){o.save();const U=r.strokeColor.getPattern(o,this,Es(o),Kt.STROKE,e);b=Je(o),o.restore(),o.strokeStyle=U}let E=r.lineWidth;const _=r.textMatrixScale;if(_===0||E===0){const U=r.textRenderingMode&Ut.FILL_STROKE_MASK;(U===Ut.STROKE||U===Ut.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=_;if(a!==1&&(o.scale(a,a),E/=a),o.lineWidth=E,s.isInvalidPDFjsFont){const U=[];let V=0;for(const X of t)U.push(X.unicode),V+=X.width;const $=U.join("");if(o.fillText($,0,0),this.dependencyTracker!==null){const X=o.measureText($);this.dependencyTracker.recordBBox(e,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=V*x*h,o.restore(),this.compose();return}let k=0,P;for(P=0;P<f;++P){const U=t[P];if(typeof U=="number"){k+=v*U*i/1e3;continue}let V=!1;const $=(U.isSpace?u:0)+c,X=U.fontChar,H=U.accent;let B,N,R=U.width;if(p){const F=U.vmetric||m,z=-(U.vmetric?F[1]:R*.5)*x,K=F[2]*x;R=F?-F[0]:R,B=z/a,N=(k+K)/a}else B=k/a,N=0;let I;if(s.remeasure&&R>0){I=o.measureText(X);const F=I.width*1e3/i*a;if(R<F&&this.isFontSubpixelAAEnabled){const z=R/F;V=!0,o.save(),o.scale(z,1),B/=z}else R!==F&&(B+=(R-F)/2e3*i/a)}if(this.contentVisible&&(U.isInFont||s.missingFile)){if(g&&!H)o.fillText(X,B,N),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,o,I?{bbox:null}:s,i/a,B,N,()=>I??o.measureText(X));else if(this.paintChar(e,X,B,N,w,b),H){const F=B+i*H.offset.x/a,z=N-i*H.offset.y/a;this.paintChar(e,H.fontChar,F,z,w,b)}}const L=p?R*x-$*d:R*x+$*d;k+=L,V&&o.restore()}p?r.y-=k:r.x+=k*h,o.restore(),this.compose(),(j=this.dependencyTracker)==null||j.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,s=this.current,i=s.font,o=s.fontSize,a=s.fontDirection,c=i.vertical?1:-1,u=s.charSpacing,d=s.wordSpacing,h=s.textHScale*a,f=s.fontMatrix||gx,p=t.length,v=s.textRenderingMode===Ut.INVISIBLE;let m,x,g,w;if(v||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(h,a);const b=this.dependencyTracker;for(this.dependencyTracker=b?new Iv(b,e):null,m=0;m<p;++m){if(x=t[m],typeof x=="number"){w=c*x*o/1e3,this.ctx.translate(w,0),s.x+=w*h;continue}const E=(x.isSpace?d:0)+u,_=i.charProcOperatorList[x.operatorListId];_?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...f),this.executeOperatorList(_),this.restore()):ae(`Type3 character "${x.operatorListId}" is not available.`);const k=[x.width,0];ee.applyTransform(k,f),g=k[0]*o+E,r.translate(g,0),s.x+=g*h}r.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,s,i,o,a){var u;const c=new Path2D;c.rect(s,i,o-s,a-i),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,s,o,i,a).recordClipBox(e,this.ctx,s,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const s=this.baseTransform||Je(this.ctx),i={createCanvasGraphics:(o,a)=>new HA(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Iv(this.dependencyTracker,a,!0):null)};r=new Wx(t,this.ctx,i,s)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=b5(this.getObject(e,t)),this.cachedPatterns.set(t,s)),r&&(s.matrix=r),s}shadingFill(e,t){var o;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,t);r.fillStyle=s.getPattern(r,this,Es(r),Kt.SHADING,e);const i=Es(r);if(i){const{width:a,height:c}=r.canvas,u=xu.slice();ee.axialAlignedBoundingBox([0,0,a,c],i,u);const[d,h,f,p]=u;this.ctx.fillRect(d,h,f-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Cr.transform).recordDependencies(e,Cr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){je("Should not call beginInlineImage")}beginImageData(){je("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Je(this.ctx),r)){ee.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,o,a,c]=r,u=new Path2D;u.rect(i,o,a-i,c-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,i,a,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var b;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||W0("TODO: Support non-isolated groups."),t.knockout&&ae("Knockout groups not supported.");const s=Je(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=xu.slice();ee.axialAlignedBoundingBox(t.bbox,Je(r),i);const o=[0,0,r.canvas.width,r.canvas.height];i=ee.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),c=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),d=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),p=f.context;p.translate(-a,-c),p.transform(...s);let v=new Path2D;const[m,x,g,w]=t.bbox;if(v.rect(m,x,g-m,w-x),t.matrix){const E=new Path2D;E.addPath(v,new DOMMatrix(t.matrix)),v=E}p.clip(v),t.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,c),r.save()),Kh(r,p),this.ctx=p,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Je(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=xu.slice();ee.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,r,s,i,o){if(C(this,bs,Kx).call(this),qg(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const a=r[2]-r[0],c=r[3]-r[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=c,ee.singularValueDecompose2dScale(Je(this.ctx),fr);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(fr[0],0,0,-fr[1],0,c*fr[1]),qg(this.ctx)}else{qg(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],a,c),this.ctx.clip(u)}}this.current=new C_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),C(this,bs,Xx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const s=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,s=0,i=0,o,a){var h,f,p;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=Je(c);c.transform(r,s,i,o,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let v=0,m=a.length;v<m;v+=2){const x=ee.transform(u,[r,s,i,o,a[v],a[v+1]]);c.drawImage(d.canvas,x[4],x[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,x[4],x[4]+d.canvas.width,x[5],x[5]+d.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,c;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Cr.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:p}=u,v=this.cachedCanvases.getCanvas("maskCanvas",h,f),m=v.context;m.save();const x=this.getObject(e,d,u);T_(m,x),m.globalCompositeOperation="source-in",m.fillStyle=i?s.getPattern(m,this,Es(r),Kt.FILL,e):s,m.fillRect(0,0,h,f),m.restore(),r.save(),r.transform(...p),r.scale(1,-1),Xg(r,v.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,h,0,f),r.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,s,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){ae("Dependent image isn't ready yet");return}const a=o.width,c=o.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[r,0,0,s,i[d],i[d+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const r=t.width,s=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/r,-1/s);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,s).context;__(h,t),a=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(a,Es(i));i.imageSmoothingEnabled=k_(Je(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,r,-s,0).recordDependencies(e,Cr.imageXObject).recordOperation(e),Xg(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var o,a,c;if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;__(f,t),i=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of r)s.save(),s.transform(...u.transform),s.scale(1,-1),Xg(s,i,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Cr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var o,a;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===P_?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Je(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const c=Math.abs(t),u=Math.abs(i);if(c===u)if(e===0)o=a=1/c;else{const d=c*e;o=a=d<1?1/d:1}else if(e===0)o=1/c,a=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const c=Math.abs(t*i-r*s),u=Math.hypot(t,r),d=Math.hypot(s,i);if(e===0)o=d/c,a=u/c;else{const h=e*c;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,o]=this.getScaleForStroking();if(i===o){r.lineWidth=(s||1)*i,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(i,o),eb.a=1/i,eb.d=1/o;const c=new Path2D;if(c.addPath(e,eb),a.length>0){const u=Math.max(i,o);r.setLineDash(a.map(d=>d/u)),r.lineDashOffset/=u}r.lineWidth=s||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};bs=new WeakSet,Kx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Xx=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},qx=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Du=HA;for(const n in ap)Du.prototype[n]!==void 0&&(Du.prototype[ap[n]]=Du.prototype[n]);var vd,wd,Gp,bd,ky;const Au=class Au{constructor(e){A(this,bd);A(this,vd);A(this,wd);A(this,Gp);y(this,vd,e),y(this,wd,new DataView(l(this,vd))),y(this,Gp,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const u of Au.strings){const d=t.encode(e[u]);r[u]=d,s+=4+d.length}const i=new ArrayBuffer(s),o=new Uint8Array(i),a=new DataView(i);let c=0;for(const u of Au.strings){const d=r[u],h=d.length;a.setUint32(c,h),o.set(d,c+4),c+=4+h}return we(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return C(this,bd,ky).call(this,0)}get fontWeight(){return C(this,bd,ky).call(this,1)}get italicAngle(){return C(this,bd,ky).call(this,2)}};vd=new WeakMap,wd=new WeakMap,Gp=new WeakMap,bd=new WeakSet,ky=function(e){we(e<Au.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=l(this,wd).getUint32(t)+4;const r=l(this,wd).getUint32(t);return l(this,Gp).decode(new Uint8Array(l(this,vd),t+4,r))},G(Au,"strings",["fontFamily","fontWeight","italicAngle"]);let Lv=Au;var ta,zs,Hl,Vl,mf;const Eu=class Eu{constructor(e){A(this,Vl);A(this,ta);A(this,zs);A(this,Hl);y(this,ta,e),y(this,zs,new DataView(l(this,ta))),y(this,Hl,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const f of Eu.strings){const p=t.encode(e[f]);r[f]=p,s+=4+p.length}s+=4;let i,o,a=1+s;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,s=0;for(const f of Eu.strings){const p=r[f],v=p.length;s+=4+v,d.setUint32(h,v),u.set(p,h+4),h+=4+v}return d.setUint32(h-s-4,s),e.style&&(d.setUint32(h,i.length),u.set(i,h+4),h+=4+i.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),we(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return l(this,zs).getUint8(0)!==0}get css(){return C(this,Vl,mf).call(this,0)}get loadedName(){return C(this,Vl,mf).call(this,1)}get baseFontName(){return C(this,Vl,mf).call(this,2)}get src(){return C(this,Vl,mf).call(this,3)}get style(){let e=1;e+=4+l(this,zs).getUint32(e);const t=l(this,zs).getUint32(e),r=l(this,Hl).decode(new Uint8Array(l(this,ta),e+4,t));e+=4+t;const s=l(this,zs).getUint32(e),i=l(this,Hl).decode(new Uint8Array(l(this,ta),e+4,s));return{style:r,weight:i}}};ta=new WeakMap,zs=new WeakMap,Hl=new WeakMap,Vl=new WeakSet,mf=function(e){we(e<Eu.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=l(this,zs).getUint32(t)+4;const r=l(this,zs).getUint32(t);return l(this,Hl).decode(new Uint8Array(l(this,ta),t+4,r))},G(Eu,"strings",["css","loadedName","baseFontName","src"]);let Dv=Eu;var xd,Sd,Ad,Ed,Qn,Hs,Wp,Ne,dt,qr,Py,gf;const ue=class ue{constructor({data:e,extra:t}){A(this,dt);A(this,Hs);A(this,Wp);A(this,Ne);y(this,Hs,e),y(this,Wp,new TextDecoder),y(this,Ne,new DataView(l(this,Hs))),t&&Object.assign(this,t)}get black(){return C(this,dt,qr).call(this,0)}get bold(){return C(this,dt,qr).call(this,1)}get disableFontFace(){return C(this,dt,qr).call(this,2)}get fontExtraProperties(){return C(this,dt,qr).call(this,3)}get isInvalidPDFjsFont(){return C(this,dt,qr).call(this,4)}get isType3Font(){return C(this,dt,qr).call(this,5)}get italic(){return C(this,dt,qr).call(this,6)}get missingFile(){return C(this,dt,qr).call(this,7)}get remeasure(){return C(this,dt,qr).call(this,8)}get vertical(){return C(this,dt,qr).call(this,9)}get ascent(){return C(this,dt,Py).call(this,0)}get defaultWidth(){return C(this,dt,Py).call(this,1)}get descent(){return C(this,dt,Py).call(this,2)}get bbox(){let e=l(ue,Sd);if(l(this,Ne).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<4;s++)r.push(l(this,Ne).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=l(ue,Ad);if(l(this,Ne).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<6;s++)r.push(l(this,Ne).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=l(ue,Ed);if(l(this,Ne).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<3;s++)r.push(l(this,Ne).getInt16(e,!0)),e+=2;return r}get fallbackName(){return C(this,dt,gf).call(this,0)}get loadedName(){return C(this,dt,gf).call(this,1)}get mimetype(){return C(this,dt,gf).call(this,2)}get name(){return C(this,dt,gf).call(this,3)}get data(){let e=l(ue,Qn);const t=l(this,Ne).getUint32(e);e+=4+t;const r=l(this,Ne).getUint32(e);e+=4+r;const s=l(this,Ne).getUint32(e);e+=4+s;const i=l(this,Ne).getUint32(e);if(i!==0)return new Uint8Array(l(this,Hs),e+4,i)}clearData(){let e=l(ue,Qn);const t=l(this,Ne).getUint32(e);e+=4+t;const r=l(this,Ne).getUint32(e);e+=4+r;const s=l(this,Ne).getUint32(e);e+=4+s;const i=l(this,Ne).getUint32(e);new Uint8Array(l(this,Hs),e+4,i).fill(0),l(this,Ne).setUint32(e,0)}get cssFontInfo(){let e=l(ue,Qn);const t=l(this,Ne).getUint32(e);e+=4+t;const r=l(this,Ne).getUint32(e);e+=4+r;const s=l(this,Ne).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(l(this,Hs),e+4,s)),new Lv(i.buffer)}get systemFontInfo(){let e=l(ue,Qn);const t=l(this,Ne).getUint32(e);e+=4+t;const r=l(this,Ne).getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(l(this,Hs),e+4,r)),new Dv(s.buffer)}static write(e){const t=e.systemFontInfo?Dv.write(e.systemFontInfo):null,r=e.cssFontInfo?Lv.write(e.cssFontInfo):null,s=new TextEncoder,i={};let o=0;for(const m of ue.strings)i[m]=s.encode(e[m]),o+=4+i[m].length;const a=l(ue,Qn)+4+o+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=ue.bools.length;let p=0,v=0;for(let m=0;m<f;m++){const x=e[ue.bools[m]];p|=(x===void 0?0:x?2:1)<<v,v+=2,(v===8||m===f-1)&&(d.setUint8(h++,p),p=0,v=0)}we(h===l(ue,xd),"FontInfo.write: Boolean properties offset mismatch");for(const m of ue.numbers)d.setFloat64(h,e[m]),h+=8;if(we(h===l(ue,Sd),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const m of e.bbox)d.setInt16(h,m,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(we(h===l(ue,Ad),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const m of e.fontMatrix)d.setFloat64(h,m,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(we(h===l(ue,Ed),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const m of e.defaultVMetrics)d.setInt16(h,m,!0),h+=2}else d.setUint8(h++,0),h+=3*2;we(h===l(ue,Qn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(l(ue,Qn),0),h+=4;for(const m of ue.strings){const x=i[m],g=x.length;d.setUint32(h,g),u.set(x,h+4),h+=4+g}if(d.setUint32(l(ue,Qn),h-l(ue,Qn)-4),!t)d.setUint32(h,0),h+=4;else{const m=t.byteLength;d.setUint32(h,m),we(h+4+m<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+m}if(!r)d.setUint32(h,0),h+=4;else{const m=r.byteLength;d.setUint32(h,m),we(h+4+m<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+m}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),we(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};xd=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Qn=new WeakMap,Hs=new WeakMap,Wp=new WeakMap,Ne=new WeakMap,dt=new WeakSet,qr=function(e){we(e<ue.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,s=l(this,Ne).getUint8(t)>>r&3;return s===0?void 0:s===2},Py=function(e){return we(e<ue.numbers.length,"Invalid number index"),l(this,Ne).getFloat64(l(ue,xd)+e*8)},gf=function(e){we(e<ue.strings.length,"Invalid string index");let t=l(ue,Qn)+4;for(let i=0;i<e;i++)t+=l(this,Ne).getUint32(t)+4;const r=l(this,Ne).getUint32(t),s=new Uint8Array(r);return s.set(new Uint8Array(l(this,Hs),t+4,r)),l(this,Wp).decode(s)},G(ue,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),G(ue,"numbers",["ascent","defaultWidth","descent"]),G(ue,"strings",["fallbackName","loadedName","mimetype","name"]),A(ue,xd,Math.ceil(ue.bools.length*2/8)),A(ue,Sd,l(ue,xd)+ue.numbers.length*8),A(ue,Ad,l(ue,Sd)+1+2*4),A(ue,Ed,l(ue,Ad)+1+8*6),A(ue,Qn,l(ue,Ed)+1+2*3);let Yx=ue;var Kp,Xp;class ni{static get workerPort(){return l(this,Kp)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");y(this,Kp,e)}static get workerSrc(){return l(this,Xp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");y(this,Xp,e)}}Kp=new WeakMap,Xp=new WeakMap,A(ni,Kp,null),A(ni,Xp,"");var Cd,qp;class k5{constructor({parsedData:e,rawData:t}){A(this,Cd);A(this,qp);y(this,Cd,e),y(this,qp,t)}getRaw(){return l(this,qp)}get(e){return l(this,Cd).get(e)??null}[Symbol.iterator](){return l(this,Cd).entries()}}Cd=new WeakMap,qp=new WeakMap;const ou=Symbol("INTERNAL");var Yp,Qp,Jp,_d;class P5{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){A(this,Yp,!1);A(this,Qp,!1);A(this,Jp,!1);A(this,_d,!0);y(this,Yp,!!(e&dr.DISPLAY)),y(this,Qp,!!(e&dr.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(l(this,Jp))return l(this,_d);if(!l(this,_d))return!1;const{print:e,view:t}=this.usage;return l(this,Yp)?(t==null?void 0:t.viewState)!=="OFF":l(this,Qp)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==ou&&je("Internal method `_setVisible` called."),y(this,Jp,r),y(this,_d,t)}}Yp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,_d=new WeakMap;var na,Ie,Td,kd,Zp,Qx;class R5{constructor(e,t=dr.DISPLAY){A(this,Zp);A(this,na,null);A(this,Ie,new Map);A(this,Td,null);A(this,kd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,y(this,kd,e.order);for(const r of e.groups)l(this,Ie).set(r.id,new P5(t,r));if(e.baseState==="OFF")for(const r of l(this,Ie).values())r._setVisible(ou,!1);for(const r of e.on)l(this,Ie).get(r)._setVisible(ou,!0);for(const r of e.off)l(this,Ie).get(r)._setVisible(ou,!1);y(this,Td,this.getHash())}}isVisible(e){if(l(this,Ie).size===0)return!0;if(!e)return W0("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Ie).has(e.id)?l(this,Ie).get(e.id).visible:(ae(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,Zp,Qx).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Ie).has(t))return ae(`Optional content group not found: ${t}`),!0;if(l(this,Ie).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Ie).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!l(this,Ie).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Ie).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!l(this,Ie).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Ie).has(t))return ae(`Optional content group not found: ${t}`),!0;if(l(this,Ie).get(t).visible)return!1}return!0}return ae(`Unknown optional content policy ${e.policy}.`),!0}return ae(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=l(this,Ie).get(e);if(!s){ae(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((i=l(this,Ie).get(a))==null||i._setVisible(ou,!1,!0));s._setVisible(ou,!!t,!0),y(this,na,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=l(this,Ie).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}y(this,na,null)}get hasInitialVisibility(){return l(this,Td)===null||this.getHash()===l(this,Td)}getOrder(){return l(this,Ie).size?l(this,kd)?l(this,kd).slice():[...l(this,Ie).keys()]:null}getGroup(e){return l(this,Ie).get(e)||null}getHash(){if(l(this,na)!==null)return l(this,na);const e=new j2;for(const[t,r]of l(this,Ie))e.update(`${t}:${r.visible}`);return y(this,na,e.hexdigest())}[Symbol.iterator](){return l(this,Ie).entries()}}na=new WeakMap,Ie=new WeakMap,Td=new WeakMap,kd=new WeakMap,Zp=new WeakSet,Qx=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=C(this,Zp,Qx).call(this,i);else if(l(this,Ie).has(i))o=l(this,Ie).get(i).visible;else return ae(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class M5{constructor(e,{disableRange:t=!1,disableStream:r=!1}){we(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});we(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){we(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new N5(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new I5(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class N5{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=TA(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class I5{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function L5(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=c(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=sg(h);h=f.decode(p),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,m,x,g]=f;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[x,g]}const v=[];for(let m=0;m<h.length&&m in h;++m){let[x,g]=h[m];g=a(g),x&&(g=unescape(g),m===0&&(g=c(g))),v.push(g)}return v.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),v=d.slice(h+1).replace(/^[^']*'/,"");return s(f,v)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,x){return String.fromCharCode(parseInt(x,16))}),s(f,v);try{v=atob(v)}catch{}return s(f,v)})}return""}function Y2(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function X0(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function Q2({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function J2(n){const e=n.get("Content-Disposition");if(e){let t=L5(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(TA(t))return t}return null}function cg(n,e){return new Pv(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function Z2(n){return n===200||n===206}function eN(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function tN(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ae(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class D5{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Y2(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return we(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new O5(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new F5(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class O5{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,eN(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=X0(i.url),!Z2(i.status))throw cg(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:c}=Q2({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=J2(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ka("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:tN(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class F5{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const o=s.url;fetch(o,eN(i,this._withCredentials,this._abortController)).then(a=>{const c=X0(a.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!Z2(a.status))throw cg(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:tN(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const tb=200,nb=206;function j5(n){const e=n.response;return typeof e!="string"?e:sg(e).buffer}class B5{constructor({url:e,httpHeaders:t,withCredentials:r}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Y2(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=nb):s.expectedStatus=tb,t.responseType="arraybuffer",we(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||tb;if(!(i===tb&&r.expectedStatus===nb)&&i!==r.expectedStatus){r.onError(s.status);return}const a=j5(s);if(i===nb){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:a}):(ae('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class U5{constructor(e){this._source=e,this._manager=new B5(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return we(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $5(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new z5(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class $5{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=X0(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=Q2({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=J2(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=cg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class z5{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=X0((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=cg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const H5=/^[a-z][a-z0-9\-+.]+:/i;function V5(n){if(H5.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class G5{constructor(e){this.source=e,this.url=V5(e.url),we(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return we(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new W5(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new K5(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class W5{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=cg(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ka("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class K5{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Xh=Symbol("INITIAL_DATA");var Jn,em,Jx;class nN{constructor(){A(this,em);A(this,Jn,Object.create(null))}get(e,t=null){if(t){const s=C(this,em,Jx).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=l(this,Jn)[e];if(!r||r.data===Xh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=l(this,Jn)[e];return!!t&&t.data!==Xh}delete(e){const t=l(this,Jn)[e];return!t||t.data===Xh?!1:(delete l(this,Jn)[e],!0)}resolve(e,t=null){const r=C(this,em,Jx).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in l(this,Jn)){const{data:r}=l(this,Jn)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}y(this,Jn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Jn)){const{data:t}=l(this,Jn)[e];t!==Xh&&(yield[e,t])}}}Jn=new WeakMap,em=new WeakSet,Jx=function(e){var t;return(t=l(this,Jn))[e]||(t[e]={...Promise.withResolvers(),data:Xh})};const X5=1e5,R_=30;var G_,ra,On,tm,nm,Gl,ji,rm,sm,Wl,Pd,Rd,sa,Md,im,Nd,Kl,om,am,Id,Xl,lm,ia,Ld,go,rN,sN,Zx,wr,Ry,e1,iN,oN;const At=class At{constructor({textContentSource:e,container:t,viewport:r}){A(this,go);A(this,ra,Promise.withResolvers());A(this,On,null);A(this,tm,!1);A(this,nm,!!((G_=globalThis.FontInspector)!=null&&G_.enabled));A(this,Gl,null);A(this,ji,null);A(this,rm,0);A(this,sm,0);A(this,Wl,null);A(this,Pd,null);A(this,Rd,0);A(this,sa,0);A(this,Md,Object.create(null));A(this,im,[]);A(this,Nd,null);A(this,Kl,[]);A(this,om,new WeakMap);A(this,am,null);var c;if(e instanceof ReadableStream)y(this,Nd,e);else if(typeof e=="object")y(this,Nd,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,On,y(this,Pd,t)),y(this,sa,r.scale*ai.pixelRatio),y(this,Rd,r.rotation),y(this,ji,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;y(this,am,[1,0,0,-1,-o,a+i]),y(this,sm,s),y(this,rm,i),C(c=At,wr,iN).call(c),Fc(t,r),l(this,ra).promise.finally(()=>{l(At,Ld).delete(this),y(this,ji,null),y(this,Md,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Qt.platform;return pe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Wl).read().then(({value:t,done:r})=>{if(r){l(this,ra).resolve();return}l(this,Gl)??y(this,Gl,t.lang),Object.assign(l(this,Md),t.styles),C(this,go,rN).call(this,t.items),e()},l(this,ra).reject)};return y(this,Wl,l(this,Nd).getReader()),l(At,Ld).add(this),e(),l(this,ra).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*ai.pixelRatio,s=e.rotation;if(s!==l(this,Rd)&&(t==null||t(),y(this,Rd,s),Fc(l(this,Pd),{rotation:s})),r!==l(this,sa)){t==null||t(),y(this,sa,r);const o={div:null,properties:null,ctx:C(i=At,wr,Ry).call(i,l(this,Gl))};for(const a of l(this,Kl))o.properties=l(this,om).get(a),o.div=a,C(this,go,Zx).call(this,o)}}cancel(){var t;const e=new Ka("TextLayer task cancelled.");(t=l(this,Wl))==null||t.cancel(e).catch(()=>{}),y(this,Wl,null),l(this,ra).reject(e)}get textDivs(){return l(this,Kl)}get textContentItemsStr(){return l(this,im)}static cleanup(){if(!(l(this,Ld).size>0)){l(this,Id).clear();for(const{canvas:e}of l(this,Xl).values())e.remove();l(this,Xl).clear()}}};ra=new WeakMap,On=new WeakMap,tm=new WeakMap,nm=new WeakMap,Gl=new WeakMap,ji=new WeakMap,rm=new WeakMap,sm=new WeakMap,Wl=new WeakMap,Pd=new WeakMap,Rd=new WeakMap,sa=new WeakMap,Md=new WeakMap,im=new WeakMap,Nd=new WeakMap,Kl=new WeakMap,om=new WeakMap,am=new WeakMap,Id=new WeakMap,Xl=new WeakMap,lm=new WeakMap,ia=new WeakMap,Ld=new WeakMap,go=new WeakSet,rN=function(e){var s,i;if(l(this,tm))return;(i=l(this,ji)).ctx??(i.ctx=C(s=At,wr,Ry).call(s,l(this,Gl)));const t=l(this,Kl),r=l(this,im);for(const o of e){if(t.length>X5){ae("Ignoring additional textDivs for performance reasons."),y(this,tm,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,On);y(this,On,document.createElement("span")),l(this,On).classList.add("markedContent"),o.id&&l(this,On).setAttribute("id",`${o.id}`),a.append(l(this,On))}else o.type==="endMarkedContent"&&y(this,On,l(this,On).parentNode);continue}r.push(o.str),C(this,go,sN).call(this,o)}},sN=function(e){var m;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Kl).push(t);const s=ee.transform(l(this,am),e.transform);let i=Math.atan2(s[1],s[0]);const o=l(this,Md)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=l(this,nm)&&o.fontSubstitution||o.fontFamily;a=At.fontFamilyMap.get(a)||a;const c=Math.hypot(s[2],s[3]),u=c*C(m=At,wr,oN).call(m,a,o,l(this,Gl));let d,h;i===0?(d=s[4],h=s[5]-u):(d=s[4]+u*Math.sin(i),h=s[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",p=t.style;l(this,On)===l(this,Pd)?(p.left=`${(100*d/l(this,sm)).toFixed(2)}%`,p.top=`${(100*h/l(this,rm)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(l(At,ia)*c).toFixed(2)}px)`,p.fontFamily=a,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,nm)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);x!==g&&Math.max(x,g)/Math.min(x,g)>1.5&&(v=!0)}if(v&&(r.canvasWidth=o.vertical?e.height:e.width),l(this,om).set(t,r),l(this,ji).div=t,l(this,ji).properties=r,C(this,go,Zx).call(this,l(this,ji)),r.hasText&&l(this,On).append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),l(this,On).append(x)}},Zx=function(e){var a;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let o="";if(l(At,ia)>1&&(o=`scale(${1/l(At,ia)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:d}=r;C(a=At,wr,e1).call(a,s,d*l(this,sa),c);const{width:h}=s.measureText(t.textContent);h>0&&(o=`scaleX(${u*l(this,sa)/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(i.transform=o)},wr=new WeakSet,Ry=function(e=null){let t=l(this,Xl).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Xl).set(e,t),l(this,lm).set(t,{size:0,family:""})}return t},e1=function(e,t,r){const s=l(this,lm).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},iN=function(){if(l(this,ia)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),y(this,ia,e.getBoundingClientRect().height),e.remove()},oN=function(e,t,r){const s=l(this,Id).get(e);if(s)return s;const i=C(this,wr,Ry).call(this,r);i.canvas.width=i.canvas.height=R_,C(this,wr,e1).call(this,i,R_,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+c):(Qt.platform.isFirefox&&ae("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),l(this,Id).set(e,u),u},A(At,wr),A(At,Id,new Map),A(At,Xl,new Map),A(At,lm,new WeakMap),A(At,ia,null),A(At,Ld,new Set);let cp=At;const q5=100;function aN(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new t1,{docId:t}=e,r=n.url?n5(n.url):null,s=n.data?r5(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof lN?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof up?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!K0(n.docBaseUrl)?n.docBaseUrl:null,p=Vg(n.cMapUrl),v=n.cMapPacked!==!1,m=n.CMapReaderFactory||(wn?d5:g_),x=Vg(n.iccUrl),g=Vg(n.standardFontDataUrl),w=n.StandardFontDataFactory||(wn?h5:y_),b=Vg(n.wasmUrl),E=n.WasmFactory||(wn?f5:v_),_=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,M=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!wn,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!wn&&(Qt.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:wn,U=n.fontExtraProperties===!0,V=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,X=n.disableRange===!0,H=n.disableStream===!0,B=n.disableAutoFetch===!0,N=n.pdfBug===!0,R=n.CanvasFactory||(wn?u5:a5),I=n.FilterFactory||(wn?c5:l5),L=n.enableHWA===!0,F=n.useWasm!==!1,z=c?c.length:n.length??NaN,K=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!wn&&!j,re=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===g_&&w===y_&&E===v_&&p&&g&&b&&rf(p,document.baseURI)&&rf(g,document.baseURI)&&rf(b,document.baseURI)),se=null;Rz(h);const Y={canvasFactory:new R({ownerDocument:$,enableHWA:L}),filterFactory:new I({docId:t,ownerDocument:$}),cMapReaderFactory:re?null:new m({baseUrl:p,isCompressed:v}),standardFontDataFactory:re?null:new w({baseUrl:g}),wasmFactory:re?null:new E({baseUrl:b})};d||(d=up.create({verbosity:h,port:ni.workerPort}),e._worker=d);const ge={docId:t,apiVersion:"5.4.296",data:s,password:a,disableAutoFetch:B,rangeChunkSize:u,length:z,docBaseUrl:f,enableXfa:V,evaluatorOptions:{maxImageSize:k,disableFontFace:j,ignoreErrors:_,isEvalSupported:P,isOffscreenCanvasSupported:M,isImageDecoderSupported:D,canvasMaxAreaInBytes:O,fontExtraProperties:U,useSystemFonts:K,useWasm:F,useWorkerFetch:re,cMapUrl:p,iccUrl:x,standardFontDataUrl:g,wasmUrl:b}},Ae={ownerDocument:$,pdfBug:N,styleElement:se,loadingParams:{disableAutoFetch:B,enableXfa:V}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const _e=d.messageHandler.sendWithPromise("GetDocRequest",ge,s?[s.buffer]:null);let Be;if(c)Be=new M5(c,{disableRange:X,disableStream:H});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Zt=rf(r)?D5:wn?G5:U5;Be=new Zt({url:r,length:z,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:X,disableStream:H})}return _e.then(Zt=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Gn=new uf(t,Zt,d.port),vo=new J5(Gn,e,Be,Ae,Y,L);e._transport=vo,Gn.send("Ready",null)})}).catch(e._capability.reject),e}var Zv;const e0=class e0{constructor(){G(this,"_capability",Promise.withResolvers());G(this,"_transport",null);G(this,"_worker",null);G(this,"docId",`d${ot(e0,Zv)._++}`);G(this,"destroyed",!1);G(this,"onPassword",null);G(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Zv=new WeakMap,A(e0,Zv,0);let t1=e0;var ql,cm,um,dm,hm;class lN{constructor(e,t,r=!1,s=null){A(this,ql,Promise.withResolvers());A(this,cm,[]);A(this,um,[]);A(this,dm,[]);A(this,hm,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){l(this,hm).push(e)}addProgressListener(e){l(this,dm).push(e)}addProgressiveReadListener(e){l(this,um).push(e)}addProgressiveDoneListener(e){l(this,cm).push(e)}onDataRange(e,t){for(const r of l(this,hm))r(e,t)}onDataProgress(e,t){l(this,ql).promise.then(()=>{for(const r of l(this,dm))r(e,t)})}onDataProgressiveRead(e){l(this,ql).promise.then(()=>{for(const t of l(this,um))t(e)})}onDataProgressiveDone(){l(this,ql).promise.then(()=>{for(const e of l(this,cm))e()})}transportReady(){l(this,ql).resolve()}requestDataRange(e,t){je("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}ql=new WeakMap,cm=new WeakMap,um=new WeakMap,dm=new WeakMap,hm=new WeakMap;class Y5{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Bi,Yl,yf;class Q5{constructor(e,t,r,s=!1){A(this,Yl);A(this,Bi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new c_:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new nN,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new og({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=Ro.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:v=null}){var D,O,j;(D=this._stats)==null||D.time("Overall");const m=this._transport.getRenderingIntent(s,i,h,f),{renderingIntent:x,cacheKey:g}=m;y(this,Bi,!1),c||(c=this._transport.getOptionalContentConfig(x));let w=this._intentStates.get(g);w||(w=Object.create(null),this._intentStates.set(g,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const b=!!(x&dr.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(m));const E=!!(this._pdfBug&&((j=globalThis.StepperManager)!=null&&j.enabled)),_=!this.recordedBBoxes&&(p||E),k=U=>{var V,$;if(w.renderTasks.delete(P),_){const X=(V=P.gfx)==null?void 0:V.dependencyTracker.take();X&&(P.stepper&&P.stepper.setOperatorBBoxes(X,P.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=X))}b&&y(this,Bi,!0),C(this,Yl,yf).call(this),U?(P.capability.reject(U),this._abortOperatorList({intentState:w,reason:U instanceof Error?U:new Error(U)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),($=globalThis.Stats)!=null&&$.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new n1({callback:k,params:{canvas:t,canvasContext:e,dependencyTracker:_?new m5(t,w.operatorList.length,E):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:v});(w.renderTasks||(w.renderTasks=new Set)).add(P);const M=P.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([U,V])=>{var $;if(this.destroyed){k();return}if(($=this._stats)==null||$.time("Rendering"),!(V.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:U,optionalContentConfig:V}),P.operatorListChanged()}).catch(k),M}getOperatorList({intent:e="display",annotationMode:t=Ro.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,r,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>lp.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:c,done:u}){if(u){r(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),y(this,Bi,!1),Promise.all(e)}cleanup(e=!1){y(this,Bi,!0);const t=C(this,Yl,yf).call(this);return e&&t&&this._stats&&(this._stats=new c_),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&C(this,Yl,yf).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();C(this,Yl,yf).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof _A){let s=q5;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ka(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Bi=new WeakMap,Yl=new WeakSet,yf=function(){if(!l(this,Bi)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,Bi,!1),!0};var oa,is,Ui,Ql,t0,Jl,Zl,An,My,cN,uN,vf,Dd,Ny;const Ke=class Ke{constructor({name:e=null,port:t=null,verbosity:r=Mz()}={}){A(this,An);A(this,oa,Promise.withResolvers());A(this,is,null);A(this,Ui,null);A(this,Ql,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(l(Ke,Zl).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(Ke,Zl).set(t,this),C(this,An,cN).call(this,t)}else C(this,An,uN).call(this)}get promise(){return l(this,oa).promise}get port(){return l(this,Ui)}get messageHandler(){return l(this,is)}destroy(){var e,t;this.destroyed=!0,(e=l(this,Ql))==null||e.terminate(),y(this,Ql,null),l(Ke,Zl).delete(l(this,Ui)),y(this,Ui,null),(t=l(this,is))==null||t.destroy(),y(this,is,null)}static create(e){const t=l(this,Zl).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ke(e)}static get workerSrc(){if(ni.workerSrc)return ni.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pe(this,"_setupFakeWorkerGlobal",(async()=>l(this,Dd,Ny)?l(this,Dd,Ny):(await import(this.workerSrc)).WorkerMessageHandler)())}};oa=new WeakMap,is=new WeakMap,Ui=new WeakMap,Ql=new WeakMap,t0=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,An=new WeakSet,My=function(){l(this,oa).resolve(),l(this,is).send("configure",{verbosity:this.verbosity})},cN=function(e){y(this,Ui,e),y(this,is,new uf("main","worker",e)),l(this,is).on("ready",()=>{}),C(this,An,My).call(this)},uN=function(){if(l(Ke,Jl)||l(Ke,Dd,Ny)){C(this,An,vf).call(this);return}let{workerSrc:e}=Ke;try{Ke._isSameOrigin(window.location,e)||(e=Ke._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new uf("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?l(this,oa).reject(new Error("Worker was destroyed")):C(this,An,vf).call(this)},i=new AbortController;t.addEventListener("error",()=>{l(this,Ql)||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}y(this,is,r),y(this,Ui,t),y(this,Ql,t),C(this,An,My).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{C(this,An,vf).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{W0("The worker has been disabled.")}C(this,An,vf).call(this)},vf=function(){l(Ke,Jl)||(ae("Setting up fake worker."),y(Ke,Jl,!0)),Ke._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,oa).reject(new Error("Worker was destroyed"));return}const t=new o5;y(this,Ui,t);const r=`fake${ot(Ke,t0)._++}`,s=new uf(r+"_worker",r,t);e.setup(s,t),y(this,is,new uf(r,r+"_worker",t)),C(this,An,My).call(this)}).catch(e=>{l(this,oa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Dd=new WeakSet,Ny=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(Ke,Dd),A(Ke,t0,0),A(Ke,Jl,!1),A(Ke,Zl,new WeakMap),wn&&(y(Ke,Jl,!0),ni.workerSrc||(ni.workerSrc="./pdf.worker.mjs")),Ke._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},Ke._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ke.fromPort=e=>{if(Hz("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ke.create(e)};let up=Ke;var $i,Vs,Od,Fd,zi,ec,wf;class J5{constructor(e,t,r,s,i,o){A(this,ec);A(this,$i,new Map);A(this,Vs,new Map);A(this,Od,new Map);A(this,Fd,new Map);A(this,zi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new nN,this.fontLoader=new e5({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return pe(this,"annotationStorage",new kA)}getRenderingIntent(e,t=Ro.ENABLE,r=null,s=!1,i=!1){let o=dr.DISPLAY,a=Bx;switch(e){case"any":o=dr.ANY;break;case"display":break;case"print":o=dr.PRINT;break;default:ae(`getRenderingIntent - invalid intent: ${e}`)}const c=o&dr.PRINT&&r instanceof U2?r:this.annotationStorage;switch(t){case Ro.DISABLE:o+=dr.ANNOTATIONS_DISABLE;break;case Ro.ENABLE:break;case Ro.ENABLE_FORMS:o+=dr.ANNOTATIONS_FORMS;break;case Ro.ENABLE_STORAGE:o+=dr.ANNOTATIONS_STORAGE,a=c.serializable;break;default:ae(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=dr.IS_EDITING),i&&(o+=dr.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=l(this,zi))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Vs).values())e.push(s._destroy());l(this,Vs).clear(),l(this,Od).clear(),l(this,Fd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,$i).clear(),this.filterFactory.destroy(),cp.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ka("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{we(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}we(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:o}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(r,s)=>{we(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}we(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Y5(r,this))}),e.on("DocException",r=>{t._capability.reject(Rn(r))}),e.on("PasswordRequest",r=>{y(this,zi,Promise.withResolvers());try{if(!t.onPassword)throw Rn(r);const s=i=>{i instanceof Error?l(this,zi).reject(i):l(this,zi).resolve({password:i})};t.onPassword(s,r.code)}catch(s){l(this,zi).reject(s)}return l(this,zi).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;l(this,Vs).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const h=i.error;ae(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const a=new Yx(i),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new t5(a,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:d}=i;we(d,"The imageRef must be defined.");for(const h of l(this,Vs).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var c;if(this.destroyed)return;const a=l(this,Vs).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=l(this,Od).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,Fd).set(i.refStr,e);const o=new Q5(t,i,this,this._params.pdfBug);return l(this,Vs).set(t,o),o});return l(this,Od).set(t,s),s}getPageIndex(e){return Ux(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,ec,wf).call(this,"GetFieldObjects")}hasJSActions(){return C(this,ec,wf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return C(this,ec,wf).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,ec,wf).call(this,"GetOptionalContentConfig").then(t=>new R5(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,$i).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new k5(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,$i).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Vs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,$i).clear(),this.filterFactory.destroy(!0),cp.cleanup()}}cachedPageNumber(e){if(!Ux(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Fd).get(t)??null}}$i=new WeakMap,Vs=new WeakMap,Od=new WeakMap,Fd=new WeakMap,zi=new WeakMap,ec=new WeakSet,wf=function(e,t=null){const r=l(this,$i).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return l(this,$i).set(e,s),s};var aa;class Z5{constructor(e){A(this,aa,null);G(this,"onContinue",null);G(this,"onError",null);y(this,aa,e)}get promise(){return l(this,aa).capability.promise}cancel(e=0){l(this,aa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,aa).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,aa);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}aa=new WeakMap;var la,tc;const ll=class ll{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:v=null}){A(this,la,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Z5(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(l(ll,tc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(ll,tc).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Du(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),l(this,la)&&(window.cancelAnimationFrame(l(this,la)),y(this,la,null)),l(ll,tc).delete(this._canvas),e||(e=new _A(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,la,window.requestAnimationFrame(()=>{y(this,la,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(ll,tc).delete(this._canvas),this.callback())))}};la=new WeakMap,tc=new WeakMap,A(ll,tc,new WeakSet);let n1=ll;const dN="5.4.296",eH="f56dc8601";var Zn,nc,jd,_t,fm,Bd,Hi,pm,ca,os,mm,Le,r1,s1,i1,sl,hN,Co;const Mn=class Mn{constructor({editor:e=null,uiManager:t=null}){A(this,Le);A(this,Zn,null);A(this,nc,null);A(this,jd);A(this,_t,null);A(this,fm,!1);A(this,Bd,!1);A(this,Hi,null);A(this,pm);A(this,ca,null);A(this,os,null);var r,s;e?(y(this,Bd,!1),y(this,Hi,e)):y(this,Bd,!0),y(this,os,(e==null?void 0:e._uiManager)||t),y(this,pm,l(this,os)._eventBus),y(this,jd,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=l(this,os))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Mn,mm)||y(Mn,mm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return pe(this,"_keyboardManager",new lg([[["Escape","mac+Escape"],Mn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Mn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Mn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Mn.prototype._moveToPrevious],[["Home","mac+Home"],Mn.prototype._moveToBeginning],[["End","mac+End"],Mn.prototype._moveToEnd]]))}renderButton(){const e=y(this,Zn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Hi)&&(e.ariaControls=`${l(this,Hi).id}_colorpicker_dropdown`);const t=l(this,os)._signal;e.addEventListener("click",C(this,Le,sl).bind(this),{signal:t}),e.addEventListener("keydown",C(this,Le,i1).bind(this),{signal:t});const r=y(this,nc,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=l(this,jd),e.append(r),e}renderMainDropdown(){const e=y(this,_t,C(this,Le,r1).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,Zn)){C(this,Le,sl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,Le,s1).call(this,t,e)}_moveToNext(e){var t,r;if(!l(this,Le,Co)){C(this,Le,sl).call(this,e);return}if(e.target===l(this,Zn)){(t=l(this,_t).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=l(this,_t))==null?void 0:t.firstChild)||e.target===l(this,Zn)){l(this,Le,Co)&&this._hideDropdownFromKeyboard();return}l(this,Le,Co)||C(this,Le,sl).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!l(this,Le,Co)){C(this,Le,sl).call(this,e);return}(t=l(this,_t).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Le,Co)){C(this,Le,sl).call(this,e);return}(t=l(this,_t).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,_t))==null||e.classList.add("hidden"),l(this,Zn).ariaExpanded="false",(t=l(this,ca))==null||t.abort(),y(this,ca,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Bd)){if(!l(this,Le,Co)){(e=l(this,Hi))==null||e.unselect();return}this.hideDropdown(),l(this,Zn).focus({preventScroll:!0,focusVisible:l(this,fm)})}}updateColor(e){if(l(this,nc)&&(l(this,nc).style.backgroundColor=e),!l(this,_t))return;const t=l(this,os).highlightColors.values();for(const r of l(this,_t).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=l(this,Zn))==null||e.remove(),y(this,Zn,null),y(this,nc,null),(t=l(this,_t))==null||t.remove(),y(this,_t,null)}};Zn=new WeakMap,nc=new WeakMap,jd=new WeakMap,_t=new WeakMap,fm=new WeakMap,Bd=new WeakMap,Hi=new WeakMap,pm=new WeakMap,ca=new WeakMap,os=new WeakMap,mm=new WeakMap,Le=new WeakSet,r1=function(){const e=document.createElement("div"),t=l(this,os)._signal;e.addEventListener("contextmenu",Kr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Hi)&&(e.id=`${l(this,Hi).id}_colorpicker_dropdown`);for(const[r,s]of l(this,os).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",l(Mn,mm)[r]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.ariaSelected=s===l(this,jd),i.addEventListener("click",C(this,Le,s1).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",C(this,Le,i1).bind(this),{signal:t}),e},s1=function(e,t){t.stopPropagation(),l(this,pm).dispatch("switchannotationeditorparams",{source:this,type:ve.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},i1=function(e){Mn._keyboardManager.exec(this,e)},sl=function(e){if(l(this,Le,Co)){this.hideDropdown();return}if(y(this,fm,e.detail===0),l(this,ca)||(y(this,ca,new AbortController),window.addEventListener("pointerdown",C(this,Le,hN).bind(this),{signal:l(this,os).combinedSignal(l(this,ca))})),l(this,Zn).ariaExpanded="true",l(this,_t)){l(this,_t).classList.remove("hidden");return}const t=y(this,_t,C(this,Le,r1).call(this));l(this,Zn).append(t)},hN=function(e){var t;(t=l(this,_t))!=null&&t.contains(e.target)||this.hideDropdown()},Co=function(){return l(this,_t)&&!l(this,_t).classList.contains("hidden")},A(Mn,mm,null);let Ov=Mn;var Gs,gm,Ud,ym;const cl=class cl{constructor(e){A(this,Gs,null);A(this,gm,null);A(this,Ud,null);y(this,gm,e),y(this,Ud,e._uiManager),l(cl,ym)||y(cl,ym,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Gs))return l(this,Gs);const{editorType:e,colorType:t,colorValue:r}=l(this,gm),s=y(this,Gs,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",l(cl,ym)[e]),s.addEventListener("input",()=>{l(this,Ud).updateParams(t,s.value)},{signal:l(this,Ud)._signal}),s}update(e){l(this,Gs)&&(l(this,Gs).value=e)}destroy(){var e;(e=l(this,Gs))==null||e.remove(),y(this,Gs,null)}hideDropdown(){}};Gs=new WeakMap,gm=new WeakMap,Ud=new WeakMap,ym=new WeakMap,A(cl,ym,null);let Fv=cl;function M_(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function qh(n){return Math.max(0,Math.min(255,255*n))}class N_{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=qh(e),[e,e,e]}static G_HTML([e]){const t=M_(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(qh)}static RGB_HTML(e){return`#${e.map(M_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[qh(1-Math.min(1,e+s)),qh(1-Math.min(1,r+s)),qh(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class tH{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){je("Abstract method `_createSVG` called.")}}class jv extends tH{_createSVG(e){return document.createElementNS(pi,e)}}const nH=9,Bc=new WeakSet,rH=new Date().getTimezoneOffset()*60*1e3;class I_{static create(e){switch(e.data.annotationType){case vt.LINK:return new MA(e);case vt.TEXT:return new iH(e);case vt.WIDGET:switch(e.data.fieldType){case"Tx":return new oH(e);case"Btn":return e.data.radioButton?new mN(e):e.data.checkBox?new lH(e):new cH(e);case"Ch":return new uH(e);case"Sig":return new aH(e)}return new Kc(e);case vt.POPUP:return new a1(e);case vt.FREETEXT:return new bN(e);case vt.LINE:return new hH(e);case vt.SQUARE:return new fH(e);case vt.CIRCLE:return new pH(e);case vt.POLYLINE:return new xN(e);case vt.CARET:return new gH(e);case vt.INK:return new NA(e);case vt.POLYGON:return new mH(e);case vt.HIGHLIGHT:return new SN(e);case vt.UNDERLINE:return new yH(e);case vt.SQUIGGLY:return new vH(e);case vt.STRIKEOUT:return new wH(e);case vt.STAMP:return new AN(e);case vt.FILEATTACHMENT:return new bH(e);default:return new tt(e)}}}var rc,$d,Dr,vm,o1;const VA=class VA{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){A(this,vm);A(this,rc,null);A(this,$d,!1);A(this,Dr,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return VA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:s}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],i=t[c+2]):t[c+1]===o&&(i=Math.max(i,t[c+2]));return[i,o]}if((r==null?void 0:r.length)>=1){for(const c of r)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],i=c[u]):c[u+1]===o&&(i=Math.max(i,c[u]));if(i!==1/0)return[i,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/r,e[1]=100*(e[1]-o)/s,e}get commentText(){var t,r,s;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${op}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${op}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=l(this,Dr))==null?void 0:e.popup)||this.popup)==null||t.remove(),y(this,Dr,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(l(this,rc)||y(this,rc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&C(this,vm,o1).call(this,t);let s=((i=l(this,Dr))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=l(this,Dr).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),y(this,Dr,null),this.popup=null))}resetEdited(){var e;l(this,rc)&&(C(this,vm,o1).call(this,l(this,rc).rect),(e=l(this,Dr))==null||e.popup.resetEdited(),y(this,rc,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Kc)&&!(this instanceof MA)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof a1){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,i),i}const{width:a,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(m>0||x>0){const w=`calc(${m}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=w}else if(this instanceof mN){const w=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=w}switch(t.borderStyle.style){case tu.SOLID:o.borderStyle="solid";break;case tu.DASHED:o.borderStyle="dashed";break;case tu.BEVELED:ae("Unimplemented border style: beveled");break;case tu.INSET:ae("Unimplemented border style: inset");break;case tu.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(y(this,$d,!0),o.borderColor=ee.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=ee.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(o.width=`${100*a/d}%`,o.height=`${100*c/h}%`):this.setRotation(v,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=N_[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:N_[`${o}_rgb`](a)})};return pe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,x,g,w]=e.subarray(2,6);if(s===m&&i===x&&t===g&&r===w)return}const{style:o}=this.container;let a;if(l(this,$d)){const{borderColor:m,borderWidth:x}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=s-t,u=i-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,x=e.length;m<x;m+=8){const g=e[m],w=e[m+1],b=e[m+2],E=e[m+3],_=d.createElement("rect"),k=(b-t)/c,P=(i-w)/u,M=(g-b)/c,D=(w-E)/u;_.setAttribute("x",k),_.setAttribute("y",P),_.setAttribute("width",M),_.setAttribute("height",D),p.append(_),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${P}" width="${M}" height="${D}"/>`)}l(this,$d)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${v})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate);const i=y(this,Dr,new a1({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(l(this,Dr)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,Dr)}render(){je("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Bc.has(u)){ae(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:u})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&Bc.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};rc=new WeakMap,$d=new WeakMap,Dr=new WeakMap,vm=new WeakSet,o1=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let tt=VA;class sH extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var mr,il,fN,pN;class MA extends tt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});A(this,mr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(C(this,mr,fN).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(C(this,mr,pN).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&C(this,mr,il).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),C(this,mr,il).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),C(this,mr,il).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),C(this,mr,il).call(this),!this._fieldObjects){ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var h;s==null||s();const{fields:i,refs:o,include:a}=r,c=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const p of i){const v=this._fieldObjects[p]||[];for(const{id:m}of v)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const v of p)f.has(v.id)===a&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;u.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!Bc.has(v)){ae(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}mr=new WeakSet,il=function(){this.container.setAttribute("data-internal-link","")},fN=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(r.content,r.filename,i),!1},C(this,mr,il).call(this)},pN=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),C(this,mr,il).call(this)};class iH extends tt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Kc extends tt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Qt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[c,u]of r)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||nH,i=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(qw*s))||1,h=u/d;o=Math.min(s,c(h/qw))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,c(u/qw))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=ee.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class oH extends Kc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Bc.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,v=!!f&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(r,"value",x.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",x=>{const g=this.data.defaultFieldValue??"";r.value=d.userValue=g,d.formattedValue=null});let m=x=>{const{formattedValue:g}=d;g!=null&&(x.target.value=g),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{var b;if(d.focused)return;const{target:w}=g;if(v&&(w.type=f,p&&(w.step=p)),d.userValue){const E=d.userValue;if(v)if(f==="time"){const _=new Date(E),k=[_.getHours(),_.getMinutes(),_.getSeconds()];w.value=k.map(P=>P.toString().padStart(2,"0")).join(":")}else w.value=new Date(E-rH).toISOString().split(f==="date"?"T":".",1)[0];else w.value=E}d.lastCommittedValue=w.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const w={value(b){d.userValue=b.detail.value??"",v||e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:E}=b.detail;d.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E);const _={formattedValue:E};v&&(_.value=E),e.setValue(t,_)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var P;const{charLimit:E}=b.detail,{target:_}=b;if(E===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",E);let k=d.userValue;!k||k.length<=E||(k=k.slice(0,E),_.value=d.userValue=k,e.setValue(t,{value:k}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(w,g)}),r.addEventListener("keydown",g=>{var E;d.commitKey=1;let w=-1;if(g.key==="Escape"?w=0:g.key==="Enter"&&!this.data.multiLine?w=2:g.key==="Tab"&&(d.commitKey=3),w===-1)return;const{value:b}=g.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const x=m;m=null,r.addEventListener("blur",g=>{var E,_;if(!d.focused||!g.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{target:w}=g;let{value:b}=w;if(v){if(b&&f==="time"){const k=b.split(":").map(P=>parseInt(P,10));b=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),w.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();w.type="text"}d.userValue=b,d.lastCommittedValue!==b&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),x(g)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",g=>{var D;d.lastCommittedValue=null;const{data:w,target:b}=g,{value:E,selectionStart:_,selectionEnd:k}=b;let P=_,M=k;switch(g.inputType){case"deleteWordBackward":{const O=E.substring(0,_).match(/\w*[^\w]*$/);O&&(P-=O[0].length);break}case"deleteWordForward":{const O=E.substring(_).match(/^[^\w]*\w*/);O&&(M+=O[0].length);break}case"deleteContentBackward":_===k&&(P-=1);break;case"deleteContentForward":_===k&&(M+=1);break}g.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:w||"",willCommit:!1,selStart:P,selEnd:M}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class aH extends Kc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class lH extends Kc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Bc.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class mN extends Kc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Bc.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class cH extends MA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class uH extends Kc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Bc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),s.append(h)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),o=()=>{d.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const m of s.options)m.selected=v.has(m.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,v=f.detail.remove;p[v].selected=!1,s.remove(v),p.length>0&&Array.prototype.findIndex.call(p,x=>x.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:v,exportValue:m}=f.detail.insert,x=s.children[p],g=document.createElement("option");g.textContent=v,g.value=m,x?x.before(g):s.append(g),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const v of p){const{displayValue:m,exportValue:x}=v,g=document.createElement("option");g.textContent=m,g.value=x,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const v of f.target.options)v.selected=p.has(v.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),s.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var wm,l1;class a1 extends tt{constructor(t){const{data:r,elements:s,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&tt._hasPopupData(r)});A(this,wm);if(this.elements=s,o&&tt._hasPopupData(r)){const a=this.popup=C(this,wm,l1).call(this);for(const c of s)c.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=C(this,wm,l1).call(this),s=[];for(const i of this.elements)i.popup=r,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${CA}${i}`).join(",")),this.container}}wm=new WeakSet,l1=function(){return new dH({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var er,ua,n0,r0,zd,Hd,ut,Ws,da,sc,Vd,Gd,Ks,tr,Vi,Gi,Mt,Wi,ha,bm,Ki,Wd,ic,fa,cn,pa,fe,Iy,c1,u1,d1,Ly,h1,gN,yN,vN,wN,Dy,Oy,f1;class dH{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){A(this,fe);A(this,er,null);A(this,ua,C(this,fe,vN).bind(this));A(this,n0,C(this,fe,f1).bind(this));A(this,r0,C(this,fe,Oy).bind(this));A(this,zd,C(this,fe,Dy).bind(this));A(this,Hd,null);A(this,ut,null);A(this,Ws,null);A(this,da,null);A(this,sc,null);A(this,Vd,null);A(this,Gd,null);A(this,Ks,!1);A(this,tr,null);A(this,Vi,null);A(this,Gi,null);A(this,Mt,null);A(this,Wi,null);A(this,ha,null);A(this,bm,null);A(this,Ki,null);A(this,Wd,null);A(this,ic,null);A(this,fa,!1);A(this,cn,null);A(this,pa,null);y(this,ut,e),y(this,Wd,s),y(this,Ws,o),y(this,Ki,a),y(this,Vd,c),y(this,Hd,t),y(this,bm,u),y(this,Gd,d),y(this,sc,r),y(this,er,f),y(this,cn,r[0]),y(this,da,Rv.toDateObject(i)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f?this.renderCommentButton():(C(this,fe,Iy).call(this),l(this,ut).hidden=!0,h&&C(this,fe,Dy).call(this))}renderCommentButton(){if(l(this,Mt)||(l(this,Wi)||C(this,fe,c1).call(this),!l(this,Wi)))return;const{signal:e}=y(this,Vi,new AbortController),t=!!l(this,cn).extraPopupElement,r=()=>{l(this,er).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{l(this,er).toggleCommentPopup(this,!1,!0,!t)},i=()=>{l(this,er).toggleCommentPopup(this,!1,!1)};if(t){y(this,Mt,l(this,cn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",l(this,ua),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=y(this,Mt,document.createElement("button"));o.className="annotationCommentButton";const a=l(this,cn).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,fe,d1).call(this),C(this,fe,u1).call(this),o.addEventListener("keydown",l(this,ua),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=l(this,cn).commentData;return e?l(this,Vd)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=l(this,Mt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}=l(this,cn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}}get elementBeforePopup(){return l(this,Mt)}get comment(){return l(this,pa)||y(this,pa,l(this,cn).commentText),l(this,pa)}set comment(e){e!==this.comment&&(l(this,cn).commentText=y(this,pa,e))}get parentBoundingClientRect(){return l(this,cn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Mt)&&(l(this,Mt).classList.toggle("selected",e),l(this,Mt).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Mt).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,ha))return l(this,ha);const{x:e,y:t,height:r}=l(this,Mt).getBoundingClientRect(),{x:s,y:i,width:o,height:a}=l(this,cn).layer.getBoundingClientRect();return[(e-s)/o,(t+r-i)/a]}set commentPopupPosition(e){y(this,ha,e)}hasDefaultPopupPosition(){return l(this,ha)===null}get commentButtonPosition(){return l(this,Wi)}get commentButtonWidth(){return l(this,Mt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=l(this,ha)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:i,y:o,width:a,height:c}=s;l(this,er).showDialog(null,this,i+t*a,o+r*c,{...e,parentDimensions:s})}render(){var r,s;if(l(this,tr))return;const e=y(this,tr,document.createElement("div"));if(e.className="popup",l(this,Hd)){const i=e.style.outlineColor=ee.makeHexColor(...l(this,Hd));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=l(this,Wd))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=l(this,Wd)}if(e.append(t),l(this,da)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,da).valueOf()})),i.dateTime=l(this,da).toISOString(),t.append(i)}l2({html:l(this,fe,Ly)||l(this,Ws).str,dir:(s=l(this,Ws))==null?void 0:s.dir,className:"popupContent"},e),l(this,ut).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var s;if(l(this,er)){r?(this.remove(),y(this,pa,null)):t&&(t.deleted?this.remove():(C(this,fe,d1).call(this),y(this,pa,t.text))),e&&(y(this,Wi,null),C(this,fe,c1).call(this),C(this,fe,u1).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}C(this,fe,Iy).call(this),l(this,ic)||y(this,ic,{contentsObj:l(this,Ws),richText:l(this,Ki)}),e&&y(this,Gi,null),t&&t.text&&(y(this,Ki,C(this,fe,yN).call(this,t.text)),y(this,da,Rv.toDateObject(t.date)),y(this,Ws,null)),(s=l(this,tr))==null||s.remove(),y(this,tr,null)}resetEdited(){var e;l(this,ic)&&({contentsObj:ot(this,Ws)._,richText:ot(this,Ki)._}=l(this,ic),y(this,ic,null),(e=l(this,tr))==null||e.remove(),y(this,tr,null),y(this,Gi,null))}remove(){var e,t,r;if((e=l(this,Vi))==null||e.abort(),y(this,Vi,null),(t=l(this,tr))==null||t.remove(),y(this,tr,null),y(this,fa,!1),y(this,Ks,!1),(r=l(this,Mt))==null||r.remove(),y(this,Mt,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){y(this,fa,this.isVisible),l(this,fa)&&(l(this,ut).hidden=!0)}maybeShow(){l(this,er)||(C(this,fe,Iy).call(this),l(this,fa)&&(l(this,tr)||C(this,fe,Oy).call(this),y(this,fa,!1),l(this,ut).hidden=!1))}get isVisible(){return l(this,er)?!1:l(this,ut).hidden===!1}}er=new WeakMap,ua=new WeakMap,n0=new WeakMap,r0=new WeakMap,zd=new WeakMap,Hd=new WeakMap,ut=new WeakMap,Ws=new WeakMap,da=new WeakMap,sc=new WeakMap,Vd=new WeakMap,Gd=new WeakMap,Ks=new WeakMap,tr=new WeakMap,Vi=new WeakMap,Gi=new WeakMap,Mt=new WeakMap,Wi=new WeakMap,ha=new WeakMap,bm=new WeakMap,Ki=new WeakMap,Wd=new WeakMap,ic=new WeakMap,fa=new WeakMap,cn=new WeakMap,pa=new WeakMap,fe=new WeakSet,Iy=function(){var t;if(l(this,Vi))return;y(this,Vi,new AbortController);const{signal:e}=l(this,Vi);for(const r of this.trigger)r.addEventListener("click",l(this,zd),{signal:e}),r.addEventListener("pointerenter",l(this,r0),{signal:e}),r.addEventListener("pointerleave",l(this,n0),{signal:e}),r.classList.add("popupTriggerArea");for(const r of l(this,sc))(t=r.container)==null||t.addEventListener("keydown",l(this,ua),{signal:e})},c1=function(){const e=l(this,sc).find(t=>t.hasCommentButton);e&&y(this,Wi,e._normalizePoint(e.commentButtonPosition))},u1=function(){if(l(this,cn).extraPopupElement&&!l(this,cn).editor)return;this.renderCommentButton();const[e,t]=l(this,Wi),{style:r}=l(this,Mt);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},d1=function(){l(this,cn).extraPopupElement||(this.renderCommentButton(),l(this,Mt).style.backgroundColor=this.commentButtonColor||"")},Ly=function(){const e=l(this,Ki),t=l(this,Ws);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Ki).html||null},h1=function(){var e,t,r;return((r=(t=(e=l(this,fe,Ly))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},gN=function(){var e,t,r;return((r=(t=(e=l(this,fe,Ly))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},yN=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,fe,gN),fontSize:l(this,fe,h1)?`calc(${l(this,fe,h1)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},vN=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ks))&&C(this,fe,Dy).call(this)},wN=function(){if(l(this,Gi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=l(this,Vd);let o=!!l(this,Gd),a=o?l(this,Gd):l(this,bm);for(const v of l(this,sc))if(!a||ee.intersect(v.data.rect,a)!==null){a=v.data.rect,o=!0;break}const c=ee.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,h=c[0]+d,f=c[1];y(this,Gi,[100*(h-s)/t,100*(f-i)/r]);const{style:p}=l(this,ut);p.left=`${l(this,Gi)[0]}%`,p.top=`${l(this,Gi)[1]}%`},Dy=function(){if(l(this,er)){l(this,er).toggleCommentPopup(this,!1);return}y(this,Ks,!l(this,Ks)),l(this,Ks)?(C(this,fe,Oy).call(this),l(this,ut).addEventListener("click",l(this,zd)),l(this,ut).addEventListener("keydown",l(this,ua))):(C(this,fe,f1).call(this),l(this,ut).removeEventListener("click",l(this,zd)),l(this,ut).removeEventListener("keydown",l(this,ua)))},Oy=function(){l(this,tr)||this.render(),this.isVisible?l(this,Ks)&&l(this,ut).classList.add("focused"):(C(this,fe,wN).call(this),l(this,ut).hidden=!1,l(this,ut).style.zIndex=parseInt(l(this,ut).style.zIndex)+1e3)},f1=function(){l(this,ut).classList.remove("focused"),!(l(this,Ks)||!this.isVisible)&&(l(this,ut).hidden=!0,l(this,ut).style.zIndex=parseInt(l(this,ut).style.zIndex)-1e3)};class bN extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ce.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xm;class hH extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,xm,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=y(this,xm,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,xm)}addHighlightArea(){this.container.classList.add("highlightArea")}}xm=new WeakMap;var Sm;class fH extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Sm,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=y(this,Sm,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Sm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sm=new WeakMap;var Am;class pH extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Am,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=y(this,Am,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Am)}addHighlightArea(){this.container.classList.add("highlightArea")}}Am=new WeakMap;var Em;class xN extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Em,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:o,height:a}=this;if(!r)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=r.length;h<f;h+=2){const p=r[h]-t[0],v=t[3]-r[h+1];u.push(`${p},${v}`)}u=u.join(" ");const d=y(this,Em,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Em)}addHighlightArea(){this.container.classList.add("highlightArea")}}Em=new WeakMap;class mH extends xN{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class gH extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Cm,oc,_m,p1;class NA extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,_m);A(this,Cm,null);A(this,oc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ce.HIGHLIGHT:ce.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:a,width:c,height:u}=C(this,_m,p1).call(this,r,t),d=this.svgFactory.create(c,u,!0),h=y(this,Cm,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=s.length;f<p;f++){const v=this.svgFactory.createElement(this.svgElementName);l(this,oc).push(v),v.setAttribute("points",s[f].join(",")),h.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,o=l(this,Cm);if(r>=0&&o.setAttribute("stroke-width",r||1),s)for(let a=0,c=l(this,oc).length;a<c;a++)l(this,oc)[a].setAttribute("points",s[a].join(","));if(i){const{transform:a,width:c,height:u}=C(this,_m,p1).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,oc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cm=new WeakMap,oc=new WeakMap,_m=new WeakSet,p1=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class SN extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ce.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class yH extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class vH extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class wH extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class AN extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ce.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Tm,km,m1;class bH extends tt{constructor(t){var s;super(t,{isRenderable:!0});A(this,km);A(this,Tm,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,km,m1).bind(this)),y(this,Tm,s);const{isMac:i}=Qt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&C(this,km,m1).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Tm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tm=new WeakMap,km=new WeakSet,m1=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Kd,ac,Xd,ma,Pm,lc,Ya,y1,v1;const GA=class GA{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:d}){A(this,Ya);A(this,Kd,null);A(this,ac,null);A(this,Xd,null);A(this,ma,new Map);A(this,Pm,null);A(this,lc,null);this.div=e,y(this,Kd,t),y(this,ac,r),y(this,Pm,a||null),y(this,lc,u||null),y(this,Xd,d||new kA),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return l(this,ma).size>0}async render(e){var o,a,c;const{annotations:t}=e,r=this.div;Fc(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:l(this,lc),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new jv,annotationStorage:l(this,Xd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===vt.POPUP;if(d){const p=s.get(u.id);if(!p)continue;i.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;i.data=u;const h=I_.create(i);if(!h.isRenderable)continue;if(!d&&u.popupRef){const p=s.get(u.popupRef);p?p.push(h):s.set(u.popupRef,[h])}const f=h.render();u.hidden&&(f.style.visibility="hidden"),await C(this,Ya,y1).call(this,f,u.id,i.elements),(a=(o=h.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),h._isEditable&&(l(this,ma).set(h.data.id,h),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(h))}C(this,Ya,v1).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:l(this,lc),svgFactory:new jv,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=GA._defaultBorderStyle),t.data=r;const s=I_.create(t);if(!s.isRenderable)continue;const i=s.render();await C(this,Ya,y1).call(this,i,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Fc(t,{rotation:e.rotation}),C(this,Ya,v1).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ma).values())}getEditableAnnotation(e){return l(this,ma).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:r,rotation:s}=e,i=new sH({data:{id:r,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,lc),annotationStorage:l(this,Xd)}),o=i.render();return t.append(o),(a=l(this,Kd))==null||a.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return pe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:tu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Kd=new WeakMap,ac=new WeakMap,Xd=new WeakMap,ma=new WeakMap,Pm=new WeakMap,lc=new WeakMap,Ya=new WeakSet,y1=async function(e,t,r){var a,c;const s=e.firstChild||e,i=s.id=`${CA}${t}`,o=await((a=l(this,Pm))==null?void 0:a.getAriaAttributes(i));if(o)for(const[u,d]of o)s.setAttribute(u,d);r?r.at(-1).container.after(e):(this.div.append(e),(c=l(this,Kd))==null||c.moveElementInDOM(this.div,e,s,!1))},v1=function(){var t;if(!l(this,ac))return;const e=this.div;for(const[r,s]of l(this,ac)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const a=l(this,ma).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),a._hasNoCanvas=!1):a.canvas=s)}l(this,ac).clear()};let g1=GA;const Yg=/\r\n?|\n/g;var nr,Rm,cc,rr,xt,EN,CN,_N,Fy,ao,jy,By,TN,b1,kN;const Ge=class Ge extends ze{constructor(t){super({...t,name:"freeTextEditor"});A(this,xt);A(this,nr,"");A(this,Rm,`${this.id}-editor`);A(this,cc,null);A(this,rr);G(this,"_colorPicker",null);this.color=t.color||Ge._defaultColor||ze._defaultLineColor,y(this,rr,t.fontSize||Ge._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Ge.prototype,r=o=>o.isEmpty(),s=jc.TRANSLATE_SMALL,i=jc.TRANSLATE_BIG;return pe(this,"_keyboardManager",new lg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){ze.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case ve.FREETEXT_SIZE:Ge._defaultFontSize=r;break;case ve.FREETEXT_COLOR:Ge._defaultColor=r;break}}updateParams(t,r){switch(t){case ve.FREETEXT_SIZE:C(this,xt,EN).call(this,r);break;case ve.FREETEXT_COLOR:C(this,xt,CN).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ve.FREETEXT_SIZE,Ge._defaultFontSize],[ve.FREETEXT_COLOR,Ge._defaultColor||ze._defaultLineColor]]}get propertiesToUpdate(){return[[ve.FREETEXT_SIZE,l(this,rr)],[ve.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Fv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ve.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ge._internalPadding*t,-(Ge._internalPadding+l(this,rr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,cc,new AbortController);const t=this._uiManager.combinedSignal(l(this,cc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Rm)),this._isDraggable=!0,(t=l(this,cc))==null||t.abort(),y(this,cc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,nr),r=y(this,nr,C(this,xt,_N).call(this).trimEnd());if(t===r)return;const s=i=>{if(y(this,nr,i),!i){this.remove();return}C(this,xt,By).call(this),this._uiManager.rebuild(this),C(this,xt,Fy).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),C(this,xt,Fy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ge._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Rm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,rr)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let v,m;switch(this.rotation){case 0:v=t+(a[0]-f)/d,m=r+this.height-(a[1]-p)/h;break;case 90:v=t+(a[0]-f)/d,m=r-(a[1]-p)/h,[c,u]=[u,-c];break;case 180:v=t-this.width+(a[0]-f)/d,m=r-(a[1]-p)/h,[c,u]=[-c,-u];break;case 270:v=t+(a[0]-f-this.height*h)/d,m=r+(a[1]-p-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(v*i,m*o,c,u)}else this._moveAfterPaste(t,r);C(this,xt,By).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,m,x;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=C(v=Ge,ao,b1).call(v,r.getData("text")||"").replaceAll(Yg,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(Yg,"")),g!==this.editorDiv){let w=d;for(const b of this.editorDiv.childNodes){if(b===g){w=h;continue}w.push(C(m=Ge,ao,jy).call(m,b))}}d.push(c.nodeValue.slice(0,u).replaceAll(Yg,""))}else if(c===this.editorDiv){let g=d,w=0;for(const b of this.editorDiv.childNodes)w++===u&&(g=h),g.push(C(x=Ge,ao,jy).call(x,b))}y(this,nr,`${d.join(`
`)}${i}${h.join(`
`)}`),C(this,xt,By).call(this);const f=new Range;let p=Math.sumPrecise(d.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const w=g.nodeValue.length;if(p<=w){f.setStart(g,p),f.setEnd(g,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ge._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,s){var a;let i=null;if(t instanceof bN){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:p,richText:v,contentsObj:m,creationDate:x,modificationDate:g},textContent:w,textPosition:b,parent:{page:{pageNumber:E}}}=t;if(!w||w.length===0)return null;i=t={annotationType:ce.FREETEXT,color:Array.from(u),fontSize:c,value:w.join(`
`),position:b,pageIndex:E-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(m==null?void 0:m.str)||null,richText:v,creationDate:x,modificationDate:g}}const o=await super.deserialize(t,r,s);return y(o,rr,t.fontSize),o.color=ee.makeHexColor(...t.color),y(o,nr,C(a=Ge,ao,b1).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:r,fontSize:l(this,rr),value:C(this,xt,TN).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!C(this,xt,kN).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:s}=r;s.fontSize=`calc(${l(this,rr)}px * var(--total-scale-factor))`,s.color=this.color,r.replaceChildren();for(const i of l(this,nr).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),r.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,nr)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};nr=new WeakMap,Rm=new WeakMap,cc=new WeakMap,rr=new WeakMap,xt=new WeakSet,EN=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-l(this,rr))*this.parentScale),y(this,rr,i),C(this,xt,Fy).call(this)},s=l(this,rr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},CN=function(t){const r=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_N=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(C(s=Ge,ao,jy).call(s,i)),r=i);return t.join(`
`)},Fy=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},ao=new WeakSet,jy=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Yg,"")},By=function(){if(this.editorDiv.replaceChildren(),!!l(this,nr))for(const t of l(this,nr).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},TN=function(){return l(this,nr).replaceAll(""," ")},b1=function(t){return t.replaceAll(" ","")},kN=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,c)=>a!==i[c])||t.pageIndex!==o},A(Ge,ao),G(Ge,"_freeTextDefaultContent",""),G(Ge,"_internalPadding",0),G(Ge,"_defaultColor",null),G(Ge,"_defaultFontSize",10),G(Ge,"_type","freetext"),G(Ge,"_editorType",ce.FREETEXT);let w1=Ge;class J{toSVGPath(){je("Abstract method `toSVGPath` must be implemented.")}get box(){je("Abstract getter `box` must be implemented.")}serialize(e,t){je("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*s,o[a+1]=r+e[a+1]*i;return o}static _rescaleAndSwap(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*s,o[a+1]=r+e[a]*i;return o}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,o){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+o)/6,(r+i)/2,(s+o)/2]}}G(J,"PRECISION",1e-4);var sr,as,qd,Yd,Xs,me,uc,dc,Mm,Nm,Qd,Jd,ga,Im,s0,i0,Pt,bf,PN,RN,MN,NN,IN,LN;const wi=class wi{constructor({x:e,y:t},r,s,i,o,a=0){A(this,Pt);A(this,sr);A(this,as,[]);A(this,qd);A(this,Yd);A(this,Xs,[]);A(this,me,new Float32Array(18));A(this,uc);A(this,dc);A(this,Mm);A(this,Nm);A(this,Qd);A(this,Jd);A(this,ga,[]);y(this,sr,r),y(this,Jd,i*s),y(this,Yd,o),l(this,me).set([NaN,NaN,NaN,NaN,e,t],6),y(this,qd,a),y(this,Nm,l(wi,Im)*s),y(this,Mm,l(wi,i0)*s),y(this,Qd,s),l(this,ga).push(e,t)}isEmpty(){return isNaN(l(this,me)[8])}add({x:e,y:t}){var D;y(this,uc,e),y(this,dc,t);const[r,s,i,o]=l(this,sr);let[a,c,u,d]=l(this,me).subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<l(this,Mm))return!1;const v=p-l(this,Nm),m=v/p,x=m*h,g=m*f;let w=a,b=c;a=u,c=d,u+=x,d+=g,(D=l(this,ga))==null||D.push(e,t);const E=-g/v,_=x/v,k=E*l(this,Jd),P=_*l(this,Jd);return l(this,me).set(l(this,me).subarray(2,8),0),l(this,me).set([u+k,d+P],4),l(this,me).set(l(this,me).subarray(14,18),12),l(this,me).set([u-k,d-P],16),isNaN(l(this,me)[6])?(l(this,Xs).length===0&&(l(this,me).set([a+k,c+P],2),l(this,Xs).push(NaN,NaN,NaN,NaN,(a+k-r)/i,(c+P-s)/o),l(this,me).set([a-k,c-P],14),l(this,as).push(NaN,NaN,NaN,NaN,(a-k-r)/i,(c-P-s)/o)),l(this,me).set([w,b,a,c,u,d],6),!this.isEmpty()):(l(this,me).set([w,b,a,c,u,d],6),Math.abs(Math.atan2(b-c,w-a)-Math.atan2(g,x))<Math.PI/2?([a,c,u,d]=l(this,me).subarray(2,6),l(this,Xs).push(NaN,NaN,NaN,NaN,((a+u)/2-r)/i,((c+d)/2-s)/o),[a,c,w,b]=l(this,me).subarray(14,18),l(this,as).push(NaN,NaN,NaN,NaN,((w+a)/2-r)/i,((b+c)/2-s)/o),!0):([w,b,a,c,u,d]=l(this,me).subarray(0,6),l(this,Xs).push(((w+5*a)/6-r)/i,((b+5*c)/6-s)/o,((5*a+u)/6-r)/i,((5*c+d)/6-s)/o,((a+u)/2-r)/i,((c+d)/2-s)/o),[u,d,a,c,w,b]=l(this,me).subarray(12,18),l(this,as).push(((w+5*a)/6-r)/i,((b+5*c)/6-s)/o,((5*a+u)/6-r)/i,((5*c+d)/6-s)/o,((a+u)/2-r)/i,((c+d)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Xs),t=l(this,as);if(isNaN(l(this,me)[6])&&!this.isEmpty())return C(this,Pt,PN).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);C(this,Pt,MN).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return C(this,Pt,RN).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,o){return new DN(e,t,r,s,i,o)}getOutlines(){var h;const e=l(this,Xs),t=l(this,as),r=l(this,me),[s,i,o,a]=l(this,sr),c=new Float32Array((((h=l(this,ga))==null?void 0:h.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,ga)[f]-s)/o,c[f+1]=(l(this,ga)[f+1]-i)/a;if(c[c.length-2]=(l(this,uc)-s)/o,c[c.length-1]=(l(this,dc)-i)/a,isNaN(r[6])&&!this.isEmpty())return C(this,Pt,NN).call(this,c);const u=new Float32Array(l(this,Xs).length+24+l(this,as).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=C(this,Pt,LN).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+p],u[d+1]=t[f+p+1],d+=2}return C(this,Pt,IN).call(this,u,d),this.newFreeDrawOutline(u,c,l(this,sr),l(this,Qd),l(this,qd),l(this,Yd))}};sr=new WeakMap,as=new WeakMap,qd=new WeakMap,Yd=new WeakMap,Xs=new WeakMap,me=new WeakMap,uc=new WeakMap,dc=new WeakMap,Mm=new WeakMap,Nm=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,ga=new WeakMap,Im=new WeakMap,s0=new WeakMap,i0=new WeakMap,Pt=new WeakSet,bf=function(){const e=l(this,me).subarray(4,6),t=l(this,me).subarray(16,18),[r,s,i,o]=l(this,sr);return[(l(this,uc)+(e[0]-t[0])/2-r)/i,(l(this,dc)+(e[1]-t[1])/2-s)/o,(l(this,uc)+(t[0]-e[0])/2-r)/i,(l(this,dc)+(t[1]-e[1])/2-s)/o]},PN=function(){const[e,t,r,s]=l(this,sr),[i,o,a,c]=C(this,Pt,bf).call(this);return`M${(l(this,me)[2]-e)/r} ${(l(this,me)[3]-t)/s} L${(l(this,me)[4]-e)/r} ${(l(this,me)[5]-t)/s} L${i} ${o} L${a} ${c} L${(l(this,me)[16]-e)/r} ${(l(this,me)[17]-t)/s} L${(l(this,me)[14]-e)/r} ${(l(this,me)[15]-t)/s} Z`},RN=function(e){const t=l(this,as);e.push(`L${t[4]} ${t[5]} Z`)},MN=function(e){const[t,r,s,i]=l(this,sr),o=l(this,me).subarray(4,6),a=l(this,me).subarray(16,18),[c,u,d,h]=C(this,Pt,bf).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-r)/i} L${c} ${u} L${d} ${h} L${(a[0]-t)/s} ${(a[1]-r)/i}`)},NN=function(e){const t=l(this,me),[r,s,i,o]=l(this,sr),[a,c,u,d]=C(this,Pt,bf).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/o],0),this.newFreeDrawOutline(h,e,l(this,sr),l(this,Qd),l(this,qd),l(this,Yd))},IN=function(e,t){const r=l(this,as);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},LN=function(e,t){const r=l(this,me).subarray(4,6),s=l(this,me).subarray(16,18),[i,o,a,c]=l(this,sr),[u,d,h,f]=C(this,Pt,bf).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/c],t),t+=24},A(wi,Im,8),A(wi,s0,2),A(wi,i0,l(wi,Im)+l(wi,s0));let Bv=wi;var Zd,hc,Xi,Lm,ir,Dm,mt,o0,ON;class DN extends J{constructor(t,r,s,i,o,a){super();A(this,o0);A(this,Zd);A(this,hc,new Float32Array(4));A(this,Xi);A(this,Lm);A(this,ir);A(this,Dm);A(this,mt);y(this,mt,t),y(this,ir,r),y(this,Zd,s),y(this,Dm,i),y(this,Xi,o),y(this,Lm,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,o0,ON).call(this,a);const[c,u,d,h]=l(this,hc);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-c)/d,r[f+1]=(r[f+1]-u)/h}toSVGPath(){const t=[`M${l(this,mt)[4]} ${l(this,mt)[5]}`];for(let r=6,s=l(this,mt).length;r<s;r+=6){if(isNaN(l(this,mt)[r])){t.push(`L${l(this,mt)[r+4]} ${l(this,mt)[r+5]}`);continue}t.push(`C${l(this,mt)[r]} ${l(this,mt)[r+1]} ${l(this,mt)[r+2]} ${l(this,mt)[r+3]} ${l(this,mt)[r+4]} ${l(this,mt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,c=i-r;let u,d;switch(o){case 0:u=J._rescale(l(this,mt),t,i,a,-c),d=J._rescale(l(this,ir),t,i,a,-c);break;case 90:u=J._rescaleAndSwap(l(this,mt),t,r,a,c),d=J._rescaleAndSwap(l(this,ir),t,r,a,c);break;case 180:u=J._rescale(l(this,mt),s,r,-a,c),d=J._rescale(l(this,ir),s,r,-a,c);break;case 270:u=J._rescaleAndSwap(l(this,mt),s,i,-a,-c),d=J._rescaleAndSwap(l(this,ir),s,i,-a,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return l(this,hc)}newOutliner(t,r,s,i,o,a=0){return new Bv(t,r,s,i,o,a)}getNewOutline(t,r){const[s,i,o,a]=l(this,hc),[c,u,d,h]=l(this,Zd),f=o*d,p=a*h,v=s*d+c,m=i*h+u,x=this.newOutliner({x:l(this,ir)[0]*f+v,y:l(this,ir)[1]*p+m},l(this,Zd),l(this,Dm),t,l(this,Lm),r??l(this,Xi));for(let g=2;g<l(this,ir).length;g+=2)x.add({x:l(this,ir)[g]*f+v,y:l(this,ir)[g+1]*p+m});return x.getOutlines()}}Zd=new WeakMap,hc=new WeakMap,Xi=new WeakMap,Lm=new WeakMap,ir=new WeakMap,Dm=new WeakMap,mt=new WeakMap,o0=new WeakSet,ON=function(t){const r=l(this,mt);let s=r[4],i=r[5];const o=[s,i,s,i];let a=s,c=i,u=s,d=i;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let v=6,m=r.length;v<m;v+=6){const x=r[v+4],g=r[v+5];isNaN(r[v])?(ee.pointBoundingBox(x,g,o),c>g?(a=x,c=g):c===g&&(a=h(a,x)),d<g?(u=x,d=g):d===g&&(u=h(u,x))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,ee.bezierBoundingBox(s,i,...r.slice(v,v+6),f),ee.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(a=f[0],c=f[1]):c===f[1]&&(a=h(a,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),s=x,i=g}const p=l(this,hc);p[0]=o[0]-l(this,Xi),p[1]=o[1]-l(this,Xi),p[2]=o[2]-o[0]+2*l(this,Xi),p[3]=o[3]-o[1]+2*l(this,Xi),this.firstPoint=[a,c],this.lastPoint=[u,d]};var Om,Fm,jm,ya,ls,Cn,FN,Uy,jN,BN,S1;class x1{constructor(e,t=0,r=0,s=!0){A(this,Cn);A(this,Om);A(this,Fm);A(this,jm);A(this,ya,[]);A(this,ls,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x,y:g,width:w,height:b}of e){const E=Math.floor((x-t)/a)*a,_=Math.ceil((x+w+t)/a)*a,k=Math.floor((g-t)/a)*a,P=Math.ceil((g+b+t)/a)*a,M=[E,k,P,!0],D=[_,k,P,!1];l(this,ya).push(M,D),ee.rectBoundingBox(E,k,_,P,i)}const c=i[2]-i[0]+2*r,u=i[3]-i[1]+2*r,d=i[0]-r,h=i[1]-r;let f=s?-1/0:1/0,p=1/0;const v=l(this,ya).at(s?-1:-2),m=[v[0],v[2]];for(const x of l(this,ya)){const[g,w,b,E]=x;!E&&s?w<p?(p=w,f=g):w===p&&(f=Math.max(f,g)):E&&!s&&(w<p?(p=w,f=g):w===p&&(f=Math.min(f,g))),x[0]=(g-d)/c,x[1]=(w-h)/u,x[2]=(b-h)/u}y(this,Om,new Float32Array([d,h,c,u])),y(this,Fm,[f,p]),y(this,jm,m)}getOutlines(){l(this,ya).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of l(this,ya))t[3]?(e.push(...C(this,Cn,S1).call(this,t)),C(this,Cn,jN).call(this,t)):(C(this,Cn,BN).call(this,t),e.push(...C(this,Cn,S1).call(this,t)));return C(this,Cn,FN).call(this,e)}}Om=new WeakMap,Fm=new WeakMap,jm=new WeakMap,ya=new WeakMap,ls=new WeakMap,Cn=new WeakSet,FN=function(e){const t=[],r=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,c,u,d,h]=o;r.delete(o);let f=a,p=c;for(i=[a,u],s.push(i);;){let v;if(r.has(d))v=d;else if(r.has(h))v=h;else break;r.delete(v),[a,c,u,d,h]=v,f!==a&&(i.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}i.push(f,p)}return new xH(s,l(this,Om),l(this,Fm),l(this,jm))},Uy=function(e){const t=l(this,ls);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},jN=function([,e,t]){const r=C(this,Cn,Uy).call(this,e);l(this,ls).splice(r,0,[e,t])},BN=function([,e,t]){const r=C(this,Cn,Uy).call(this,e);for(let s=r;s<l(this,ls).length;s++){const[i,o]=l(this,ls)[s];if(i!==e)break;if(i===e&&o===t){l(this,ls).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=l(this,ls)[s];if(i!==e)break;if(i===e&&o===t){l(this,ls).splice(s,1);return}}},S1=function(e){const[t,r,s]=e,i=[[t,r,s]],o=C(this,Cn,Uy).call(this,s);for(let a=0;a<o;a++){const[c,u]=l(this,ls)[a];for(let d=0,h=i.length;d<h;d++){const[,f,p]=i[d];if(!(u<=f||p<=c)){if(f>=c){if(p>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=c,p>u&&i.push([t,u,p])}}}return i};var Bm,eh;class xH extends J{constructor(t,r,s,i){super();A(this,Bm);A(this,eh);y(this,eh,t),y(this,Bm,r),this.firstPoint=s,this.lastPoint=i}toSVGPath(){const t=[];for(const r of l(this,eh)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],c=r[o+1];a===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],c=s-t,u=i-r;for(const d of l(this,eh)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return l(this,Bm)}get classNamesForOutlining(){return["highlightOutline"]}}Bm=new WeakMap,eh=new WeakMap;class A1 extends Bv{newFreeDrawOutline(e,t,r,s,i,o){return new SH(e,t,r,s,i,o)}}class SH extends DN{newOutliner(e,t,r,s,i,o=0){return new A1(e,t,r,s,i,o)}}var th,Um,qi,fc,$m,Fn,zm,Hm,pc,or,ar,Vt,nh,rh,un,sh,Or,Vm,he,E1,$y,UN,$N,zN,C1,ol,Ur,au,HN,zy,Hy,VN,GN,WN,KN,XN;const Ee=class Ee extends ze{constructor(t){super({...t,name:"highlightEditor"});A(this,he);A(this,th,null);A(this,Um,0);A(this,qi);A(this,fc,null);A(this,$m,null);A(this,Fn,null);A(this,zm,null);A(this,Hm,0);A(this,pc,null);A(this,or,null);A(this,ar,null);A(this,Vt,!1);A(this,nh,null);A(this,rh,null);A(this,un,null);A(this,sh,"");A(this,Or);A(this,Vm,"");this.color=t.color||Ee._defaultColor,y(this,Or,t.thickness||Ee._defaultThickness),this.opacity=t.opacity||Ee._defaultOpacity,y(this,qi,t.boxes||null),y(this,Vm,t.methodOfCreation||""),y(this,sh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(y(this,Vt,!0),C(this,he,$y).call(this,t),C(this,he,ol).call(this)):l(this,qi)&&(y(this,th,t.anchorNode),y(this,Um,t.anchorOffset),y(this,zm,t.focusNode),y(this,Hm,t.focusOffset),C(this,he,E1).call(this),C(this,he,ol).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ee.prototype;return pe(this,"_keyboardManager",new lg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Vt)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,Or),methodOfCreation:l(this,Vm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;ze.initialize(t,r),Ee._defaultColor||(Ee._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case ve.HIGHLIGHT_COLOR:Ee._defaultColor=r;break;case ve.HIGHLIGHT_THICKNESS:Ee._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return l(this,rh)}get commentButtonPosition(){return l(this,nh)}updateParams(t,r){switch(t){case ve.HIGHLIGHT_COLOR:C(this,he,UN).call(this,r);break;case ve.HIGHLIGHT_THICKNESS:C(this,he,$N).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,Ee._defaultColor],[ve.HIGHLIGHT_THICKNESS,Ee._defaultThickness]]}get propertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,this.color||Ee._defaultColor],[ve.HIGHLIGHT_THICKNESS,l(this,Or)||Ee._defaultThickness],[ve.HIGHLIGHT_FREE,l(this,Vt)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(l(this,ar),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=l(this,$m))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",y(this,$m,new Ov({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,he,Hy).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,C(this,he,Hy).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,he,C1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,he,ol).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?C(this,he,C1).call(this):t&&(C(this,he,ol).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;l(this,Vt)?(t=(t-this.rotation+360)%360,s=C(i=Ee,Ur,au).call(i,l(this,or).box,t)):s=C(o=Ee,Ur,au).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(l(this,ar),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(l(this,un),{bbox:C(a=Ee,Ur,au).call(a,l(this,Fn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,sh)&&(t.setAttribute("aria-label",l(this,sh)),t.setAttribute("role","mark")),l(this,Vt)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,he,HN).bind(this),{signal:this._uiManager._signal});const r=y(this,pc,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=l(this,fc),this.setDims(this.width,this.height),p2(this,l(this,pc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,un),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,un),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,he,zy).call(this,!0);break;case 1:case 3:C(this,he,zy).call(this,!1);break}}select(){var t;super.select(),l(this,un)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,un),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,un)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,un),{rootClass:{selected:!1}}),l(this,Vt)||C(this,he,zy).call(this,!1))}get _mustFixPosition(){return!l(this,Vt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,ar),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,un),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:c,width:u,height:d}=s.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),p=v=>{h.abort(),C(this,Ur,KN).call(this,t,v)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ft,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Kr,{signal:f}),s.addEventListener("pointermove",C(this,Ur,WN).bind(this,t),{signal:f}),this._freeHighlight=new A1({x:i,y:o},[a,c,u,d],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var m,x,g,w;let i=null;if(t instanceof SN){const{data:{quadPoints:b,rect:E,rotation:_,id:k,color:P,opacity:M,popupRef:D,richText:O,contentsObj:j,creationDate:U,modificationDate:V},parent:{page:{pageNumber:$}}}=t;i=t={annotationType:ce.HIGHLIGHT,color:Array.from(P),opacity:M,quadPoints:b,boxes:null,pageIndex:$-1,rect:E.slice(0),rotation:_,annotationElementId:k,id:k,deleted:!1,popupRef:D,richText:O,comment:(j==null?void 0:j.str)||null,creationDate:U,modificationDate:V}}else if(t instanceof NA){const{data:{inkLists:b,rect:E,rotation:_,id:k,color:P,borderStyle:{rawWidth:M},popupRef:D,richText:O,contentsObj:j,creationDate:U,modificationDate:V},parent:{page:{pageNumber:$}}}=t;i=t={annotationType:ce.HIGHLIGHT,color:Array.from(P),thickness:M,inkLists:b,boxes:null,pageIndex:$-1,rect:E.slice(0),rotation:_,annotationElementId:k,id:k,deleted:!1,popupRef:D,richText:O,comment:(j==null?void 0:j.str)||null,creationDate:U,modificationDate:V}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,d=await super.deserialize(t,r,s);d.color=ee.makeHexColor(...o),d.opacity=u||1,c&&y(d,Or,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[p,v]=d.pageTranslation;if(a){const b=y(d,qi,[]);for(let E=0;E<a.length;E+=8)b.push({x:(a[E]-p)/h,y:1-(a[E+1]-v)/f,width:(a[E+2]-a[E])/h,height:(a[E+1]-a[E+5])/f});C(m=d,he,E1).call(m),C(x=d,he,ol).call(x),d.rotate(d.rotation)}else if(c){y(d,Vt,!0);const b=c[0],E={x:b[0]-p,y:f-(b[1]-v)},_=new A1(E,[0,0,h,f],1,l(d,Or)/2,!0,.001);for(let M=0,D=b.length;M<D;M+=2)E.x=b[M]-p,E.y=f-(b[M+1]-v),_.add(E);const{id:k,clipPathId:P}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);C(g=d,he,$y).call(g,{highlightOutlines:_.getOutlines(),highlightId:k,clipPathId:P}),C(w=d,he,ol).call(w),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:r,opacity:this.opacity,thickness:l(this,Or),quadPoints:C(this,he,VN).call(this),outlines:C(this,he,GN).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!C(this,he,XN).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};th=new WeakMap,Um=new WeakMap,qi=new WeakMap,fc=new WeakMap,$m=new WeakMap,Fn=new WeakMap,zm=new WeakMap,Hm=new WeakMap,pc=new WeakMap,or=new WeakMap,ar=new WeakMap,Vt=new WeakMap,nh=new WeakMap,rh=new WeakMap,un=new WeakMap,sh=new WeakMap,Or=new WeakMap,Vm=new WeakMap,he=new WeakSet,E1=function(){const t=new x1(l(this,qi),.001);y(this,or,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,or).box;const r=new x1(l(this,qi),.0025,.001,this._uiManager.direction==="ltr");y(this,Fn,r.getOutlines());const{firstPoint:s}=l(this,or);y(this,nh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:i}=l(this,Fn);y(this,rh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},$y=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(y(this,or,t),y(this,Fn,t.getNewOutline(l(this,Or)/2+1.5,.0025)),r>=0)y(this,ar,r),y(this,fc,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),y(this,un,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Fn).box,path:{d:l(this,Fn).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,ar),{bbox:C(f=Ee,Ur,au).call(f,l(this,or).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,un),{bbox:C(p=Ee,Ur,au).call(p,l(this,Fn).box,v),path:{d:l(this,Fn).toSVGPath()}})}const[o,a,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[v,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/v,this.height=u*v/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[v,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/v,this.height=u*v/m;break}}const{firstPoint:d}=t;y(this,nh,[(d[0]-o)/c,(d[1]-a)/u]);const{lastPoint:h}=l(this,Fn);y(this,rh,[(h[0]-o)/c,(h[1]-a)/u])},UN=function(t){const r=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:r.bind(this,t,Ee._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},$N=function(t){const r=l(this,Or),s=i=>{y(this,Or,i),C(this,he,zN).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},zN=function(t){l(this,Vt)&&(C(this,he,$y).call(this,{highlightOutlines:l(this,or).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},C1=function(){l(this,ar)===null||!this.parent||(this.parent.drawLayer.remove(l(this,ar)),y(this,ar,null),this.parent.drawLayer.remove(l(this,un)),y(this,un,null))},ol=function(t=this.parent){l(this,ar)===null&&({id:ot(this,ar)._,clipPathId:ot(this,fc)._}=t.drawLayer.draw({bbox:l(this,or).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Vt)},path:{d:l(this,or).toSVGPath()}},!1,!0),y(this,un,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Vt)},bbox:l(this,Fn).box,path:{d:l(this,Fn).toSVGPath()}},l(this,Vt))),l(this,pc)&&(l(this,pc).style.clipPath=l(this,fc)))},Ur=new WeakSet,au=function([t,r,s,i],o){switch(o){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},HN=function(t){Ee._keyboardManager.exec(this,t)},zy=function(t){if(!l(this,th))return;const r=window.getSelection();t?r.setPosition(l(this,th),l(this,Um)):r.setPosition(l(this,zm),l(this,Hm))},Hy=function(){return l(this,Vt)?this.rotation:0},VN=function(){if(l(this,Vt))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,o=l(this,qi),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*t+s,v=(1-d)*r+i;a[c]=a[c+4]=p,a[c+1]=a[c+3]=v,a[c+2]=a[c+6]=p+h*t,a[c+5]=a[c+7]=v-f*r,c+=8}return a},GN=function(t){return l(this,or).serialize(t,C(this,he,Hy).call(this))},WN=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},KN=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},XN=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},A(Ee,Ur),G(Ee,"_defaultColor",null),G(Ee,"_defaultOpacity",1),G(Ee,"_defaultThickness",12),G(Ee,"_type","highlight"),G(Ee,"_editorType",ce.HIGHLIGHT),G(Ee,"_freeHighlightId",-1),G(Ee,"_freeHighlight",null),G(Ee,"_freeHighlightClipId","");let Uv=Ee;var mc;class qN{constructor(){A(this,mc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){l(this,mc)[e]=t}toSVGProperties(){const e=l(this,mc);return y(this,mc,Object.create(null)),{root:e}}reset(){y(this,mc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){je("Not implemented")}}mc=new WeakMap;var lr,ih,Nt,gc,yc,va,wa,ba,vc,xe,_1,T1,k1,xf,YN,Vy,Sf,lu;const te=class te extends ze{constructor(t){super(t);A(this,xe);A(this,lr,null);A(this,ih);G(this,"_colorPicker",null);G(this,"_drawId",null);y(this,ih,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(C(this,xe,_1).call(this,t),C(this,xe,xf).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,o]of Object.entries(r))s.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){je("Not implemented")}static get typesMap(){je("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(l(te,Nt).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,o=i[r],a=c=>{var d;i.updateProperty(r,c);const u=l(this,lr).updateProperty(r,c);u&&C(this,xe,Sf).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,lr).getPathResizingSVGProperties(C(this,xe,Vy).call(this)),{bbox:C(this,xe,lu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,lr).getPathResizedSVGProperties(C(this,xe,Vy).call(this)),{bbox:C(this,xe,lu).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:C(this,xe,lu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,lr).getPathTranslatedSVGProperties(C(this,xe,Vy).call(this),this.parentDimensions),{bbox:C(this,xe,lu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,ih)&&(y(this,ih,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,xe,k1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,xe,xf).call(this),C(this,xe,Sf).call(this,l(this,lr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,xe,k1).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,xe,xf).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties({bbox:C(this,xe,lu).call(this)},l(this,lr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,xe,Sf).call(this,l(this,lr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,o){je("Not implemented")}static startDrawing(t,r,s,i){var x;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:d}=i;if(l(te,wa)&&l(te,wa)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:p}=o.getBoundingClientRect(),v=y(te,gc,new AbortController),m=t.combinedSignal(v);if(l(te,va)||y(te,va,u),l(te,wa)??y(te,wa,d),window.addEventListener("pointerup",g=>{var w;l(te,va)===g.pointerId?this._endDraw(g):(w=l(te,ba))==null||w.delete(g.pointerId)},{signal:m}),window.addEventListener("pointercancel",g=>{var w;l(te,va)===g.pointerId?this._currentParent.endDrawingSession():(w=l(te,ba))==null||w.delete(g.pointerId)},{signal:m}),window.addEventListener("pointerdown",g=>{l(te,wa)===g.pointerType&&((l(te,ba)||y(te,ba,new Set)).add(g.pointerId),l(te,Nt).isCancellable()&&(l(te,Nt).removeLastElement(),l(te,Nt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Kr,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",g=>{g.timeStamp===l(te,vc)&&ft(g)},{signal:m}),t.toggleDrawing(),(x=r._editorUndoBar)==null||x.hide(),l(te,Nt)){t.drawLayer.updateProperties(this._currentDrawId,l(te,Nt).startNew(a,c,f,p,h));return}r.updateUIForDefaultProperties(this),y(te,Nt,this.createDrawerInstance(a,c,f,p,h)),y(te,yc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(te,yc).toSVGProperties(),l(te,Nt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(y(te,vc,-1),!l(te,Nt))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(l(te,va)===i){if(((o=l(te,ba))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(te,Nt).add(r,s)),y(te,vc,t.timeStamp),ft(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,y(te,Nt,null),y(te,yc,null),y(te,wa,null),y(te,vc,NaN)),l(te,gc)&&(l(te,gc).abort(),y(te,gc,null),y(te,va,NaN),y(te,ba,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,l(te,Nt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=l(te,Nt),i=this._currentDrawId,o=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:ve.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(ve.DRAW_STEP),!l(te,Nt).isEmpty()){const{pageDimensions:[s,i],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(te,Nt).getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:l(te,yc),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,o,a){je("Not implemented")}static async deserialize(t,r,s){var h,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}=r.viewport,u=this.deserializeDraw(a,c,i,o,this._INNER_MARGIN,t),d=await super.deserialize(t,r,s);return d.createDrawingOptions(t),C(h=d,xe,_1).call(h,{drawOutlines:u}),C(f=d,xe,xf).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[r,s]=this.pageTranslation,[i,o]=this.pageDimensions;return l(this,lr).serialize([r,s,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};lr=new WeakMap,ih=new WeakMap,Nt=new WeakMap,gc=new WeakMap,yc=new WeakMap,va=new WeakMap,wa=new WeakMap,ba=new WeakMap,vc=new WeakMap,xe=new WeakSet,_1=function({drawOutlines:t,drawId:r,drawingOptions:s}){y(this,lr,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=C(this,xe,T1).call(this,t,this.parent),C(this,xe,Sf).call(this,t.box)},T1=function(t,r){const{id:s}=r.drawLayer.draw(te._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},k1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},xf=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,xe,T1).call(this,l(this,lr),t)}},YN=function([t,r,s,i]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[r,1-t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},Vy=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-r,t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},Sf=function(t){[this.x,this.y,this.width,this.height]=C(this,xe,YN).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},lu=function(){const{x:t,y:r,width:s,height:i,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(c/u),i*(u/c),s*(c/u)];case 5:return[1-r,t,s*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-r,i*(u/c),s*(c/u)];case 7:return[r-s*(c/u),1-t-i*(u/c),s*(c/u),i*(u/c)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(u/c),r,i*(u/c),s*(c/u)];case 13:return[1-r-s*(c/u),t-i*(u/c),s*(c/u),i*(u/c)];case 14:return[1-t,1-r-s*(c/u),i*(u/c),s*(c/u)];case 15:return[r,1-t,s*(c/u),i*(u/c)];default:return[t,r,s,i]}},G(te,"_currentDrawId",-1),G(te,"_currentParent",null),A(te,Nt,null),A(te,gc,null),A(te,yc,null),A(te,va,NaN),A(te,wa,null),A(te,ba,null),A(te,vc,NaN),G(te,"_INNER_MARGIN",3);let $v=te;var qs,It,Lt,wc,oh,gn,Gt,Fr,bc,xc,Sc,ah,Gy;class AH{constructor(e,t,r,s,i,o){A(this,ah);A(this,qs,new Float64Array(6));A(this,It);A(this,Lt);A(this,wc);A(this,oh);A(this,gn);A(this,Gt,"");A(this,Fr,0);A(this,bc,new ug);A(this,xc);A(this,Sc);y(this,xc,r),y(this,Sc,s),y(this,wc,i),y(this,oh,o),[e,t]=C(this,ah,Gy).call(this,e,t);const a=y(this,It,[NaN,NaN,NaN,NaN,e,t]);y(this,gn,[e,t]),y(this,Lt,[{line:a,points:l(this,gn)}]),l(this,qs).set(a,0)}updateProperty(e,t){e==="stroke-width"&&y(this,oh,t)}isEmpty(){return!l(this,Lt)||l(this,Lt).length===0}isCancellable(){return l(this,gn).length<=10}add(e,t){[e,t]=C(this,ah,Gy).call(this,e,t);const[r,s,i,o]=l(this,qs).subarray(2,6),a=e-i,c=t-o;return Math.hypot(l(this,xc)*a,l(this,Sc)*c)<=2?null:(l(this,gn).push(e,t),isNaN(r)?(l(this,qs).set([i,o,e,t],2),l(this,It).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,qs)[0])&&l(this,It).splice(6,6),l(this,qs).set([r,s,i,o,e,t],0),l(this,It).push(...J.createBezierPoints(r,s,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(l(this,gn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){y(this,xc,r),y(this,Sc,s),y(this,wc,i),[e,t]=C(this,ah,Gy).call(this,e,t);const o=y(this,It,[NaN,NaN,NaN,NaN,e,t]);y(this,gn,[e,t]);const a=l(this,Lt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Lt).push({line:o,points:l(this,gn)}),l(this,qs).set(o,0),y(this,Fr,0),this.toSVGPath(),null}getLastElement(){return l(this,Lt).at(-1)}setLastElement(e){return l(this,Lt)?(l(this,Lt).push(e),y(this,It,e.line),y(this,gn,e.points),y(this,Fr,0),{path:{d:this.toSVGPath()}}):l(this,bc).setLastElement(e)}removeLastElement(){if(!l(this,Lt))return l(this,bc).removeLastElement();l(this,Lt).pop(),y(this,Gt,"");for(let e=0,t=l(this,Lt).length;e<t;e++){const{line:r,points:s}=l(this,Lt)[e];y(this,It,r),y(this,gn,s),y(this,Fr,0),this.toSVGPath()}return{path:{d:l(this,Gt)}}}toSVGPath(){const e=J.svgRound(l(this,It)[4]),t=J.svgRound(l(this,It)[5]);if(l(this,gn).length===2)return y(this,Gt,`${l(this,Gt)} M ${e} ${t} Z`),l(this,Gt);if(l(this,gn).length<=6){const s=l(this,Gt).lastIndexOf("M");y(this,Gt,`${l(this,Gt).slice(0,s)} M ${e} ${t}`),y(this,Fr,6)}if(l(this,gn).length===4){const s=J.svgRound(l(this,It)[10]),i=J.svgRound(l(this,It)[11]);return y(this,Gt,`${l(this,Gt)} L ${s} ${i}`),y(this,Fr,12),l(this,Gt)}const r=[];l(this,Fr)===0&&(r.push(`M ${e} ${t}`),y(this,Fr,6));for(let s=l(this,Fr),i=l(this,It).length;s<i;s+=6){const[o,a,c,u,d,h]=l(this,It).slice(s,s+6).map(J.svgRound);r.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}return y(this,Gt,l(this,Gt)+r.join(" ")),y(this,Fr,l(this,It).length),l(this,Gt)}getOutlines(e,t,r,s){const i=l(this,Lt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),l(this,bc).build(l(this,Lt),e,t,r,l(this,wc),l(this,oh),s),y(this,qs,null),y(this,It,null),y(this,Lt,null),y(this,Gt,null),l(this,bc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}qs=new WeakMap,It=new WeakMap,Lt=new WeakMap,wc=new WeakMap,oh=new WeakMap,gn=new WeakMap,Gt=new WeakMap,Fr=new WeakMap,bc=new WeakMap,xc=new WeakMap,Sc=new WeakMap,ah=new WeakSet,Gy=function(e,t){return J._normalizePoint(e,t,l(this,xc),l(this,Sc),l(this,wc))};var yn,Gm,Wm,cr,Ys,Qs,lh,ch,Ac,Xt,gi,QN,JN,ZN;class ug extends J{constructor(){super(...arguments);A(this,Xt);A(this,yn);A(this,Gm,0);A(this,Wm);A(this,cr);A(this,Ys);A(this,Qs);A(this,lh);A(this,ch);A(this,Ac)}build(t,r,s,i,o,a,c){y(this,Ys,r),y(this,Qs,s),y(this,lh,i),y(this,ch,o),y(this,Ac,a),y(this,Wm,c??0),y(this,cr,t),C(this,Xt,JN).call(this)}get thickness(){return l(this,Ac)}setLastElement(t){return l(this,cr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,cr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of l(this,cr)){if(t.push(`M${J.svgRound(r[4])} ${J.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${J.svgRound(r[10])} ${J.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[o,a,c,u,d,h]=r.subarray(s,s+6).map(J.svgRound);t.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,r,s,i],o){const a=[],c=[],[u,d,h,f]=C(this,Xt,QN).call(this);let p,v,m,x,g,w,b,E,_;switch(l(this,ch)){case 0:_=J._rescale,p=t,v=r+i,m=s,x=-i,g=t+u*s,w=r+(1-d-f)*i,b=t+(u+h)*s,E=r+(1-d)*i;break;case 90:_=J._rescaleAndSwap,p=t,v=r,m=s,x=i,g=t+d*s,w=r+u*i,b=t+(d+f)*s,E=r+(u+h)*i;break;case 180:_=J._rescale,p=t+s,v=r,m=-s,x=i,g=t+(1-u-h)*s,w=r+d*i,b=t+(1-u)*s,E=r+(d+f)*i;break;case 270:_=J._rescaleAndSwap,p=t+s,v=r+i,m=-s,x=-i,g=t+(1-d-f)*s,w=r+(1-u-h)*i,b=t+(1-d)*s,E=r+(1-u)*i;break}for(const{line:k,points:P}of l(this,cr))a.push(_(k,p,v,m,x,o?new Array(k.length):null)),c.push(_(P,p,v,m,x,o?new Array(P.length):null));return{lines:a,points:c,rect:[g,w,b,E]}}static deserialize(t,r,s,i,o,{paths:{lines:a,points:c},rotation:u,thickness:d}){const h=[];let f,p,v,m,x;switch(u){case 0:x=J._rescale,f=-t/s,p=r/i+1,v=1/s,m=-1/i;break;case 90:x=J._rescaleAndSwap,f=-r/i,p=-t/s,v=1/i,m=1/s;break;case 180:x=J._rescale,f=t/s+1,p=-r/i,v=-1/s,m=1/i;break;case 270:x=J._rescaleAndSwap,f=r/i+1,p=t/s+1,v=-1/i,m=-1/s;break}if(!a){a=[];for(const w of c){const b=w.length;if(b===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const E=new Float32Array(3*(b-2));a.push(E);let[_,k,P,M]=w.subarray(0,4);E.set([NaN,NaN,NaN,NaN,_,k],0);for(let D=4;D<b;D+=2){const O=w[D],j=w[D+1];E.set(J.createBezierPoints(_,k,P,M,O,j),(D-2)*3),[_,k,P,M]=[P,M,O,j]}}}for(let w=0,b=a.length;w<b;w++)h.push({line:x(a[w].map(E=>E??NaN),f,p,v,m),points:x(c[w].map(E=>E??NaN),f,p,v,m)});const g=new this.prototype.constructor;return g.build(h,s,i,1,u,d,o),g}get box(){return l(this,yn)}updateProperty(t,r){return t==="stroke-width"?C(this,Xt,ZN).call(this,r):null}updateParentDimensions([t,r],s){const[i,o]=C(this,Xt,gi).call(this);y(this,Ys,t),y(this,Qs,r),y(this,lh,s);const[a,c]=C(this,Xt,gi).call(this),u=a-i,d=c-o,h=l(this,yn);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return y(this,Gm,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,yn).map(J.svgRound).join(" ")}get defaultProperties(){const[t,r]=l(this,yn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=l(this,yn);let s=0,i=0,o=0,a=0,c=0,u=0;switch(l(this,Gm)){case 90:i=r/t,o=-t/r,c=t;break;case 180:s=-1,a=-1,c=t,u=r;break;case 270:i=-r/t,o=t/r,u=r;break;default:return""}return`matrix(${s} ${i} ${o} ${a} ${J.svgRound(c)} ${J.svgRound(u)})`}getPathResizingSVGProperties([t,r,s,i]){const[o,a]=C(this,Xt,gi).call(this),[c,u,d,h]=l(this,yn);if(Math.abs(d-o)<=J.PRECISION||Math.abs(h-a)<=J.PRECISION){const x=t+s/2-(c+d/2),g=r+i/2-(u+h/2);return{path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`,transform:`${this.rotationTransform} translate(${x} ${g})`}}}const f=(s-2*o)/(d-2*o),p=(i-2*a)/(h-2*a),v=d/s,m=h/i;return{path:{"transform-origin":`${J.svgRound(c)} ${J.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${m}) translate(${J.svgRound(o)} ${J.svgRound(a)}) scale(${f} ${p}) translate(${J.svgRound(-o)} ${J.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[o,a]=C(this,Xt,gi).call(this),c=l(this,yn),[u,d,h,f]=c;if(c[0]=t,c[1]=r,c[2]=s,c[3]=i,Math.abs(h-o)<=J.PRECISION||Math.abs(f-a)<=J.PRECISION){const g=t+s/2-(u+h/2),w=r+i/2-(d+f/2);for(const{line:b,points:E}of l(this,cr))J._translate(b,g,w,b),J._translate(E,g,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(h-2*o),v=(i-2*a)/(f-2*a),m=-p*(u+o)+t+o,x=-v*(d+a)+r+a;if(p!==1||v!==1||m!==0||x!==0)for(const{line:g,points:w}of l(this,cr))J._rescale(g,m,x,p,v,g),J._rescale(w,m,x,p,v,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,o]=s,a=l(this,yn),c=t-a[0],u=r-a[1];if(l(this,Ys)===i&&l(this,Qs)===o)for(const{line:d,points:h}of l(this,cr))J._translate(d,c,u,d),J._translate(h,c,u,h);else{const d=l(this,Ys)/i,h=l(this,Qs)/o;y(this,Ys,i),y(this,Qs,o);for(const{line:f,points:p}of l(this,cr))J._rescale(f,c,u,d,h,f),J._rescale(p,c,u,d,h,p);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t)} ${J.svgRound(r)}`}}}get defaultSVGProperties(){const t=l(this,yn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t[0])} ${J.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}yn=new WeakMap,Gm=new WeakMap,Wm=new WeakMap,cr=new WeakMap,Ys=new WeakMap,Qs=new WeakMap,lh=new WeakMap,ch=new WeakMap,Ac=new WeakMap,Xt=new WeakSet,gi=function(t=l(this,Ac)){const r=l(this,Wm)+t/2*l(this,lh);return l(this,ch)%180===0?[r/l(this,Ys),r/l(this,Qs)]:[r/l(this,Qs),r/l(this,Ys)]},QN=function(){const[t,r,s,i]=l(this,yn),[o,a]=C(this,Xt,gi).call(this,0);return[t+o,r+a,s-2*o,i-2*a]},JN=function(){const t=y(this,yn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of l(this,cr)){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)ee.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],a=i[5];for(let c=6,u=i.length;c<u;c+=6){const[d,h,f,p,v,m]=i.subarray(c,c+6);ee.bezierBoundingBox(o,a,d,h,f,p,v,m,t),o=v,a=m}}const[r,s]=C(this,Xt,gi).call(this);t[0]=bn(t[0]-r,0,1),t[1]=bn(t[1]-s,0,1),t[2]=bn(t[2]+r,0,1),t[3]=bn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},ZN=function(t){const[r,s]=C(this,Xt,gi).call(this);y(this,Ac,t);const[i,o]=C(this,Xt,gi).call(this),[a,c]=[i-r,o-s],u=l(this,yn);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};class q0 extends qN{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new q0(this._viewParameters);return e.updateAll(this),e}}var a0,eI;const Cu=class Cu extends $v{constructor(t){super({...t,name:"inkEditor"});A(this,a0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){ze.initialize(t,r),this._defaultDrawingOptions=new q0(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return pe(this,"typesMap",new Map([[ve.INK_THICKNESS,"stroke-width"],[ve.INK_COLOR,"stroke"],[ve.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,o){return new AH(t,r,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,o,a){return ug.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){let i=null;if(t instanceof NA){const{data:{inkLists:a,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:v,richText:m,contentsObj:x,creationDate:g,modificationDate:w},parent:{page:{pageNumber:b}}}=t;i=t={annotationType:ce.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:v,richText:m,comment:(x==null?void 0:x.str)||null,creationDate:g,modificationDate:w}}const o=await super.deserialize(t,r,s);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Fv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ve.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Cu.getDefaultDrawingOptions({stroke:ee.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,c=Object.assign(super.serialize(t),{color:ze._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:r,points:s}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!C(this,a0,eI).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};a0=new WeakSet,eI=function(t){const{color:r,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,c)=>a!==r[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==o},G(Cu,"_type","ink"),G(Cu,"_editorType",ce.INK),G(Cu,"_defaultDrawingOptions",null);let P1=Cu;class R1 extends ug{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Qg=8,Yh=3;var Ec,Ce,M1,cs,tI,nI,N1,Wy,rI,sI,iI,I1,L1,oI;class to{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,o,a,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${s} ${h}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:v,actualBoundingBoxAscent:m,actualBoundingBoxDescent:x,fontBoundingBoxAscent:g,fontBoundingBoxDescent:w,width:b}=d.measureText(e),E=1.5,_=Math.ceil(Math.max(Math.abs(p)+Math.abs(v)||0,b)*E),k=Math.ceil(Math.max(Math.abs(m)+Math.abs(x)||h,Math.abs(g)+Math.abs(w)||h)*E);u=new OffscreenCanvas(_,k),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,_,k),d.fillStyle="black",d.fillText(e,_*(E-1)/2,k*(3-E)/2);const P=C(this,Ce,I1).call(this,d.getImageData(0,0,_,k).data),M=C(this,Ce,iI).call(this,P),D=C(this,Ce,L1).call(this,M),O=C(this,Ce,N1).call(this,P,_,k,D);return this.processDrawnLines({lines:{curves:O,width:_,height:k},pageWidth:i,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[o,a,c]=C(this,Ce,oI).call(this,e),[u,d]=C(this,Ce,sI).call(this,o,a,c,Math.hypot(a,c)*l(this,Ec).sigmaSFactor,l(this,Ec).sigmaR,l(this,Ec).kernelSize),h=C(this,Ce,L1).call(this,d),f=C(this,Ce,N1).call(this,u,a,c,h);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:o,areContours:a}){s%180!==0&&([t,r]=[r,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],p=Math.min(t/u,r/d),v=p/t,m=p/r,x=[];for(const{points:w}of c){const b=o?C(this,Ce,rI).call(this,w):w;if(!b)continue;x.push(b);const E=b.length,_=new Float32Array(E),k=new Float32Array(3*(E===2?2:E-2));if(f.push({line:k,points:_}),E===2){_[0]=b[0]*v,_[1]=b[1]*m,k.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[P,M,D,O]=b;P*=v,M*=m,D*=v,O*=m,_.set([P,M,D,O],0),k.set([NaN,NaN,NaN,NaN,P,M],0);for(let j=4;j<E;j+=2){const U=_[j]=b[j]*v,V=_[j+1]=b[j+1]*m;k.set(J.createBezierPoints(P,M,D,O,U,V),(j-2)*3),[P,M,D,O]=[D,O,U,V]}}if(f.length===0)return null;const g=a?new R1:new ug;return g.build(f,t,r,1,s,a?0:h,i),{outline:g,newCurves:x,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let o=1/0,a=-1/0,c=0;for(const b of e){c+=b.length;for(let E=2,_=b.length;E<_;E++){const k=b[E]-b[E-2];o=Math.min(o,k),a=Math.max(a,k)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=Qg+Yh*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=i,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const b of e)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const v=new CompressionStream("deflate-raw"),m=v.writable.getWriter();await m.ready,m.write(f);const x=u.prototype.constructor;for(const b of e){const E=new x(b.length-2);for(let _=2,k=b.length;_<k;_++)E[_-2]=b[_]-b[_-2];m.write(E)}m.close();const g=await new Response(v.readable).arrayBuffer(),w=new Uint8Array(g);return o2(w)}static async decompressSignature(e){try{const t=Uz(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const b of r)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,a),a+=b.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,p=c[5],v=c[6],m=c[7],x=[],g=(Qg+Yh*v)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(m){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(o.buffer,g);break}a=0;for(let b=0;b<v;b++){const E=c[Yh*b+Qg],_=new Float32Array(E+2);x.push(_);for(let k=0;k<Yh-1;k++)_[k]=c[Yh*b+Qg+k+1];for(let k=0;k<E;k++)_[k+2]=_[k]+w[a++]}return{areContours:f,thickness:p,outlines:x,width:d,height:h}}catch(t){return ae(`decompressSignature: ${t}`),null}}}Ec=new WeakMap,Ce=new WeakSet,M1=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},cs=new WeakMap,tI=function(e,t,r,s,i,o,a){const c=C(this,Ce,M1).call(this,r,s,i,o);for(let u=0;u<8;u++){const d=(-u+c-a+16)%8,h=l(this,cs)[2*d],f=l(this,cs)[2*d+1];if(e[(r+h)*t+(s+f)]!==0)return d}return-1},nI=function(e,t,r,s,i,o,a){const c=C(this,Ce,M1).call(this,r,s,i,o);for(let u=0;u<8;u++){const d=(u+c+a+16)%8,h=l(this,cs)[2*d],f=l(this,cs)[2*d+1];if(e[(r+h)*t+(s+f)]!==0)return d}return-1},N1=function(e,t,r,s){const i=e.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=e[d]<=s?1:0;for(let d=1;d<r-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*r-1-d]=0;let a=1,c;const u=[];for(let d=1;d<r-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,p=o[f];if(p===0)continue;let v=d,m=h;if(p===1&&o[f-1]===0)a+=1,m-=1;else if(p>=1&&o[f+1]===0)a+=1,m+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const x=[h,d],g=m===h+1,w={isHole:g,points:x,id:a,parent:0};u.push(w);let b;for(const j of u)if(j.id===c){b=j;break}b?b.isHole?w.parent=g?b.parent:c:w.parent=g?c:b.parent:w.parent=g?c:0;const E=C(this,Ce,tI).call(this,o,t,d,h,v,m,0);if(E===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let _=l(this,cs)[2*E],k=l(this,cs)[2*E+1];const P=d+_,M=h+k;v=P,m=M;let D=d,O=h;for(;;){const j=C(this,Ce,nI).call(this,o,t,D,O,v,m,1);_=l(this,cs)[2*j],k=l(this,cs)[2*j+1];const U=D+_,V=O+k;x.push(V,U);const $=D*t+O;if(o[$+1]===0?o[$]=-a:o[$]===1&&(o[$]=a),U===d&&V===h&&D===P&&O===M){o[f]!==1&&(c=Math.abs(o[f]));break}else v=D,m=O,D=U,O=V}}}return u},Wy=function(e,t,r,s){if(r-t<=4){for(let P=t;P<r-2;P+=2)s.push(e[P],e[P+1]);return}const i=e[t],o=e[t+1],a=e[r-4]-i,c=e[r-3]-o,u=Math.hypot(a,c),d=a/u,h=c/u,f=d*o-h*i,p=c/a,v=1/u,m=Math.atan(p),x=Math.cos(m),g=Math.sin(m),w=v*(Math.abs(x)+Math.abs(g)),b=v*(1-w+w**2),E=Math.max(Math.atan(Math.abs(g+x)*b),Math.atan(Math.abs(g-x)*b));let _=0,k=t;for(let P=t+2;P<r-2;P+=2){const M=Math.abs(f-d*e[P+1]+h*e[P]);M>_&&(k=P,_=M)}_>(u*E)**2?(C(this,Ce,Wy).call(this,e,t,k+2,s),C(this,Ce,Wy).call(this,e,k,r,s)):s.push(i,o)},rI=function(e){const t=[],r=e.length;return C(this,Ce,Wy).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},sI=function(e,t,r,s,i,o){const a=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let m=0;m<o;m++){const x=(m-u)**2;for(let g=0;g<o;g++)a[m*o+g]=Math.exp((x+(g-u)**2)/c)}const d=new Float32Array(256),h=-2*i**2;for(let m=0;m<256;m++)d[m]=Math.exp(m**2/h);const f=e.length,p=new Uint8Array(f),v=new Uint32Array(256);for(let m=0;m<r;m++)for(let x=0;x<t;x++){const g=m*t+x,w=e[g];let b=0,E=0;for(let k=0;k<o;k++){const P=m+k-u;if(!(P<0||P>=r))for(let M=0;M<o;M++){const D=x+M-u;if(D<0||D>=t)continue;const O=e[P*t+D],j=a[k*o+M]*d[Math.abs(O-w)];b+=O*j,E+=j}}const _=p[g]=Math.round(b/E);v[_]++}return[p,v]},iI=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},I1=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let a=0,c=r.length;a<c;a++){const u=r[a]=e[a<<2];s=Math.max(s,u),i=Math.min(i,u)}const o=255/(s-i);for(let a=0,c=r.length;a<c;a++)r[a]=(r[a]-i)*o;return r},L1=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(c=>c!==0);let o=i,a=i;for(t=i;t<256;t++){const c=e[t];c>r&&(t-o>s&&(s=t-o,a=t-1),r=c,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},oI=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=l(this,Ec);let o=r,a=s;if(r>i||s>i){let f=r,p=s,v=Math.log2(Math.max(r,s)/i);const m=Math.floor(v);v=v===m?m-1:m;for(let g=0;g<v;g++){o=Math.ceil(f/2),a=Math.ceil(p/2);const w=new OffscreenCanvas(o,a);w.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==t&&e.close(),e=w.transferToImageBitmap()}const x=Math.min(i/o,i/a);o=Math.round(o*x),a=Math.round(a*x)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[C(this,Ce,I1).call(this,d),o,a]},A(to,Ce),A(to,Ec,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(to,cs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class IA extends qN{constructor(){super(),super.updateProperties({fill:ze._defaultLineColor,"stroke-width":0})}clone(){const e=new IA;return e.updateAll(this),e}}class LA extends q0{constructor(e){super(e),super.updateProperties({stroke:ze._defaultLineColor,"stroke-width":1})}clone(){const e=new LA(this._viewParameters);return e.updateAll(this),e}}var xa,Js,Sa,Cc;const Wn=class Wn extends $v{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});A(this,xa,!1);A(this,Js,null);A(this,Sa,null);A(this,Cc,null);this._willKeepAspectRatio=!0,y(this,Sa,t.signatureData||null),y(this,Js,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){ze.initialize(t,r),this._defaultDrawingOptions=new IA,this._defaultDrawnSignatureOptions=new LA(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return pe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Js)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(l(this,Sa)){const{lines:i,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:d}=l(this,Sa),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,v=to.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:p,innerMargin:Wn._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(v,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Js)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){y(this,Cc,t),this.addEditToolbar()}getUuid(){return l(this,Cc)}get description(){return l(this,Js)}set description(t){y(this,Js,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:o}=l(this,Sa),a=Math.max(i,o),c=to.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:o,y:a}=this,{outline:c}=y(this,Sa,t);y(this,xa,c instanceof R1),this.description=s;let u;l(this,xa)?u=Wn.getDefaultDrawingOptions():(u=Wn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=r/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return to.process(t,r,s,i,Wn._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return to.extractContoursFromText(t,r,s,i,o,Wn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return to.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:Wn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Wn.getDefaultDrawingOptions():(this._drawingOptions=Wn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,xa),color:[0,0,0],thickness:l(this,xa)?0:i});return this.addComment(o),t?(o.paths={lines:r,points:s},o.uuid=l(this,Cc),o.isCopy=!0):o.lines=r,l(this,Js)&&(o.accessibilityData={type:"Figure",alt:l(this,Js)}),o}static deserializeDraw(t,r,s,i,o,a){return a.areContours?R1.deserialize(t,r,s,i,o,a):ug.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){var o;const i=await super.deserialize(t,r,s);return y(i,xa,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",y(i,Cc,t.uuid),i}};xa=new WeakMap,Js=new WeakMap,Sa=new WeakMap,Cc=new WeakMap,G(Wn,"_type","signature"),G(Wn,"_editorType",ce.SIGNATURE),G(Wn,"_defaultDrawingOptions",null);let D1=Wn;var qe,Dt,Aa,Yi,Ea,uh,Qi,_c,Zs,ur,dh,Se,Af,Ef,Ky,Xy,qy,F1,Yy,aI;class O1 extends ze{constructor(t){super({...t,name:"stampEditor"});A(this,Se);A(this,qe,null);A(this,Dt,null);A(this,Aa,null);A(this,Yi,null);A(this,Ea,null);A(this,uh,"");A(this,Qi,null);A(this,_c,!1);A(this,Zs,null);A(this,ur,!1);A(this,dh,!1);y(this,Yi,t.bitmapUrl),y(this,Ea,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){ze.initialize(t,r)}static isHandlingMimeForPasting(t){return wx.includes(t)}static paste(t,r){r.pasteEditor({mode:ce.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,Dt)&&(y(this,qe,null),this._uiManager.imageManager.deleteId(l(this,Dt)),(t=l(this,Qi))==null||t.remove(),y(this,Qi,null),l(this,Zs)&&(clearTimeout(l(this,Zs)),y(this,Zs,null))),super.remove()}rebuild(){if(!this.parent){l(this,Dt)&&C(this,Se,Ky).call(this);return}super.rebuild(),this.div!==null&&(l(this,Dt)&&l(this,Qi)===null&&C(this,Se,Ky).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,Aa)||l(this,qe)||l(this,Yi)||l(this,Ea)||l(this,Dt)||l(this,_c))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,_c)||(l(this,qe)?C(this,Se,Xy).call(this):C(this,Se,Ky).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(y(this,Dt,s),i&&y(this,qe,i),y(this,_c,!1),C(this,Se,Xy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Zs)!==null&&clearTimeout(l(this,Zs)),y(this,Zs,setTimeout(()=>{y(this,Zs,null),C(this,Se,F1).call(this)},200))}copyCanvas(t,r,s=!1){t||(t=224);const{width:i,height:o}=l(this,qe),a=new ai;let c=l(this,qe),u=i,d=o,h=null;if(r){if(i>r||o>r){const P=Math.min(r/i,r/o);u=Math.floor(i*P),d=Math.floor(o*P)}h=document.createElement("canvas");const p=h.width=Math.ceil(u*a.sx),v=h.height=Math.ceil(d*a.sy);l(this,ur)||(c=C(this,Se,qy).call(this,p,v));const m=h.getContext("2d");m.filter=this._uiManager.hcmFilter;let x="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":Wz.isDarkMode&&(x="#8f8f9d",g="#42414d");const w=15,b=w*a.sx,E=w*a.sy,_=new OffscreenCanvas(b*2,E*2),k=_.getContext("2d");k.fillStyle=x,k.fillRect(0,0,b*2,E*2),k.fillStyle=g,k.fillRect(0,0,b,E),k.fillRect(b,E,b,E),m.fillStyle=m.createPattern(_,"repeat"),m.fillRect(0,0,p,v),m.drawImage(c,0,0,c.width,c.height,0,0,p,v)}let f=null;if(s){let p,v;if(a.symmetric&&c.width<t&&c.height<t)p=c.width,v=c.height;else if(c=l(this,qe),i>t||o>t){const g=Math.min(t/i,t/o);p=Math.floor(i*g),v=Math.floor(o*g),l(this,ur)||(c=C(this,Se,qy).call(this,p,v))}const x=new OffscreenCanvas(p,v).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,p,v),f={width:p,height:v,data:x.getImageData(0,0,p,v).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,r,s){var x;let i=null,o=!1;if(t instanceof AN){const{data:{rect:g,rotation:w,id:b,structParent:E,popupRef:_,richText:k,contentsObj:P,creationDate:M,modificationDate:D},container:O,parent:{page:{pageNumber:j}},canvas:U}=t;let V,$;U?(delete t.canvas,{id:V,bitmap:$}=s.imageManager.getFromCanvas(O.id,U),U.remove()):(o=!0,t._hasNoCanvas=!0);const X=((x=await r._structTree.getAriaAttributes(`${CA}${b}`))==null?void 0:x.get("aria-label"))||"";i=t={annotationType:ce.STAMP,bitmapId:V,bitmap:$,pageIndex:j-1,rect:g.slice(0),rotation:w,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:E,popupRef:_,richText:k,comment:(P==null?void 0:P.str)||null,creationDate:M,modificationDate:D}}const a=await super.deserialize(t,r,s),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=t;o?(s.addMissingCanvas(t.id,a),y(a,_c,!0)):h&&s.imageManager.isValidId(h)?(y(a,Dt,h),u&&y(a,qe,u)):y(a,Yi,d),y(a,ur,f);const[v,m]=a.pageDimensions;return a.width=(c[2]-c[0])/v,a.height=(c[3]-c[1])/m,p&&(a.altTextData=p),a._initialData=i,t.comment&&a.setCommentData(t),y(a,dh,!!i),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:l(this,Dt),isSvg:l(this,ur)});if(this.addComment(s),t)return s.bitmapUrl=C(this,Se,Yy).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=C(this,Se,aI).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(r===null)return s;r.stamps||(r.stamps=new Map);const a=l(this,ur)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(l(this,Dt)))r.stamps.set(l(this,Dt),{area:a,serialized:s}),s.bitmap=C(this,Se,Yy).call(this,!1);else if(l(this,ur)){const c=r.stamps.get(l(this,Dt));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=C(this,Se,Yy).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qe=new WeakMap,Dt=new WeakMap,Aa=new WeakMap,Yi=new WeakMap,Ea=new WeakMap,uh=new WeakMap,Qi=new WeakMap,_c=new WeakMap,Zs=new WeakMap,ur=new WeakMap,dh=new WeakMap,Se=new WeakSet,Af=function(t,r=!1){if(!t){this.remove();return}y(this,qe,t.bitmap),r||(y(this,Dt,t.id),y(this,ur,t.isSvg)),t.file&&y(this,uh,t.file.name),C(this,Se,Xy).call(this)},Ef=function(){if(y(this,Aa,null),this._uiManager.enableWaiting(!1),!!l(this,Qi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,qe)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,qe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ky=function(){if(l(this,Dt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Dt)).then(s=>C(this,Se,Af).call(this,s,!0)).finally(()=>C(this,Se,Ef).call(this));return}if(l(this,Yi)){const s=l(this,Yi);y(this,Yi,null),this._uiManager.enableWaiting(!0),y(this,Aa,this._uiManager.imageManager.getFromUrl(s).then(i=>C(this,Se,Af).call(this,i)).finally(()=>C(this,Se,Ef).call(this)));return}if(l(this,Ea)){const s=l(this,Ea);y(this,Ea,null),this._uiManager.enableWaiting(!0),y(this,Aa,this._uiManager.imageManager.getFromFile(s).then(i=>C(this,Se,Af).call(this,i)).finally(()=>C(this,Se,Ef).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=wx.join(",");const r=this._uiManager._signal;y(this,Aa,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Se,Af).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>C(this,Se,Ef).call(this))),t.click()},Xy=function(){var u;const{div:t}=this;let{width:r,height:s}=l(this,qe);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const d=Math.min(a*i/r,a*o/s);r*=d,s*=d}this._uiManager.enableWaiting(!1);const c=y(this,Qi,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/i,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,Se,F1).call(this),l(this,dh)||(this.parent.addUndoableEditor(this),y(this,dh,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,uh)&&this.div.setAttribute("aria-description",l(this,uh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},qy=function(t,r){const{width:s,height:i}=l(this,qe);let o=s,a=i,c=l(this,qe);for(;o>2*t||a>2*r;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,a),c=h.transferToImageBitmap()}return c},F1=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,o=new ai,a=Math.ceil(s*t*o.sx),c=Math.ceil(i*r*o.sy),u=l(this,Qi);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=l(this,ur)?l(this,qe):C(this,Se,qy).call(this,a,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,c)},Yy=function(t){if(t){if(l(this,ur)){const i=this._uiManager.imageManager.getSvgUrl(l(this,Dt));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=l(this,qe),r.getContext("2d").drawImage(l(this,qe),0,0),r.toDataURL()}if(l(this,ur)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Xa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Xa.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(l(this,qe),0,0,l(this,qe).width,l(this,qe).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(l(this,qe))},aI=function(t){var a;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},G(O1,"_type","stamp"),G(O1,"_editorType",ce.STAMP);var Tc,hh,Ca,_a,Ji,jn,Ta,fh,ph,us,Zi,Ot,eo,ka,mh,ne,Pa,Fe,B1,lI,_s,U1,$1,Qy;const Yr=class Yr{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:d}){A(this,Fe);A(this,Tc);A(this,hh,!1);A(this,Ca,null);A(this,_a,null);A(this,Ji,null);A(this,jn,new Map);A(this,Ta,!1);A(this,fh,!1);A(this,ph,!1);A(this,us,null);A(this,Zi,null);A(this,Ot,null);A(this,eo,null);A(this,ka,null);A(this,mh,-1);A(this,ne);const h=[...l(Yr,Pa).values()];if(!Yr._initialized){Yr._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),y(this,ne,e),this.pageIndex=t,this.div=r,y(this,Tc,i),y(this,Ca,o),this.viewport=u,y(this,Ot,c),this.drawLayer=a,this._structTree=s,l(this,ne).addLayer(this)}get isEmpty(){return l(this,jn).size===0}get isInvisible(){return this.isEmpty&&l(this,ne).getMode()===ce.NONE}updateToolbar(e){l(this,ne).updateToolbar(e)}updateMode(e=l(this,ne).getMode()){switch(C(this,Fe,Qy).call(this),e){case ce.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ce.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ce.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ce.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of l(Yr,Pa).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Ot))==null?void 0:t.div)}setEditingState(e){l(this,ne).setEditingState(e)}addCommands(e){l(this,ne).addCommands(e)}cleanUndoStack(e){l(this,ne).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Ca))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;y(this,ph,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=l(this,ka))==null||r.abort(),y(this,ka,null);const e=new Set;for(const s of l(this,Fe,B1))s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,ne).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=l(this,Ca);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),l(this,ne).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}y(this,ph,!1),l(this,ne)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(y(this,fh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,Ot)&&!l(this,ka)){y(this,ka,new AbortController);const s=l(this,ne).combinedSignal(l(this,ka));l(this,Ot).div.addEventListener("pointerdown",i=>{const{clientX:a,clientY:c,timeStamp:u}=i,d=l(this,mh);if(u-d>500){y(this,mh,u);return}y(this,mh,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(a,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const v=new RegExp(`^${op}[0-9]+$`);for(const x of f)if(v.test(x.id)){p=x.id;break}if(!p)return;const m=l(this,jn).get(p);(m==null?void 0:m.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),m.dblclick(i))},{signal:s,capture:!0})}const e=l(this,Ca);if(e){const s=new Map,i=new Map;for(const a of l(this,Fe,B1)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){s.set(a.annotationElementId,a);continue}else i.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:c}=a.data;if(l(this,ne).isDeletedAnnotationElement(c)){a.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=s.get(c),u&&(l(this,ne).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}C(this,Fe,Qy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of l(Yr,Pa).values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,fh,!1)}getEditableAnnotation(e){var t;return((t=l(this,Ca))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ne).getActive()!==e&&l(this,ne).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Ot))!=null&&e.div&&!l(this,eo)){y(this,eo,new AbortController);const t=l(this,ne).combinedSignal(l(this,eo));l(this,Ot).div.addEventListener("pointerdown",C(this,Fe,lI).bind(this),{signal:t}),l(this,Ot).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Ot))!=null&&e.div&&l(this,eo)&&(l(this,eo).abort(),y(this,eo,null),l(this,Ot).div.classList.remove("highlighting"))}enableClick(){if(l(this,_a))return;y(this,_a,new AbortController);const e=l(this,ne).combinedSignal(l(this,_a));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,_a))==null||e.abort(),y(this,_a,null)}attach(e){l(this,jn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ne).isDeletedAnnotationElement(t)&&l(this,ne).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,jn).delete(e.id),(t=l(this,Tc))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,fh)&&e.annotationElementId&&l(this,ne).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ne).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ne).addDeletedAnnotationElement(e.annotationElementId),ze.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ne).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,ph)),l(this,ne).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Ji)&&(e._focusEventsAllowed=!1,y(this,Ji,setTimeout(()=>{y(this,Ji,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ne)._signal}),t.focus())},0))),e._structTreeParentId=(r=l(this,Tc))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of l(this,jn).values())if(t.uid===e)return t;return null}getNextId(){return l(this,ne).getId()}combinedSignal(e){return l(this,ne).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Fe,_s))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ne).updateMode(e.mode);const{offsetX:r,offsetY:s}=C(this,Fe,$1).call(this),i=this.getNextId(),o=C(this,Fe,U1).call(this,{parent:this,id:i,x:r,y:s,uiManager:l(this,ne),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Yr,Pa).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ne)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=C(this,Fe,U1).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,ne),isCentered:t,...r});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(C(this,Fe,$1).call(this),!0,e)}setSelected(e){l(this,ne).setSelected(e)}toggleSelected(e){l(this,ne).toggleSelected(e)}unselect(e){l(this,ne).unselect(e)}pointerup(e){var s;const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,Ta)||(y(this,Ta,!1),(s=l(this,Fe,_s))!=null&&s.isDrawer&&l(this,Fe,_s).supportMultipleDrawings))return;if(!l(this,hh)){y(this,hh,!0);return}const r=l(this,ne).getMode();if(r===ce.STAMP||r===ce.SIGNATURE){l(this,ne).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(l(this,ne).getMode()===ce.HIGHLIGHT&&this.enableTextSelection(),l(this,Ta)){y(this,Ta,!1);return}const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(y(this,Ta,!0),(s=l(this,Fe,_s))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=l(this,ne).getActive();y(this,hh,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,us)){l(this,Fe,_s).startDrawing(this,l(this,ne),!1,e);return}l(this,ne).setCurrentDrawingSession(this),y(this,us,new AbortController);const t=l(this,ne).combinedSignal(l(this,us));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(y(this,Zi,null),this.commitOrRemove())},{signal:t}),l(this,Fe,_s).startDrawing(this,l(this,ne),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&y(this,Zi,t);return}l(this,Zi)&&setTimeout(()=>{var t;(t=l(this,Zi))==null||t.focus(),y(this,Zi,null)},0)}endDrawingSession(e=!1){return l(this,us)?(l(this,ne).setCurrentDrawingSession(null),l(this,us).abort(),y(this,us,null),y(this,Zi,null),l(this,Fe,_s).endDrawing(e)):null}findNewParent(e,t,r){const s=l(this,ne).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return l(this,us)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,us)&&l(this,Fe,_s).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,ne).getActive())==null?void 0:e.parent)===this&&(l(this,ne).commitOrRemove(),l(this,ne).setActiveEditor(null)),l(this,Ji)&&(clearTimeout(l(this,Ji)),y(this,Ji,null));for(const r of l(this,jn).values())(t=l(this,Tc))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,l(this,jn).clear(),l(this,ne).removeLayer(this)}render({viewport:e}){this.viewport=e,Fc(this.div,e);for(const t of l(this,ne).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ne).commitOrRemove(),C(this,Fe,Qy).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Fc(this.div,{rotation:r}),t!==r)for(const s of l(this,jn).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ne).viewParameters.realScale}};Tc=new WeakMap,hh=new WeakMap,Ca=new WeakMap,_a=new WeakMap,Ji=new WeakMap,jn=new WeakMap,Ta=new WeakMap,fh=new WeakMap,ph=new WeakMap,us=new WeakMap,Zi=new WeakMap,Ot=new WeakMap,eo=new WeakMap,ka=new WeakMap,mh=new WeakMap,ne=new WeakMap,Pa=new WeakMap,Fe=new WeakSet,B1=function(){return l(this,jn).size!==0?l(this,jn).values():l(this,ne).getEditors(this.pageIndex)},lI=function(e){l(this,ne).unselectAll();const{target:t}=e;if(t===l(this,Ot).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Ot).div.contains(t)){const{isMac:r}=Qt.platform;if(e.button!==0||e.ctrlKey&&r)return;l(this,ne).showAllEditors("highlight",!0,!0),l(this,Ot).div.classList.add("free"),this.toggleDrawing(),Uv.startHighlighting(this,l(this,ne).direction==="ltr",{target:l(this,Ot).div,x:e.x,y:e.y}),l(this,Ot).div.addEventListener("pointerup",()=>{l(this,Ot).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ne)._signal}),e.preventDefault()}},_s=function(){return l(Yr,Pa).get(l(this,ne).getMode())},U1=function(e){const t=l(this,Fe,_s);return t?new t.prototype.constructor(e):null},$1=function(){const{x:e,y:t,width:r,height:s}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+s),u=(i+a)/2-e,d=(o+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},Qy=function(){for(const e of l(this,jn).values())e.isEmpty()&&e.remove()},G(Yr,"_initialized",!1),A(Yr,Pa,new Map([w1,P1,O1,Uv,D1].map(e=>[e._editorType,e])));let j1=Yr;var ds,vn,kc,Km,l0,cI,li,H1,uI,V1;const Et=class Et{constructor({pageIndex:e}){A(this,li);A(this,ds,null);A(this,vn,new Map);A(this,kc,new Map);this.pageIndex=e}setParent(e){if(!l(this,ds)){y(this,ds,e);return}if(l(this,ds)!==e){if(l(this,vn).size>0)for(const t of l(this,vn).values())t.remove(),e.append(t);y(this,ds,e)}}static get _svgFactory(){return pe(this,"_svgFactory",new jv)}draw(e,t=!1,r=!1){const s=ot(Et,Km)._++,i=C(this,li,H1).call(this),o=Et._svgFactory.createElement("defs");i.append(o);const a=Et._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,kc).set(s,a);const u=r?C(this,li,uI).call(this,o,c):null,d=Et._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),l(this,vn).set(s,i),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=ot(Et,Km)._++,s=C(this,li,H1).call(this),i=Et._svgFactory.createElement("defs");s.append(i);const o=Et._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=Et._svgFactory.createElement("mask");i.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=Et._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Et._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Et._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return s.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),l(this,vn).set(r,s),r}finalizeDraw(e,t){l(this,kc).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:r,bbox:s,rootClass:i,path:o}=t,a=typeof e=="number"?l(this,vn).get(e):e;if(a){if(r&&C(this,li,V1).call(this,a,r),s&&C(c=Et,l0,cI).call(c,a,s),i){const{classList:u}=a;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;C(this,li,V1).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const r=l(this,vn).get(e);r&&(l(t,ds).append(r),l(this,vn).delete(e),l(t,vn).set(e,r))}remove(e){l(this,kc).delete(e),l(this,ds)!==null&&(l(this,vn).get(e).remove(),l(this,vn).delete(e))}destroy(){y(this,ds,null);for(const e of l(this,vn).values())e.remove();l(this,vn).clear(),l(this,kc).clear()}};ds=new WeakMap,vn=new WeakMap,kc=new WeakMap,Km=new WeakMap,l0=new WeakSet,cI=function(e,[t,r,s,i]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},li=new WeakSet,H1=function(){const e=Et._svgFactory.create(1,1,!0);return l(this,ds).append(e),e.setAttribute("aria-hidden",!0),e},uI=function(e,t){const r=Et._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Et._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},V1=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},A(Et,l0),A(Et,Km,0);let z1=Et;globalThis._pdfjsTestingUtils={HighlightOutliner:x1};globalThis.pdfjsLib={AbortException:Ka,AnnotationEditorLayer:j1,AnnotationEditorParamsType:ve,AnnotationEditorType:ce,AnnotationEditorUIManager:jc,AnnotationLayer:g1,AnnotationMode:Ro,AnnotationType:vt,applyOpacity:Xz,build:eH,ColorPicker:Ov,createValidAbsoluteUrl:n2,CSSConstants:Kz,DOMSVGFactory:jv,DrawLayer:z1,FeatureTest:Qt,fetchData:ig,findContrastColor:qz,getDocument:aN,getFilenameFromUrl:$z,getPdfFilenameFromUrl:zz,getRGB:ag,getUuid:i2,getXfaPageViewport:Vz,GlobalWorkerOptions:ni,ImageKind:wy,InvalidPDFException:yx,isDataScheme:K0,isPdfFile:TA,isValidExplicitDest:i5,MathClamp:bn,noContextMenu:Kr,normalizeUnicode:jz,OPS:ap,OutputScale:ai,PasswordResponses:Pz,PDFDataRangeTransport:lN,PDFDateString:Rv,PDFWorker:up,PermissionFlag:kz,PixelsPerInch:Xa,RenderingCancelledException:_A,renderRichText:l2,ResponseException:Pv,setLayerDimensions:Fc,shadow:pe,SignatureExtractor:to,stopEvent:ft,SupportedImageMimeTypes:wx,TextLayer:cp,TouchManager:Nv,updateUrlHash:r2,Util:ee,VerbosityLevel:V0,version:dN,XfaLayer:a2};ni.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${dN}/pdf.worker.min.js`;async function EH(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const s=r.result.split(",")[1];e(s)},r.onerror=t,r.readAsDataURL(n)})}async function dI(n,e){try{return(await Tz.recognize(n,"eng",{logger:r=>{r.status==="recognizing text"&&e&&e(Math.round(r.progress*100))}})).data.text.trim()}catch(t){return console.error("OCR error for image:",t),""}}async function CH(n,e){try{const t=await n.arrayBuffer(),s=await aN({data:t}).promise,i=s.numPages,o=[];for(let a=1;a<=i;a++){e&&e(Math.round(a/i*100));const c=await s.getPage(a),d=(await c.getTextContent()).items.map(h=>h.str).join(" ");if(d.trim())o.push(d);else{const h=c.getViewport({scale:2}),f=document.createElement("canvas"),p=f.getContext("2d");if(p){f.height=h.height,f.width=h.width,await c.render({canvasContext:p,viewport:h,canvas:f}).promise;const v=await new Promise(g=>{f.toBlob(w=>g(w),"image/png")}),m=new File([v],`page-${a}.png`,{type:"image/png"}),x=await dI(m);x&&o.push(x)}}}return o.join(`

`).trim()}catch(t){return console.error("OCR error for PDF:",t),""}}async function _H(n,e){var t;try{e&&e(10);const r=await EH(n);e&&e(30);const s=await fetch("/api/transcribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audio:r,filename:n.name,mimeType:n.type})});if(e&&e(80),!s.ok){const o=await s.json();return console.error("Transcription API error:",o),""}const i=await s.json();return e&&e(100),((t=i.text)==null?void 0:t.trim())||""}catch(r){return console.error("Transcription error for audio:",r),""}}async function TH(n,e){const t=n.type.toLowerCase(),r=n.name.toLowerCase(),s=["audio/ogg","audio/opus","audio/mpeg","audio/mp3","audio/mp4","audio/x-m4a","audio/wav","audio/webm"],i=/\.(ogg|opus|mp3|m4a|wav|webm)$/;return s.includes(t)||i.test(r)?_H(n,e):t==="application/pdf"||r.endsWith(".pdf")?CH(n,e):t.startsWith("image/")||r.match(/\.(jpg|jpeg|png|gif|bmp|tiff|webp)$/)?dI(n,e):(console.warn("Unsupported file type for OCR:",t,r),"")}var dg={},kH=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},hI={},Ar={};let DA;const PH=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ar.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ar.getSymbolTotalCodewords=function(e){return PH[e]};Ar.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Ar.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');DA=e};Ar.isKanjiModeEnabled=function(){return typeof DA<"u"};Ar.toSJIS=function(e){return DA(e)};var Y0={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,s){if(n.isValid(r))return r;try{return e(r)}catch{return s}}})(Y0);function fI(){this.buffer=[],this.length=0}fI.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var RH=fI;function hg(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}hg.prototype.set=function(n,e,t,r){const s=n*this.size+e;this.data[s]=t,r&&(this.reservedBit[s]=!0)};hg.prototype.get=function(n,e){return this.data[n*this.size+e]};hg.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};hg.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var MH=hg,pI={};(function(n){const e=Ar.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let c=1;c<s-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},n.getPositions=function(r){const s=[],i=n.getRowColCoords(r),o=i.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||s.push([i[a],i[c]]);return s}})(pI);var mI={};const NH=Ar.getSymbolSize,L_=7;mI.getPositions=function(e){const t=NH(e);return[[0,0],[t-L_,0],[0,t-L_]]};var gI={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},n.from=function(s){return n.isValid(s)?parseInt(s,10):void 0},n.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,c=0,u=null,d=null;for(let h=0;h<i;h++){a=c=0,u=d=null;for(let f=0;f<i;f++){let p=s.get(h,f);p===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=p,a=1),p=s.get(f,h),p===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=p,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},n.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let c=0;c<i-1;c++){const u=s.get(a,c)+s.get(a,c+1)+s.get(a+1,c)+s.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},n.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,c=0;for(let u=0;u<i;u++){a=c=0;for(let d=0;d<i;d++)a=a<<1&2047|s.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|s.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},n.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(r,s,i){switch(r){case n.Patterns.PATTERN000:return(s+i)%2===0;case n.Patterns.PATTERN001:return s%2===0;case n.Patterns.PATTERN010:return i%3===0;case n.Patterns.PATTERN011:return(s+i)%3===0;case n.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case n.Patterns.PATTERN101:return s*i%2+s*i%3===0;case n.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case n.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)i.isReserved(c,a)||i.xor(c,a,t(s,c,a))},n.getBestMask=function(s,i){const o=Object.keys(n.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){i(u),n.applyMask(u,s);const d=n.getPenaltyN1(s)+n.getPenaltyN2(s)+n.getPenaltyN3(s)+n.getPenaltyN4(s);n.applyMask(u,s),d<c&&(c=d,a=u)}return a}})(gI);var Q0={};const Na=Y0,Jg=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Zg=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Q0.getBlocksCount=function(e,t){switch(t){case Na.L:return Jg[(e-1)*4+0];case Na.M:return Jg[(e-1)*4+1];case Na.Q:return Jg[(e-1)*4+2];case Na.H:return Jg[(e-1)*4+3];default:return}};Q0.getTotalCodewordsCount=function(e,t){switch(t){case Na.L:return Zg[(e-1)*4+0];case Na.M:return Zg[(e-1)*4+1];case Na.Q:return Zg[(e-1)*4+2];case Na.H:return Zg[(e-1)*4+3];default:return}};var yI={},J0={};const Df=new Uint8Array(512),zv=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Df[t]=e,zv[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Df[t]=Df[t-255]})();J0.log=function(e){if(e<1)throw new Error("log("+e+")");return zv[e]};J0.exp=function(e){return Df[e]};J0.mul=function(e,t){return e===0||t===0?0:Df[zv[e]+zv[t]]};(function(n){const e=J0;n.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(r[o],s[a]);return i},n.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},n.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=n.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(yI);const vI=yI;function OA(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}OA.prototype.initialize=function(e){this.degree=e,this.genPoly=vI.generateECPolynomial(this.degree)};OA.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=vI.mod(t,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var IH=OA,wI={},el={},FA={};FA.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ui={};const bI="[0-9]+",LH="[A-Z $%*+\\-./:]+";let dp="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";dp=dp.replace(/u/g,"\\u");const DH="(?:(?![A-Z0-9 $%*+\\-./:]|"+dp+`)(?:.|[\r
]))+`;ui.KANJI=new RegExp(dp,"g");ui.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ui.BYTE=new RegExp(DH,"g");ui.NUMERIC=new RegExp(bI,"g");ui.ALPHANUMERIC=new RegExp(LH,"g");const OH=new RegExp("^"+dp+"$"),FH=new RegExp("^"+bI+"$"),jH=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ui.testKanji=function(e){return OH.test(e)};ui.testNumeric=function(e){return FH.test(e)};ui.testAlphanumeric=function(e){return jH.test(e)};(function(n){const e=FA,t=ui;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},n.getBestModeForData=function(i){return t.testNumeric(i)?n.NUMERIC:t.testAlphanumeric(i)?n.ALPHANUMERIC:t.testKanji(i)?n.KANJI:n.BYTE},n.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},n.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+s)}}n.from=function(i,o){if(n.isValid(i))return i;try{return r(i)}catch{return o}}})(el);(function(n){const e=Ar,t=Q0,r=Y0,s=el,i=FA,o=7973,a=e.getBCHDigit(o);function c(f,p,v){for(let m=1;m<=40;m++)if(p<=n.getCapacity(m,v,f))return m}function u(f,p){return s.getCharCountIndicator(f,p)+4}function d(f,p){let v=0;return f.forEach(function(m){const x=u(m.mode,p);v+=x+m.getBitsLength()}),v}function h(f,p){for(let v=1;v<=40;v++)if(d(f,v)<=n.getCapacity(v,p,s.MIXED))return v}n.from=function(p,v){return i.isValid(p)?parseInt(p,10):v},n.getCapacity=function(p,v,m){if(!i.isValid(p))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=s.BYTE);const x=e.getSymbolTotalCodewords(p),g=t.getTotalCodewordsCount(p,v),w=(x-g)*8;if(m===s.MIXED)return w;const b=w-u(m,p);switch(m){case s.NUMERIC:return Math.floor(b/10*3);case s.ALPHANUMERIC:return Math.floor(b/11*2);case s.KANJI:return Math.floor(b/13);case s.BYTE:default:return Math.floor(b/8)}},n.getBestVersionForData=function(p,v){let m;const x=r.from(v,r.M);if(Array.isArray(p)){if(p.length>1)return h(p,x);if(p.length===0)return 1;m=p[0]}else m=p;return c(m.mode,m.getLength(),x)},n.getEncodedBits=function(p){if(!i.isValid(p)||p<7)throw new Error("Invalid QR Code version");let v=p<<12;for(;e.getBCHDigit(v)-a>=0;)v^=o<<e.getBCHDigit(v)-a;return p<<12|v}})(wI);var xI={};const G1=Ar,SI=1335,BH=21522,D_=G1.getBCHDigit(SI);xI.getEncodedBits=function(e,t){const r=e.bit<<3|t;let s=r<<10;for(;G1.getBCHDigit(s)-D_>=0;)s^=SI<<G1.getBCHDigit(s)-D_;return(r<<10|s)^BH};var AI={};const UH=el;function _h(n){this.mode=UH.NUMERIC,this.data=n.toString()}_h.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};_h.prototype.getLength=function(){return this.data.length};_h.prototype.getBitsLength=function(){return _h.getBitsLength(this.data.length)};_h.prototype.write=function(e){let t,r,s;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-t;i>0&&(r=this.data.substr(t),s=parseInt(r,10),e.put(s,i*3+1))};var $H=_h;const zH=el,rb=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Th(n){this.mode=zH.ALPHANUMERIC,this.data=n}Th.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Th.prototype.getLength=function(){return this.data.length};Th.prototype.getBitsLength=function(){return Th.getBitsLength(this.data.length)};Th.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=rb.indexOf(this.data[t])*45;r+=rb.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(rb.indexOf(this.data[t]),6)};var HH=Th;const VH=el;function kh(n){this.mode=VH.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}kh.getBitsLength=function(e){return e*8};kh.prototype.getLength=function(){return this.data.length};kh.prototype.getBitsLength=function(){return kh.getBitsLength(this.data.length)};kh.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var GH=kh;const WH=el,KH=Ar;function Ph(n){this.mode=WH.KANJI,this.data=n}Ph.getBitsLength=function(e){return e*13};Ph.prototype.getLength=function(){return this.data.length};Ph.prototype.getBitsLength=function(){return Ph.getBitsLength(this.data.length)};Ph.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=KH.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var XH=Ph,EI={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,u,d,h,f,p,v,m,x;!a.empty();){c=a.pop(),u=c.value,h=c.cost,f=t[u]||{};for(d in f)f.hasOwnProperty(d)&&(p=f[d],v=h+p,m=o[d],x=typeof o[d]>"u",(x||m>v)&&(o[d]=v,a.push(d,v),i[d]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var g=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(g)}return i},extract_shortest_path_from_predecessor_list:function(t,r){for(var s=[],i=r;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,r,s){var i=e.single_source_shortest_paths(t,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,s={},i;t=t||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=t.sorter||r.default_sorter,s},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var s={value:t,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(EI);var qH=EI.exports;(function(n){const e=el,t=$H,r=HH,s=GH,i=XH,o=ui,a=Ar,c=qH;function u(g){return unescape(encodeURIComponent(g)).length}function d(g,w,b){const E=[];let _;for(;(_=g.exec(b))!==null;)E.push({data:_[0],index:_.index,mode:w,length:_[0].length});return E}function h(g){const w=d(o.NUMERIC,e.NUMERIC,g),b=d(o.ALPHANUMERIC,e.ALPHANUMERIC,g);let E,_;return a.isKanjiModeEnabled()?(E=d(o.BYTE,e.BYTE,g),_=d(o.KANJI,e.KANJI,g)):(E=d(o.BYTE_KANJI,e.BYTE,g),_=[]),w.concat(b,E,_).sort(function(P,M){return P.index-M.index}).map(function(P){return{data:P.data,mode:P.mode,length:P.length}})}function f(g,w){switch(w){case e.NUMERIC:return t.getBitsLength(g);case e.ALPHANUMERIC:return r.getBitsLength(g);case e.KANJI:return i.getBitsLength(g);case e.BYTE:return s.getBitsLength(g)}}function p(g){return g.reduce(function(w,b){const E=w.length-1>=0?w[w.length-1]:null;return E&&E.mode===b.mode?(w[w.length-1].data+=b.data,w):(w.push(b),w)},[])}function v(g){const w=[];for(let b=0;b<g.length;b++){const E=g[b];switch(E.mode){case e.NUMERIC:w.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:w.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:w.push([E,{data:E.data,mode:e.BYTE,length:u(E.data)}]);break;case e.BYTE:w.push([{data:E.data,mode:e.BYTE,length:u(E.data)}])}}return w}function m(g,w){const b={},E={start:{}};let _=["start"];for(let k=0;k<g.length;k++){const P=g[k],M=[];for(let D=0;D<P.length;D++){const O=P[D],j=""+k+D;M.push(j),b[j]={node:O,lastCount:0},E[j]={};for(let U=0;U<_.length;U++){const V=_[U];b[V]&&b[V].node.mode===O.mode?(E[V][j]=f(b[V].lastCount+O.length,O.mode)-f(b[V].lastCount,O.mode),b[V].lastCount+=O.length):(b[V]&&(b[V].lastCount=O.length),E[V][j]=f(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,w))}}_=M}for(let k=0;k<_.length;k++)E[_[k]].end=0;return{map:E,table:b}}function x(g,w){let b;const E=e.getBestModeForData(g);if(b=e.from(w,E),b!==e.BYTE&&b.bit<E.bit)throw new Error('"'+g+'" cannot be encoded with mode '+e.toString(b)+`.
 Suggested mode is: `+e.toString(E));switch(b===e.KANJI&&!a.isKanjiModeEnabled()&&(b=e.BYTE),b){case e.NUMERIC:return new t(g);case e.ALPHANUMERIC:return new r(g);case e.KANJI:return new i(g);case e.BYTE:return new s(g)}}n.fromArray=function(w){return w.reduce(function(b,E){return typeof E=="string"?b.push(x(E,null)):E.data&&b.push(x(E.data,E.mode)),b},[])},n.fromString=function(w,b){const E=h(w,a.isKanjiModeEnabled()),_=v(E),k=m(_,b),P=c.find_path(k.map,"start","end"),M=[];for(let D=1;D<P.length-1;D++)M.push(k.table[P[D]].node);return n.fromArray(p(M))},n.rawSplit=function(w){return n.fromArray(h(w,a.isKanjiModeEnabled()))}})(AI);const Z0=Ar,sb=Y0,YH=RH,QH=MH,JH=pI,ZH=mI,W1=gI,K1=Q0,e6=IH,Hv=wI,t6=xI,n6=el,ib=AI;function r6(n,e){const t=n.size,r=ZH.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||t<=i+a))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(i+a,o+c,!0,!0):n.set(i+a,o+c,!1,!0))}}function s6(n){const e=n.size;for(let t=8;t<e-8;t++){const r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function i6(n,e){const t=JH.getPositions(e);for(let r=0;r<t.length;r++){const s=t[r][0],i=t[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?n.set(s+o,i+a,!0,!0):n.set(s+o,i+a,!1,!0)}}function o6(n,e){const t=n.size,r=Hv.getEncodedBits(e);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+t-8-3,o=(r>>a&1)===1,n.set(s,i,o,!0),n.set(i,s,o,!0)}function ob(n,e,t){const r=n.size,s=t6.getEncodedBits(e,t);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?n.set(i,8,o,!0):i<8?n.set(i+1,8,o,!0):n.set(r-15+i,8,o,!0),i<8?n.set(8,r-i-1,o,!0):i<9?n.set(8,15-i-1+1,o,!0):n.set(8,15-i-1,o,!0);n.set(r-8,8,1,!0)}function a6(n,e){const t=n.size;let r=-1,s=t-1,i=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(s,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>i&1)===1),n.set(s,a-c,u),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||t<=s){s-=r,r=-r;break}}}function l6(n,e,t){const r=new YH;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),n6.getCharCountIndicator(c.mode,n)),c.write(r)});const s=Z0.getSymbolTotalCodewords(n),i=K1.getTotalCodewordsCount(n,e),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return c6(r,n,e)}function c6(n,e,t){const r=Z0.getSymbolTotalCodewords(e),s=K1.getTotalCodewordsCount(e,t),i=r-s,o=K1.getBlocksCount(e,t),a=r%o,c=o-a,u=Math.floor(r/o),d=Math.floor(i/o),h=d+1,f=u-d,p=new e6(f);let v=0;const m=new Array(o),x=new Array(o);let g=0;const w=new Uint8Array(n.buffer);for(let P=0;P<o;P++){const M=P<c?d:h;m[P]=w.slice(v,v+M),x[P]=p.encode(m[P]),v+=M,g=Math.max(g,M)}const b=new Uint8Array(r);let E=0,_,k;for(_=0;_<g;_++)for(k=0;k<o;k++)_<m[k].length&&(b[E++]=m[k][_]);for(_=0;_<f;_++)for(k=0;k<o;k++)b[E++]=x[k][_];return b}function u6(n,e,t,r){let s;if(Array.isArray(n))s=ib.fromArray(n);else if(typeof n=="string"){let u=e;if(!u){const d=ib.rawSplit(n);u=Hv.getBestVersionForData(d,t)}s=ib.fromString(n,u||40)}else throw new Error("Invalid data");const i=Hv.getBestVersionForData(s,t);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=l6(e,t,s),a=Z0.getSymbolSize(e),c=new QH(a);return r6(c,e),s6(c),i6(c,e),ob(c,t,0),e>=7&&o6(c,e),a6(c,o),isNaN(r)&&(r=W1.getBestMask(c,ob.bind(null,c,t))),W1.applyMask(r,c),ob(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:s}}hI.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=sb.M,s,i;return typeof t<"u"&&(r=sb.from(t.errorCorrectionLevel,sb.M),s=Hv.from(t.version),i=W1.from(t.maskPattern),t.toSJISFunc&&Z0.setToSJISFunction(t.toSJISFunc)),u6(e,s,r,i)};var CI={},jA={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},n.getImageWidth=function(r,s){const i=n.getScale(r,s);return Math.floor((r+s.margin*2)*i)},n.qrToImageData=function(r,s,i){const o=s.modules.size,a=s.modules.data,c=n.getScale(o,i),u=Math.floor((o+i.margin*2)*c),d=i.margin*c,h=[i.color.light,i.color.dark];for(let f=0;f<u;f++)for(let p=0;p<u;p++){let v=(f*u+p)*4,m=i.color.light;if(f>=d&&p>=d&&f<u-d&&p<u-d){const x=Math.floor((f-d)/c),g=Math.floor((p-d)/c);m=h[a[x*o+g]?1:0]}r[v++]=m.r,r[v++]=m.g,r[v++]=m.b,r[v]=m.a}}})(jA);(function(n){const e=jA;function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(i,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=r()),c=e.getOptions(c);const d=e.getImageWidth(i.modules.size,c),h=u.getContext("2d"),f=h.createImageData(d,d);return e.qrToImageData(f.data,i,c),t(h,u,d),h.putImageData(f,0,0),u},n.renderToDataURL=function(i,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=n.render(i,o,c),d=c.type||"image/png",h=c.rendererOpts||{};return u.toDataURL(d,h.quality)}})(CI);var _I={};const d6=jA;function O_(n,e){const t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function ab(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function h6(n,e,t){let r="",s=0,i=!1,o=0;for(let a=0;a<n.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!i&&(i=!0),n[a]?(o++,a>0&&c>0&&n[a-1]||(r+=i?ab("M",c+t,.5+u+t):ab("m",s,0),s=0,i=!1),c+1<e&&n[a+1]||(r+=ab("h",o),o=0)):s++}return r}_I.render=function(e,t,r){const s=d6.getOptions(t),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,c=s.color.light.a?"<path "+O_(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+O_(s.color.dark,"stroke")+' d="'+h6(o,i,s.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof r=="function"&&r(null,f),f};const f6=kH,X1=hI,TI=CI,p6=_I;function BA(n,e,t,r,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!f6())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,u){try{const d=X1.create(t,r);c(n(d,e,r))}catch(d){u(d)}})}try{const c=X1.create(t,r);s(null,n(c,e,r))}catch(c){s(c)}}dg.create=X1.create;dg.toCanvas=BA.bind(null,TI.render);dg.toDataURL=BA.bind(null,TI.renderToDataURL);dg.toString=BA.bind(null,function(n,e,t){return p6.render(n,t)});function kI(n){return`verum_case_file_${n}`}function q1(n){const e=kI(n);try{const r=localStorage.getItem(e);if(r)try{return JSON.parse(r)}catch(s){console.error("Failed to parse case file, creating new one:",s)}}catch(r){console.error("LocalStorage access failed:",r)}const t={caseId:`case_${n}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),mode:n,messages:[],evidence:[],forensics:[]};try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.error("Failed to save case file to localStorage:",r)}return t}function lb(n,e){const r={...q1(n),...e,updatedAt:new Date().toISOString()},s=kI(n);try{localStorage.setItem(s,JSON.stringify(r))}catch(i){console.error("Failed to update case file in localStorage:",i)}return r}function m6(n){const e=`verum_session_key_${n}`;let t=null;try{t=localStorage.getItem(e)}catch(r){console.error("Failed to read session key from localStorage:",r)}if(!t){t=`session_${n}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{localStorage.setItem(e,t)}catch(r){console.error("Failed to save session key to localStorage:",r)}}return t}function g6(){const e=new URLSearchParams(window.location.search).get("mode")||"chat",t=()=>e==="seal"?"Document verification and sealing mode. GPS location captured for jurisdiction. Upload files for analysis, and I can help verify authenticity or seal transcripts for legal purposes. I may refuse to seal documents with legal or criminal implications.":e==="tax"?"Tax assistance mode. GPS location captured for jurisdiction verification. Ask questions about tax returns, deductions, or tax law.":"GPS location captured for jurisdiction verification. Ask any legal questions or upload files for analysis. Cross-border issues will be handled with triple verification.",[r,s]=T.useState([{role:"System",text:t(),isSystem:!0}]),[i,o]=T.useState(""),[a,c]=T.useState(!1),[u,d]=T.useState(null),[h,f]=T.useState([]),[p,v]=T.useState(null),[m,x]=T.useState(null),[g,w]=T.useState(null),[b,E]=T.useState(!1),[_,k]=T.useState(null),P=T.useRef(null),M=T.useRef(null);T.useEffect(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(N=>{const R={latitude:N.coords.latitude,longitude:N.coords.longitude,accuracy:N.coords.accuracy,timestamp:new Date().toISOString()};x(R);const I=lb(e,{location:R});v(I),console.log("GPS location captured for jurisdiction:",R)},N=>{console.info("Location not available:",N.message),w(N.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):w("Geolocation not supported")},[e]),T.useEffect(()=>{async function N(){try{const R=q1(e);v(R),R.location&&!m&&x(R.location);const I=m6(e),F=await(await vC("POST","/api/sessions",{sessionKey:I,mode:e})).json();d(F.id);const K=await(await fetch(`/api/sessions/${F.id}/messages`)).json();if(K.length>0){const re=K.map(Y=>({role:Y.role,text:Y.text,isSystem:Y.isSystem===1}));s([{role:"System",text:t(),isSystem:!0},...re]);const se=lb(e,{messages:re});v(se)}else s([{role:"System",text:t(),isSystem:!0}]);f([])}catch(R){console.error("Failed to initialize session:",R)}}N()},[e]),T.useEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[r]);const D=async(N,R,I=!1)=>{const L={role:N,text:R,isSystem:I};if(s(F=>[...F,L]),u&&!I)try{await vC("POST","/api/messages",{sessionId:u,role:N,text:R,isSystem:I})}catch(F){console.error("Failed to save message:",F)}},O=async N=>{const R=await crypto.subtle.digest("SHA-512",N);return Array.from(new Uint8Array(R)).map(L=>L.toString(16).padStart(2,"0")).join("")},j=async N=>{const R=N.target.files;if(!R)return;E(!0);const I=[];for(const L of Array.from(R))try{const F=L.type.toLowerCase(),z=L.name.toLowerCase(),K=["audio/ogg","audio/opus","audio/mpeg","audio/mp3","audio/mp4","audio/x-m4a","audio/wav","audio/webm"],re=/\.(ogg|opus|mp3|m4a|wav|webm)$/,se=K.includes(F)||re.test(z);k({fileName:L.name,progress:0}),D("System",`${se?"Transcribing audio":"Processing"} ${L.name}...`,!0);const Y=await TH(L,Zt=>{k({fileName:L.name,progress:Zt})}),ge=await L.arrayBuffer(),Ae=await O(ge),_e=btoa(new Uint8Array(ge).reduce((Zt,Gn)=>Zt+String.fromCharCode(Gn),"")),Be={name:L.name,type:L.type,size:L.size,content:_e,hash:Ae,extractedText:Y||void 0};if(I.push(Be),Y){const Zt=Y.length>100?Y.substring(0,100)+"...":Y;D("System",` ${L.name} (${(L.size/1024).toFixed(1)} KB)  Hash: ${Ae.slice(0,16)} | ${se?"Transcribed":"Extracted"}: "${Zt}"`,!0)}else D("System",` ${L.name} (${(L.size/1024).toFixed(1)} KB)  Hash: ${Ae.slice(0,16)} | No text ${se?"transcribed":"extracted"}`,!0)}catch(F){console.error(`Processing failed for ${L.name}:`,F),D("System",` ${L.name} - Processing failed, file uploaded without text extraction`,!0);const z=await L.arrayBuffer(),K=await O(z),re=btoa(new Uint8Array(z).reduce((se,Y)=>se+String.fromCharCode(Y),""));I.push({name:L.name,type:L.type,size:L.size,content:re,hash:K})}f(L=>[...L,...I]),E(!1),k(null),M.current&&(M.current.value="")},U=async()=>{const N=i.trim();if(N){D("You",N),o(""),c(!0);try{const R=q1(e),I={prompt:N,context:"legal",mode:e,location:m||R.location||null,caseFile:{caseId:R.caseId,createdAt:R.createdAt,mode:R.mode,evidence:R.evidence,forensics:R.forensics,location:m||R.location||null,messageCount:r.length}};if(h.length>0){I.files=h.map(K=>({name:K.name,type:K.type,size:K.size,content:K.content,hash:K.hash,extractedText:K.extractedText||void 0}));const z=lb(e,{evidence:[...R.evidence,...h]});v(z)}const F=await(await fetch("/api/assistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();D("Legal AI",(F==null?void 0:F.text)||"(no response)"),f([])}catch{D("Legal AI","(connection error)")}finally{c(!1)}}},V=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),U())},$=()=>{const N={mode:e,timestamp:new Date().toISOString(),messages:r.map((F,z)=>({index:z,role:F.role,text:F.text,isSystem:F.isSystem||!1}))},R=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),I=URL.createObjectURL(R),L=document.createElement("a");L.href=I,L.download=`verum-chat-${e}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(I)},X=()=>{const N=new Date().toISOString(),R=`Verum Omnis Legal AI - Chat Export
Mode: ${e.toUpperCase()}
Date: ${N}
${"=".repeat(60)}

`,I=r.map(re=>`${re.role}: ${re.text}`).join(`

`),L=R+I,F=new Blob([L],{type:"text/plain"}),z=URL.createObjectURL(F),K=document.createElement("a");K.href=z,K.download=`verum-chat-${e}-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(z)},H=()=>{const N=new Date().toISOString(),R=`Index,Timestamp,Mode,Role,Message,IsSystem
`,I=r.map((re,se)=>{const Y=`"${re.text.replace(/"/g,'""')}"`;return`${se},${N},${e},${re.role},${Y},${re.isSystem||!1}`}).join(`
`),L=R+I,F=new Blob([L],{type:"text/csv"}),z=URL.createObjectURL(F),K=document.createElement("a");K.href=z,K.download=`verum-chat-${e}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(z)},B=async()=>{try{if(!window.PDFLib){D("System","PDF library not loaded. Please refresh the page and try again.",!0);return}const N=new Date().toISOString(),R=r.map(xs=>`${xs.role}: ${xs.text}`).join(`
`),I=JSON.stringify({author:"Liam Highcock",device:"User-Device-Unknown",timestamp:N,caseId:(p==null?void 0:p.caseId)||"unknown"}),L=await dg.toDataURL(I,{width:150}),z=(await O(new TextEncoder().encode(R+I))).slice(0,16),{PDFDocument:K,StandardFonts:re,rgb:se}=window.PDFLib,Y=await K.create();Y.setTitle("Verum Omnis  Certified Document"),Y.setAuthor("Liam Highcock"),Y.setCreator("Verum Omnis Forensic System"),Y.setProducer("Verum Omnis Legal AI"),Y.setCreationDate(new Date);const ge=await Y.embedFont(re.Helvetica),Ae=await Y.embedFont(re.HelveticaBold),_e=Y.addPage([595.28,841.89]),{width:Be,height:Zt}=_e.getSize(),Gn=await Y.embedPng(L),vo=Gn.scale(.5);_e.drawText("VERUM OMNIS",{x:Be/2-100,y:Zt/2+50,size:60,font:Ae,color:se(.9,.9,.9),rotate:{angle:Math.PI/6,type:1},opacity:.15});let it=Zt-60;const fg="VERUM OMNIS  CERTIFIED DOCUMENT",ew=ge.widthOfTextAtSize(fg,16);_e.drawText(fg,{x:(Be-ew)/2,y:it,size:16,font:Ae}),it-=40;const tw=["This document is produced by Verum Omnis forensic system.","It contains a visible partial SHA-512 fingerprint and a QR code referencing author/device/timestamp.","Metadata embedded: Author, Creator, CreationDate (UTC).","","Purpose: demonstration of sealed visual elements (watermark, patent tick, partial hash, QR).","","Notes:","- Embedding the file's own hash INSIDE the file changes the hash (circular).","- The partial hash printed here is computed over the document content used to generate the PDF and is","  intended as a visible fingerprint. The final file SHA-512 is shown in the chat after creation."];for(const xs of tw)_e.drawText(xs,{x:50,y:it,size:9,font:ge}),it-=12;it-=20;const Xc=R.split(`
`);for(const xs of Xc){if(it<=120)break;const DI=xs.length>90?xs.slice(0,90)+"...":xs;_e.drawText(DI,{x:50,y:it,size:9,font:ge}),it-=11}_e.drawText(" Patent Pending  Verum Omnis",{x:40,y:55,size:9,font:ge}),_e.drawText(`Partial SHA-512: ${z} (truncated)`,{x:40,y:40,size:8,font:ge}),_e.drawImage(Gn,{x:Be-vo.width-40,y:30,width:vo.width,height:vo.height});const WA=`Author: Liam Highcock  Device: User-Device-Unknown  UTC: ${N}`,PI=ge.widthOfTextAtSize(WA,7);_e.drawText(WA,{x:(Be-PI)/2,y:20,size:7,font:ge});const qc=Y.addPage([595.28,841.89]),RI=await Y.save(),nw=await O(RI);it=Zt-60;const KA="Verum Omnis  Certification",MI=Ae.widthOfTextAtSize(KA,18);qc.drawText(KA,{x:(Be-MI)/2,y:it,size:18,font:Ae}),it-=50;const NI=["This page shows the computed SHA-512 fingerprint for this PDF document.","Note: Embedding a hash inside the file changes the file, so the hash shown below is","computed over the document bytes BEFORE this certification text is rendered (to avoid circular problem).","The true file hash of the complete downloaded PDF is provided in the chat message.","",""];for(const xs of NI)qc.drawText(xs,{x:60,y:it,size:10,font:ge}),it-=15;qc.drawText("SHA-512 (document content before certification):",{x:60,y:it,size:10,font:Ae}),it-=15,qc.drawText(nw.slice(0,100),{x:60,y:it,size:8,font:Ae}),it-=12,qc.drawText(nw.slice(100),{x:60,y:it,size:8,font:Ae}),it-=20,qc.drawText(`Generated UTC: ${N}`,{x:60,y:it,size:9,font:ge});const XA=await Y.save(),II=await O(XA),LI=new Blob([XA],{type:"application/pdf"}),qA=URL.createObjectURL(LI),rw=document.createElement("a");rw.href=qA,rw.download=`verum-sealed-${Date.now()}.pdf`,rw.click(),URL.revokeObjectURL(qA),D("System",`PDF sealed successfully!

Content SHA-512 (page 2): ${nw}

File SHA-512 (downloaded): ${II}`,!0)}catch(N){console.error("Failed to create PDF:",N),D("System",`Failed to create PDF: ${N instanceof Error?N.message:"Unknown error"}`,!0)}};return S.jsxs("div",{className:"min-h-screen",children:[S.jsx(B0,{}),S.jsxs("main",{className:"mx-auto max-w-[1100px] px-4 py-6",children:[S.jsxs("div",{className:"flex items-center gap-2.5 py-3 border-b border-border","data-testid":"header-chat",children:[S.jsx(pA,{height:28}),S.jsx("strong",{className:"text-foreground",children:"Legal AI"}),S.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[m&&S.jsxs("div",{className:"text-xs opacity-70 px-2 py-1 rounded-lg bg-card border border-border","data-testid":"text-location-info",title:`GPS Location for Jurisdiction Verification
Latitude: ${m.latitude.toFixed(6)}
Longitude: ${m.longitude.toFixed(6)}
Accuracy: ${m.accuracy.toFixed(0)}m`,children:[" ",m.latitude.toFixed(2),", ",m.longitude.toFixed(2),""]}),g&&!m&&S.jsx("div",{className:"text-xs opacity-70 text-muted-foreground px-2 py-1 rounded-lg bg-muted/30 border border-border","data-testid":"text-location-error",title:`Location access denied or unavailable.
Jurisdiction verification will use default settings.
Error: ${g}`,children:" Location: Not Available"}),p&&S.jsxs("div",{className:"text-xs opacity-70","data-testid":"text-case-info",children:["Case: ",p.caseId.slice(-8)," | Evidence: ",p.evidence.length]}),S.jsx("div",{className:"opacity-80 text-sm px-2 py-1 rounded-lg bg-accent/30 border border-accent-border","data-testid":"text-mode",children:e.toUpperCase()})]})]}),S.jsx("div",{ref:P,className:"my-4 border border-border rounded-xl bg-card p-3 overflow-auto",style:{minHeight:"50svh",maxHeight:"70svh"},"data-testid":"log-messages",children:r.map((N,R)=>S.jsxs("div",{className:`border border-border rounded-xl p-2.5 my-2 ${N.isSystem?"opacity-85":""}`,"data-testid":`message-${R}`,children:[S.jsxs("strong",{children:[N.role,":"]})," ",N.text]},R))}),S.jsx("input",{ref:M,type:"file",multiple:!0,onChange:j,className:"hidden","data-testid":"input-file",id:"file-upload",disabled:b}),S.jsx("label",{htmlFor:"file-upload",className:`block border border-dashed border-border rounded-xl p-3 text-center mb-4 ${b?"cursor-not-allowed opacity-60":"cursor-pointer hover-elevate"}`,"data-testid":"label-file-upload",children:b?S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx(yj,{className:"w-4 h-4 animate-spin"}),S.jsxs("span",{children:["Processing ",_==null?void 0:_.fileName,"...",_&&_.progress>0&&` (${_.progress}%)`]})]}):"Upload files for analysis (OCR + audio transcription enabled)"}),h.length>0&&S.jsxs("div",{className:"mb-4 p-3 border border-border rounded-xl bg-card","data-testid":"container-uploaded-files",children:[S.jsxs("div",{className:"text-sm font-medium mb-2",children:["Files ready to send (",h.length,"):"]}),S.jsx("div",{className:"space-y-2",children:h.map((N,R)=>S.jsxs("div",{className:"border border-border rounded-lg p-2","data-testid":`file-ready-${R}`,children:[S.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[S.jsxs("div",{className:"flex-1 truncate",children:[S.jsx("span",{className:"font-medium",children:N.name}),S.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",(N.size/1024).toFixed(1)," KB)"]})]}),S.jsx("button",{onClick:()=>f(I=>I.filter((L,F)=>F!==R)),className:"ml-2 text-muted-foreground hover:text-foreground","data-testid":`button-remove-file-${R}`,children:""})]}),N.extractedText&&S.jsxs("div",{className:"text-xs text-muted-foreground mt-1 p-1.5 bg-muted/30 rounded border border-border","data-testid":`text-extracted-preview-${R}`,children:[S.jsx("strong",{children:"Extracted text:"})," ",N.extractedText.length>100?N.extractedText.substring(0,100)+"...":N.extractedText]}),!N.extractedText&&S.jsx("div",{className:"text-xs text-muted-foreground mt-1 italic","data-testid":`text-no-extraction-${R}`,children:"No text extracted"})]},R))})]}),S.jsx(BR,{value:i,onChange:N=>o(N.target.value),onKeyDown:V,placeholder:"Ask a legal question or describe your evidence",className:"w-full min-h-[110px] mb-4","data-testid":"textarea-input"}),S.jsxs("div",{className:"flex gap-2 flex-wrap",children:[S.jsx(my,{onClick:U,disabled:a||!i.trim(),"data-testid":"button-send",children:a?"Sending...":"Send"}),e==="seal"&&S.jsx(my,{onClick:B,variant:"secondary","data-testid":"button-seal-pdf",children:"Seal to PDF"}),S.jsxs(o$,{children:[S.jsx(a$,{asChild:!0,children:S.jsxs(my,{variant:"outline","data-testid":"button-export",children:[S.jsx(mj,{className:"w-4 h-4 mr-2"}),"Export"]})}),S.jsxs(QM,{children:[S.jsx(vy,{onClick:$,"data-testid":"menu-export-json",children:"Export as JSON"}),S.jsx(vy,{onClick:X,"data-testid":"menu-export-txt",children:"Export as TXT"}),S.jsx(vy,{onClick:H,"data-testid":"menu-export-csv",children:"Export as CSV"})]})]})]})]})]})}function y6(){return S.jsxs("div",{className:"min-h-screen",children:[S.jsx(B0,{}),S.jsxs("main",{className:"mx-auto max-w-[1100px] px-4 py-16 text-center",children:[S.jsx("h1",{className:"text-6xl font-bold text-foreground mb-4","data-testid":"text-404-title",children:"404"}),S.jsx("p",{className:"text-xl text-muted mb-8","data-testid":"text-404-message",children:"Page not found"}),S.jsx(io,{href:"/",className:"inline-block px-5 py-3.5 rounded-xl bg-card border border-border text-foreground hover-elevate active-elevate-2","data-testid":"button-home",children:"Return Home"})]})]})}function v6(){return S.jsxs($O,{children:[S.jsx(Mg,{path:"/",component:O3}),S.jsx(Mg,{path:"/institutions",component:z3}),S.jsx(Mg,{path:"/chat",children:()=>S.jsx(g6,{},window.location.search)}),S.jsx(Mg,{component:y6})]})}function w6(){return T.useEffect(()=>{document.documentElement.classList.add("dark")},[]),S.jsx(N3,{children:S.jsx(dF,{client:fF,children:S.jsxs(R3,{children:[S.jsx(rB,{}),S.jsx(v6,{})]})})})}console.log("[DEBUG] main.tsx executing");const Y1=document.getElementById("root");console.log("[DEBUG] root element:",Y1);Y1?(console.log("[DEBUG] Creating React root and rendering App"),iP(Y1).render(S.jsx(w6,{})),console.log("[DEBUG] App rendered successfully")):console.error("[DEBUG] Root element not found!");
